!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).less=e()}}(function(){return function a(t,n,r){function e(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(n){var r=t[o][1][n];return e(r||n)},c,c.exports,a,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;r.length>o;o++)e(r[o]);return e}({1:[function(e,t){var n=e("./utils").addDataAttr,r=e("./browser");t.exports=function(e,t){n(t,r.currentScript(e)),void 0===t.isFileProtocol&&(t.isFileProtocol=/^(file|(chrome|safari)(-extension)?|resource|qrc|app):/.test(e.location.protocol)),t.async=t.async||!1,t.fileAsync=t.fileAsync||!1,t.poll=t.poll||(t.isFileProtocol?1e3:1500),t.env=t.env||("127.0.0.1"==e.location.hostname||"0.0.0.0"==e.location.hostname||"localhost"==e.location.hostname||e.location.port&&e.location.port.length>0||t.isFileProtocol?"development":"production");var i=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(e.location.hash);i&&(t.dumpLineNumbers=i[1]),void 0===t.useFileCache&&(t.useFileCache=!0),void 0===t.onReady&&(t.onReady=!0)}},{"./browser":3,"./utils":9}],2:[function(e,t){e("promise/polyfill.js");var n=window.less||{};e("./add-default-options")(window,n);var r=t.exports=e("./index")(window,n);window.less=r,n.onReady&&(/!watch/.test(window.location.hash)&&r.watch(),r.registerStylesheetsImmediately(),r.pageLoadFinished=r.refresh("development"===r.env))},{"./add-default-options":1,"./index":7,"promise/polyfill.js":95}],3:[function(e,t){var n=e("./utils");t.exports={createCSS:function(e,t,r){var i=r.href||"",o="less:"+(r.title||n.extractId(i)),s=e.getElementById(o),a=!1,u=e.createElement("style");u.setAttribute("type","text/css"),r.media&&u.setAttribute("media",r.media),u.id=o,u.styleSheet||(u.appendChild(e.createTextNode(t)),a=null!==s&&s.childNodes.length>0&&u.childNodes.length>0&&s.firstChild.nodeValue===u.firstChild.nodeValue);var l=e.getElementsByTagName("head")[0];if(null===s||!1===a){var c=r&&r.nextSibling||null;c?c.parentNode.insertBefore(u,c):l.appendChild(u)}if(s&&!1===a&&s.parentNode.removeChild(s),u.styleSheet)try{u.styleSheet.cssText=t}catch(e){throw new Error("Couldn't reassign styleSheet.cssText.")}},currentScript:function(e){var t,n=e.document;return n.currentScript||(t=n.getElementsByTagName("script"))[t.length-1]}}},{"./utils":9}],4:[function(e,t){t.exports=function(e,t,n){var r=null;if("development"!==t.env)try{r=void 0===e.localStorage?null:e.localStorage}catch(e){}return{setCSS:function(e,t,i){if(r){n.info("saving "+e+" to cache.");try{r.setItem(e,i),r.setItem(e+":timestamp",t)}catch(t){n.error('failed to save "'+e+'" to local storage for caching.')}}},getCSS:function(e,t){var n=r&&r.getItem(e),i=r&&r.getItem(e+":timestamp");return i&&t.lastModified&&new Date(t.lastModified).valueOf()===new Date(i).valueOf()?n:void 0}}}},{}],5:[function(e,t){var n=e("./utils"),r=e("./browser");t.exports=function(e,t,i){return{add:function g(o,s){i.errorReporting&&"html"!==i.errorReporting?"console"===i.errorReporting?function k(e,n){var r=e.filename||n,o=[],s=(e.type||"Syntax")+"Error: "+(e.message||"There is an error in your .less file")+" in "+r+" ",a=function(e,t,n){void 0!==e.extract[t]&&o.push("{line} {content}".replace(/\{line\}/,(parseInt(e.line,10)||0)+(t-1)).replace(/\{class\}/,n).replace(/\{content\}/,e.extract[t]))};e.extract&&(a(e,0,""),a(e,1,"line"),a(e,2,""),s+="on line "+e.line+", column "+(e.column+1)+":\n"+o.join("\n")),e.stack&&(e.extract||i.logLevel>=4)&&(s+="\nStack Trace\n"+e.stack),t.logger.error(s)}(o,s):"function"==typeof i.errorReporting&&i.errorReporting("add",o,s):function f(t,o){var s,a,u="less-error-message:"+n.extractId(o||""),l=e.document.createElement("div"),c=[],h=t.filename||o,f=h.match(/([^\/]+(\?.*)?)$/)[1];l.id=u,l.className="less-error-message",a="<h3>"+(t.type||"Syntax")+"Error: "+(t.message||"There is an error in your .less file")+'</h3><p>in <a href="'+h+'">'+f+"</a> ";var p=function(e,t,n){void 0!==e.extract[t]&&c.push('<li><label>{line}</label><pre class="{class}">{content}</pre></li>'.replace(/\{line\}/,(parseInt(e.line,10)||0)+(t-1)).replace(/\{class\}/,n).replace(/\{content\}/,e.extract[t]))};t.extract&&(p(t,0,""),p(t,1,"line"),p(t,2,""),a+="on line "+t.line+", column "+(t.column+1)+":</p><ul>"+c.join("")+"</ul>"),t.stack&&(t.extract||i.logLevel>=4)&&(a+="<br/>Stack Trace</br />"+t.stack.split("\n").slice(1).join("<br/>")),l.innerHTML=a,r.createCSS(e.document,[".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),l.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),"development"===i.env&&(s=setInterval(function(){var t=e.document,n=t.body;n&&(t.getElementById(u)?n.replaceChild(l,t.getElementById(u)):n.insertBefore(l,n.firstChild),clearInterval(s))},10))}(o,s)},remove:function j(t){i.errorReporting&&"html"!==i.errorReporting?"console"===i.errorReporting||"function"==typeof i.errorReporting&&i.errorReporting("remove",t):function h(t){var r=e.document.getElementById("less-error-message:"+n.extractId(t));r&&r.parentNode.removeChild(r)}(t)}}}},{"./browser":3,"./utils":9}],6:[function(e,t){t.exports=function(t,n){var r=e("../less/environment/abstract-file-manager.js"),i={},o=function(){};return(o.prototype=new r).alwaysMakePathsAbsolute=function(){return!0},o.prototype.join=function(e,t){return e?this.extractUrlParts(t,e).path:t},o.prototype.doXHR=function(e,r,i,o){function h(t,n,r){t.status>=200&&300>t.status?n(t.responseText,t.getResponseHeader("Last-Modified")):"function"==typeof r&&r(t.status,e)}var s=function d(){if(window.XMLHttpRequest&&!("file:"===window.location.protocol&&"ActiveXObject"in window))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){return n.error("browser doesn't support AJAX."),null}}(),a=t.isFileProtocol?t.fileAsync:t.async;"function"==typeof s.overrideMimeType&&s.overrideMimeType("text/css"),n.debug("XHR: Getting '"+e+"'"),s.open("GET",e,a),s.setRequestHeader("Accept",r||"text/x-less, text/css; q=0.9, */*; q=0.5"),s.send(null),t.isFileProtocol&&!t.fileAsync?0===s.status||s.status>=200&&300>s.status?i(s.responseText):o(s.status,e):a?s.onreadystatechange=function(){4==s.readyState&&h(s,i,o)}:h(s,i,o)},o.prototype.supports=function(){return!0},o.prototype.clearFileCache=function(){i={}},o.prototype.loadFile=function(e,t,n,r,o){t&&!this.isPathAbsolute(e)&&(e=t+e),n=n||{};var s=this.extractUrlParts(e,window.location.href).url;if(n.useFileCache&&i[s])try{var a=i[s];o(null,{contents:a,filename:s,webInfo:{lastModified:new Date}})}catch(e){o({filename:s,message:"Error loading file "+s+" error was "+e.message})}else this.doXHR(s,n.mime,function(e,t){i[s]=e,o(null,{contents:e,filename:s,webInfo:{lastModified:t}})},function(e,t){o({type:"File",message:"'"+t+"' wasn't found ("+e+")",href:s})})},o}},{"../less/environment/abstract-file-manager.js":14}],7:[function(e,t){var n=e("./utils").addDataAttr,r=e("./browser");t.exports=function(t,o){function g(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function h(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){var r=n.concat(Array.prototype.slice.call(arguments,0));return e.apply(t,r)}}function i(e){for(var t,n=s.getElementsByTagName("style"),r=0;n.length>r;r++)if((t=n[r]).type.match(m)){var i=g(o);i.modifyVars=e;var u=t.innerHTML||"";i.filename=s.location.href.replace(/#.*$/,""),a.render(u,i,h(function(e,t,n){t?d.add(t,"inline"):(e.type="text/css",e.styleSheet?e.styleSheet.cssText=n.css:e.innerHTML=n.css)},null,t))}}function j(e,t,r,i,s){function j(n){var s=n.contents,u=n.filename,c=n.webInfo,h={currentDirectory:p.getPath(u),filename:u,rootFilename:u,relativeUrls:l.relativeUrls};if(h.entryPath=h.currentDirectory,h.rootpath=l.rootpath||h.currentDirectory,c&&(c.remaining=i,!l.modifyVars)){var m=v.getCSS(u,c);if(!r&&m)return c.local=!0,void t(null,m,s,e,c,u)}d.remove(u),l.rootFileInfo=h,a.render(s,l,function(n,r){n?(n.href=u,t(n)):(r.css=function f(e){return o.postProcessor&&"function"==typeof o.postProcessor&&(e=o.postProcessor.call(e,e)||e),e}(r.css),l.modifyVars||v.setCSS(e.href,c.lastModified,r.css),t(null,r.css,s,e,c,u))})}var l=g(o);n(l,e),l.mime=e.type,s&&(l.modifyVars=s),p.loadFile(e.href,null,l,u,function(e,n){return e?void t(e):void j(n)})}function k(e,t,n){for(var r=0;a.sheets.length>r;r++)j(a.sheets[r],e,t,a.sheets.length-(r+1),n)}var s=t.document,a=e("../less")();a.options=o;var u=a.environment,c=e("./file-manager")(o,a.logger),p=new c;u.addFileManager(p),a.FileManager=c,e("./log-listener")(a,o);var d=e("./error-reporting")(t,a,o),v=a.cache=o.cache||e("./cache")(t,o,a.logger);o.functions&&a.functions.functionRegistry.addMultiple(o.functions);var m=/^text\/(x-)?less$/;return a.watch=function(){return a.watchMode||(a.env="development",function l(){"development"===a.env&&(a.watchTimer=setInterval(function(){a.watchMode&&(p.clearFileCache(),k(function(e,n,i,o){e?d.add(e,e.href||o.href):n&&r.createCSS(t.document,n,o)}))},o.poll))}()),this.watchMode=!0,!0},a.unwatch=function(){return clearInterval(a.watchTimer),this.watchMode=!1,!1},a.registerStylesheetsImmediately=function(){var e=s.getElementsByTagName("link");a.sheets=[];for(var t=0;e.length>t;t++)("stylesheet/less"===e[t].rel||e[t].rel.match(/stylesheet/)&&e[t].type.match(m))&&a.sheets.push(e[t])},a.registerStylesheets=function(){return new Promise(function(e){a.registerStylesheetsImmediately(),e()})},a.modifyVars=function(e){return a.refresh(!0,e,!1)},a.refresh=function(e,n,o){return(e||o)&&!1!==o&&p.clearFileCache(),new Promise(function(o,s){var u,l,c;u=l=new Date,k(function(e,n,i,h,f){return e?(d.add(e,e.href||h.href),void s(e)):(a.logger.info(f.local?"loading "+h.href+" from cache.":"rendered "+h.href+" successfully."),r.createCSS(t.document,n,h),a.logger.info("css for "+h.href+" generated in "+(new Date-l)+"ms"),0===f.remaining&&(c=new Date-u,a.logger.info("less has finished. css generated in "+c+"ms"),o({startTime:u,endTime:l,totalMilliseconds:c,sheets:a.sheets.length})),void(l=new Date))},e,n),i(n)})},a.refreshStyles=i,a}},{"../less":30,"./browser":3,"./cache":4,"./error-reporting":5,"./file-manager":6,"./log-listener":8,"./utils":9}],8:[function(e,t){t.exports=function(e,t){t.logLevel=void 0!==t.logLevel?t.logLevel:"development"===t.env?3:1,t.loggers||(t.loggers=[{debug:function(e){t.logLevel>=4&&console.log(e)},info:function(e){t.logLevel>=3&&console.log(e)},warn:function(e){t.logLevel>=2&&console.warn(e)},error:function(e){t.logLevel>=1&&console.error(e)}}]);for(var n=0;t.loggers.length>n;n++)e.logger.addListener(t.loggers[n])}},{}],9:[function(e,t){t.exports={extractId:function(e){return e.replace(/^[a-z-]+:\/+?[^\/]+/,"").replace(/[\?\&]livereload=\w+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")},addDataAttr:function(e,t){for(var n in t.dataset)if(t.dataset.hasOwnProperty(n))if("env"===n||"dumpLineNumbers"===n||"rootpath"===n||"errorReporting"===n)e[n]=t.dataset[n];else try{e[n]=JSON.parse(t.dataset[n])}catch(e){}}}},{}],10:[function(e,t){var n={};t.exports=n;var r=function(e,t,n){if(e)for(var r=0;n.length>r;r++)e.hasOwnProperty(n[r])&&(t[n[r]]=e[n[r]])},i=["paths","relativeUrls","rootpath","strictImports","insecure","dumpLineNumbers","compress","syncImport","chunkInput","mime","useFileCache","processImports","reference","pluginManager"];n.Parse=function(e){r(e,this,i),"string"==typeof this.paths&&(this.paths=[this.paths])};var o=["paths","compress","ieCompat","strictMath","strictUnits","sourceMap","importMultiple","urlArgs","javascriptEnabled","pluginManager","importantScope"];n.Eval=function(e,t){r(e,this,o),"string"==typeof this.paths&&(this.paths=[this.paths]),this.frames=t||[],this.importantScope=this.importantScope||[]},n.Eval.prototype.inParenthesis=function(){this.parensStack||(this.parensStack=[]),this.parensStack.push(!0)},n.Eval.prototype.outOfParenthesis=function(){this.parensStack.pop()},n.Eval.prototype.isMathOn=function(){return!this.strictMath||this.parensStack&&this.parensStack.length},n.Eval.prototype.isPathRelative=function(e){return!/^(?:[a-z-]+:|\/|#)/i.test(e)},n.Eval.prototype.normalizePath=function(e){var t,n=e.split("/").reverse();for(e=[];0!==n.length;)switch(t=n.pop()){case".":break;case"..":0===e.length||".."===e[e.length-1]?e.push(t):e.pop();break;default:e.push(t)}return e.join("/")}},{}],11:[function(e,t){t.exports={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},{}],12:[function(e,t){t.exports={colors:e("./colors"),unitConversions:e("./unit-conversions")}},{"./colors":11,"./unit-conversions":13}],13:[function(e,t){t.exports={length:{m:1,cm:.01,mm:.001,in:.0254,px:.0254/96,pt:.0254/72,pc:.0254/72*12},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}}},{}],14:[function(e,t){var n=function(){};n.prototype.getPath=function(e){var t=e.lastIndexOf("?");return t>0&&(e=e.slice(0,t)),0>(t=e.lastIndexOf("/"))&&(t=e.lastIndexOf("\\")),0>t?"":e.slice(0,t+1)},n.prototype.tryAppendExtension=function(e,t){return/(\.[a-z]*$)|([\?;].*)$/.test(e)?e:e+t},n.prototype.tryAppendLessExtension=function(e){return this.tryAppendExtension(e,".less")},n.prototype.supportsSync=function(){return!1},n.prototype.alwaysMakePathsAbsolute=function(){return!1},n.prototype.isPathAbsolute=function(e){return/^(?:[a-z-]+:|\/|\\|#)/i.test(e)},n.prototype.join=function(e,t){return e?e+t:t},n.prototype.pathDiff=function(e,t){var n,r,i,o,s=this.extractUrlParts(e),a=this.extractUrlParts(t),u="";if(s.hostPart!==a.hostPart)return"";for(r=Math.max(a.directories.length,s.directories.length),n=0;r>n&&a.directories[n]===s.directories[n];n++);for(o=a.directories.slice(n),i=s.directories.slice(n),n=0;o.length-1>n;n++)u+="../";for(n=0;i.length-1>n;n++)u+=i[n]+"/";return u},n.prototype.extractUrlParts=function(e,t){var n,r,i=/^((?:[a-z-]+:)?\/+?(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/i,o=e.match(i),s={},a=[];if(!o)throw new Error("Could not parse sheet href - '"+e+"'");if(t&&(!o[1]||o[2])){if(!(r=t.match(i)))throw new Error("Could not parse page url - '"+t+"'");o[1]=o[1]||r[1]||"",o[2]||(o[3]=r[3]+o[3])}if(o[3]){for(a=o[3].replace(/\\/g,"/").split("/"),n=0;a.length>n;n++)"."===a[n]&&(a.splice(n,1),n-=1);for(n=0;a.length>n;n++)".."===a[n]&&n>0&&(a.splice(n-1,2),n-=2)}return s.hostPart=o[1],s.directories=a,s.path=(o[1]||"")+a.join("/"),s.fileUrl=s.path+(o[4]||""),s.url=s.fileUrl+(o[5]||""),s},t.exports=n},{}],15:[function(e,t){var n=e("../logger"),r=function(e,t){this.fileManagers=t||[],e=e||{};for(var n=[],r=n.concat(["encodeBase64","mimeLookup","charsetLookup","getSourceMapGenerator"]),i=0;r.length>i;i++){var o=r[i],s=e[o];s?this[o]=s.bind(e):n.length>i&&this.warn("missing required function in environment - "+o)}};r.prototype.getFileManager=function(e,t,r,i,o){e||n.warn("getFileManager called with no filename.. Please report this issue. continuing."),null==t&&n.warn("getFileManager called with null directory.. Please report this issue. continuing.");var s=this.fileManagers;r.pluginManager&&(s=[].concat(s).concat(r.pluginManager.getFileManagers()));for(var a=s.length-1;a>=0;a--){var u=s[a];if(u[o?"supportsSync":"supports"](e,t,r,i))return u}return null},r.prototype.addFileManager=function(e){this.fileManagers.push(e)},r.prototype.clearFileManagers=function(){this.fileManagers=[]},t.exports=r},{"../logger":32}],16:[function(e){function b(e,n,r){var i,o,s,a,u=n.alpha,l=r.alpha,c=[];s=l+u*(1-l);for(var h=0;3>h;h++)a=e(i=n.rgb[h]/255,o=r.rgb[h]/255),s&&(a=(l*o+u*(i-l*(i+o-a)))/s),c[h]=255*a;return new t(c,s)}var t=e("../tree/color"),n=e("./function-registry"),r={multiply:function(e,t){return e*t},screen:function(e,t){return e+t-e*t},overlay:function(e,t){return 1>=(e*=2)?r.multiply(e,t):r.screen(e-1,t)},softlight:function(e,t){var n=1,r=e;return t>.5&&(r=1,n=e>.25?Math.sqrt(e):((16*e-12)*e+4)*e),e-(1-2*t)*r*(n-e)},hardlight:function(e,t){return r.overlay(t,e)},difference:function(e,t){return Math.abs(e-t)},exclusion:function(e,t){return e+t-2*e*t},average:function(e,t){return(e+t)/2},negation:function(e,t){return 1-Math.abs(e+t-1)}};for(var i in r)r.hasOwnProperty(i)&&(b[i]=b.bind(null,r[i]));n.addMultiple(b)},{"../tree/color":49,"./function-registry":21}],17:[function(t){function b(e){return Math.min(1,Math.max(0,e))}function c(e){return n.hsla(e.h,e.s,e.l,e.a)}function d(e){if(e instanceof r)return parseFloat(e.unit.is("%")?e.value/100:e.value);if("number"==typeof e)return e;throw{type:"Argument",message:"color functions take numbers as parameters"}}var n,r=t("../tree/dimension"),i=t("../tree/color"),o=t("../tree/quoted"),s=t("../tree/anonymous"),a=t("./function-registry");n={rgb:function(e,t,r){return n.rgba(e,t,r,1)},rgba:function(e,t,n,o){var s=[e,t,n].map(function(t){return function e(t,n){return t instanceof r&&t.unit.is("%")?parseFloat(t.value*n/100):d(t)}(t,255)});return o=d(o),new i(s,o)},hsl:function(e,t,r){return n.hsla(e,t,r,1)},hsla:function(e,t,r,i){function h(e){return 1>6*(e=0>e?e+1:e>1?e-1:e)?s+(o-s)*e*6:1>2*e?o:2>3*e?s+(o-s)*(2/3-e)*6:s}e=d(e)%360/360,t=b(d(t)),r=b(d(r)),i=b(d(i));var o=.5>=r?r*(t+1):r+t-r*t,s=2*r-o;return n.rgba(255*h(e+1/3),255*h(e),255*h(e-1/3),i)},hsv:function(e,t,r){return n.hsva(e,t,r,1)},hsva:function(e,t,r,i){var o,s;e=d(e)%360/360*360,t=d(t),r=d(r),i=d(i);var a=[r,r*(1-t),r*(1-(s=e/60-(o=Math.floor(e/60%6)))*t),r*(1-(1-s)*t)],u=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return n.rgba(255*a[u[o][0]],255*a[u[o][1]],255*a[u[o][2]],i)},hue:function(e){return new r(e.toHSL().h)},saturation:function(e){return new r(100*e.toHSL().s,"%")},lightness:function(e){return new r(100*e.toHSL().l,"%")},hsvhue:function(e){return new r(e.toHSV().h)},hsvsaturation:function(e){return new r(100*e.toHSV().s,"%")},hsvvalue:function(e){return new r(100*e.toHSV().v,"%")},red:function(e){return new r(e.rgb[0])},green:function(e){return new r(e.rgb[1])},blue:function(e){return new r(e.rgb[2])},alpha:function(e){return new r(e.toHSL().a)},luma:function(e){return new r(e.luma()*e.alpha*100,"%")},luminance:function(e){var t=.2126*e.rgb[0]/255+.7152*e.rgb[1]/255+.0722*e.rgb[2]/255;return new r(t*e.alpha*100,"%")},saturate:function(e,t,n){if(!e.rgb)return null;var r=e.toHSL();return r.s+=void 0!==n&&"relative"===n.value?r.s*t.value/100:t.value/100,r.s=b(r.s),c(r)},desaturate:function(e,t,n){var r=e.toHSL();return r.s-=void 0!==n&&"relative"===n.value?r.s*t.value/100:t.value/100,r.s=b(r.s),c(r)},lighten:function(e,t,n){var r=e.toHSL();return r.l+=void 0!==n&&"relative"===n.value?r.l*t.value/100:t.value/100,r.l=b(r.l),c(r)},darken:function(e,t,n){var r=e.toHSL();return r.l-=void 0!==n&&"relative"===n.value?r.l*t.value/100:t.value/100,r.l=b(r.l),c(r)},fadein:function(e,t,n){var r=e.toHSL();return r.a+=void 0!==n&&"relative"===n.value?r.a*t.value/100:t.value/100,r.a=b(r.a),c(r)},fadeout:function(e,t,n){var r=e.toHSL();return r.a-=void 0!==n&&"relative"===n.value?r.a*t.value/100:t.value/100,r.a=b(r.a),c(r)},fade:function(e,t){var n=e.toHSL();return n.a=t.value/100,n.a=b(n.a),c(n)},spin:function(e,t){var n=e.toHSL(),r=(n.h+t.value)%360;return n.h=0>r?360+r:r,c(n)},mix:function(e,t,n){e.toHSL&&t.toHSL||(console.log(t.type),console.dir(t)),n||(n=new r(50));var o=n.value/100,s=2*o-1,a=e.toHSL().a-t.toHSL().a,u=((s*a==-1?s:(s+a)/(1+s*a))+1)/2,l=1-u,c=[e.rgb[0]*u+t.rgb[0]*l,e.rgb[1]*u+t.rgb[1]*l,e.rgb[2]*u+t.rgb[2]*l],h=e.alpha*o+t.alpha*(1-o);return new i(c,h)},greyscale:function(e){return n.desaturate(e,new r(100))},contrast:function(e,t,r,i){if(!e.rgb)return null;if(void 0===r&&(r=n.rgba(255,255,255,1)),void 0===t&&(t=n.rgba(0,0,0,1)),t.luma()>r.luma()){var o=r;r=t,t=o}return i=void 0===i?.43:d(i),e.luma()<i?r:t},argb:function(e){return new s(e.toARGB())},color:function(e){if(e instanceof o&&/^#([a-f0-9]{6}|[a-f0-9]{3})$/i.test(e.value))return new i(e.value.slice(1));if(e instanceof i||(e=i.fromKeyword(e.value)))return e.value=void 0,e;throw{type:"Argument",message:"argument must be a color keyword or 3/6 digit hex e.g. #FFF"}},tint:function(e,t){return n.mix(n.rgb(255,255,255),e,t)},shade:function(e,t){return n.mix(n.rgb(0,0,0),e,t)}},a.addMultiple(n)},{"../tree/anonymous":45,"../tree/color":49,"../tree/dimension":55,"../tree/quoted":72,"./function-registry":21}],18:[function(e,t){t.exports=function(t){var n=e("../tree/quoted"),r=e("../tree/url"),i=e("./function-registry"),o=function(e,t){return new r(t,e.index,e.currentFileInfo).eval(e.context)},s=e("../logger");i.add("data-uri",function(e,i){i||(i=e,e=null);var a=e&&e.value,u=i.value,l=this.currentFileInfo,c=l.relativeUrls?l.currentDirectory:l.entryPath,h=u.indexOf("#"),f="";-1!==h&&(f=u.slice(h),u=u.slice(0,h));var p=t.getFileManager(u,c,this.context,t,!0);if(!p)return o(this,i);var d=!1;if(e)d=/;base64$/.test(a);else{if("image/svg+xml"===(a=t.mimeLookup(u)))d=!1;else{var v=t.charsetLookup(a);d=["US-ASCII","UTF-8"].indexOf(v)<0}d&&(a+=";base64")}var m=p.loadFileSync(u,c,this.context,t);if(!m.contents)return s.warn("Skipped data-uri embedding of "+u+" because file not found"),o(this,i||e);var g=m.contents;if(d&&!t.encodeBase64)return o(this,i);var y="data:"+a+","+(g=d?t.encodeBase64(g):encodeURIComponent(g))+f;return y.length>=32768&&!1!==this.context.ieCompat?(s.warn("Skipped data-uri embedding of "+u+" because its size ("+y.length+" characters) exceeds IE8-safe 32768 characters!"),o(this,i||e)):new r(new n('"'+y+'"',y,!1,this.index,this.currentFileInfo),this.index,this.currentFileInfo)})}},{"../logger":32,"../tree/quoted":72,"../tree/url":79,"./function-registry":21}],19:[function(e,t){var n=e("../tree/keyword"),r={eval:function(){var e=this.value_,t=this.error_;if(t)throw t;return null!=e?e?n.True:n.False:void 0},value:function(e){this.value_=e},error:function(e){this.error_=e},reset:function(){this.value_=this.error_=null}};e("./function-registry").add("default",r.eval.bind(r)),t.exports=r},{"../tree/keyword":64,"./function-registry":21}],20:[function(e,t){var n=e("../tree/expression"),r=function(e,t,n,r){this.name=e.toLowerCase(),this.index=n,this.context=t,this.currentFileInfo=r,this.func=t.frames[0].functionRegistry.get(this.name)};r.prototype.isValid=function(){return Boolean(this.func)},r.prototype.call=function(e){return Array.isArray(e)&&(e=e.filter(function(e){return"Comment"!==e.type}).map(function(e){if("Expression"===e.type){var t=e.value.filter(function(e){return"Comment"!==e.type});return 1===t.length?t[0]:new n(t)}return e})),this.func.apply(this,e)},t.exports=r},{"../tree/expression":58}],21:[function(e,t){t.exports=function c(e){return{_data:{},add:function(e,t){e=e.toLowerCase(),this._data.hasOwnProperty(e),this._data[e]=t},addMultiple:function(e){Object.keys(e).forEach(function(t){this.add(t,e[t])}.bind(this))},get:function(t){return this._data[t]||e&&e.get(t)},inherit:function(){return c(this)}}}(null)},{}],22:[function(e,t){t.exports=function(t){var n={functionRegistry:e("./function-registry"),functionCaller:e("./function-caller")};return e("./default"),e("./color"),e("./color-blending"),e("./data-uri")(t),e("./math"),e("./number"),e("./string"),e("./svg")(t),e("./types"),n}},{"./color":17,"./color-blending":16,"./data-uri":18,"./default":19,"./function-caller":20,"./function-registry":21,"./math":24,"./number":25,"./string":26,"./svg":27,"./types":28}],23:[function(e,t){var n=e("../tree/dimension"),r=function(){};r._math=function(e,t,r){if(!(r instanceof n))throw{type:"Argument",message:"argument must be a number"};return null==t?t=r.unit:r=r.unify(),new n(e(parseFloat(r.value)),t)},t.exports=r},{"../tree/dimension":55}],24:[function(e){var t=e("./function-registry"),n=e("./math-helper.js"),r={ceil:null,floor:null,sqrt:null,abs:null,tan:"",sin:"",cos:"",atan:"rad",asin:"rad",acos:"rad"};for(var i in r)r.hasOwnProperty(i)&&(r[i]=n._math.bind(null,Math[i],r[i]));r.round=function(e,t){var r=void 0===t?0:t.value;return n._math(function(e){return e.toFixed(r)},null,e)},t.addMultiple(r)},{"./function-registry":21,"./math-helper.js":23}],25:[function(e){var t=e("../tree/dimension"),n=e("../tree/anonymous"),r=e("./function-registry"),i=e("./math-helper.js"),o=function(e,r){switch((r=Array.prototype.slice.call(r)).length){case 0:throw{type:"Argument",message:"one or more arguments required"}}var i,o,s,a,u,l,c,h,f=[],p={};for(i=0;r.length>i;i++)if((s=r[i])instanceof t)if(c=""!==(l=""===(a=""===s.unit.toString()&&void 0!==h?new t(s.value,h).unify():s.unify()).unit.toString()&&void 0!==c?c:a.unit.toString())&&void 0===c||""!==l&&""===f[0].unify().unit.toString()?l:c,h=""!==l&&void 0===h?s.unit.toString():h,void 0!==(o=void 0!==p[""]&&""!==l&&l===c?p[""]:p[l]))u=""===f[o].unit.toString()&&void 0!==h?new t(f[o].value,h).unify():f[o].unify(),(e&&u.value>a.value||!e&&a.value>u.value)&&(f[o]=s);else{if(void 0!==c&&l!==c)throw{type:"Argument",message:"incompatible types"};p[l]=f.length,f.push(s)}else Array.isArray(r[i].value)&&Array.prototype.push.apply(r,Array.prototype.slice.call(r[i].value));return 1==f.length?f[0]:(r=f.map(function(e){return e.toCSS(this.context)}).join(this.context.compress?",":", "),new n((e?"min":"max")+"("+r+")"))};r.addMultiple({min:function(){return o(!0,arguments)},max:function(){return o(!1,arguments)},convert:function(e,t){return e.convertTo(t.value)},pi:function(){return new t(Math.PI)},mod:function(e,n){return new t(e.value%n.value,e.unit)},pow:function(e,n){if("number"==typeof e&&"number"==typeof n)e=new t(e),n=new t(n);else if(!(e instanceof t&&n instanceof t))throw{type:"Argument",message:"arguments must be numbers"};return new t(Math.pow(e.value,n.value),e.unit)},percentage:function(e){return i._math(function(e){return 100*e},"%",e)}})},{"../tree/anonymous":45,"../tree/dimension":55,"./function-registry":21,"./math-helper.js":23}],26:[function(e){var t=e("../tree/quoted"),n=e("../tree/anonymous"),r=e("../tree/javascript");e("./function-registry").addMultiple({e:function(e){return new n(e instanceof r?e.evaluated:e.value)},escape:function(e){return new n(encodeURI(e.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},replace:function(e,n,r,i){var o=e.value;return r="Quoted"===r.type?r.value:r.toCSS(),o=o.replace(new RegExp(n.value,i?i.value:""),r),new t(e.quote||"",o,e.escaped)},"%":function(e){for(var n=Array.prototype.slice.call(arguments,1),r=e.value,i=0;n.length>i;i++)r=r.replace(/%[sda]/i,function(e){var t="Quoted"===n[i].type&&e.match(/s/i)?n[i].value:n[i].toCSS();return e.match(/[A-Z]$/)?encodeURIComponent(t):t});return r=r.replace(/%%/g,"%"),new t(e.quote||"",r,e.escaped)}})},{"../tree/anonymous":45,"../tree/javascript":62,"../tree/quoted":72,"./function-registry":21}],27:[function(e,t){t.exports=function(){var t=e("../tree/dimension"),n=e("../tree/color"),r=e("../tree/expression"),i=e("../tree/quoted"),o=e("../tree/url");e("./function-registry").add("svg-gradient",function(e){function g(){throw{type:"Argument",message:"svg-gradient expects direction, start_color [start_position], [color position,]..., end_color [end_position] or direction, color list"}}var s,a,u,l,c,h,f,p,d="linear",v='x="0" y="0" width="1" height="1"',m={compress:!1},y=e.toCSS(m);switch(2==arguments.length?(arguments[1].value.length<2&&g(),s=arguments[1].value):arguments.length<3?g():s=Array.prototype.slice.call(arguments,1),y){case"to bottom":a='x1="0%" y1="0%" x2="0%" y2="100%"';break;case"to right":a='x1="0%" y1="0%" x2="100%" y2="0%"';break;case"to bottom right":a='x1="0%" y1="0%" x2="100%" y2="100%"';break;case"to top right":a='x1="0%" y1="100%" x2="100%" y2="0%"';break;case"ellipse":case"ellipse at center":d="radial",a='cx="50%" cy="50%" r="75%"',v='x="-50" y="-50" width="101" height="101"';break;default:throw{type:"Argument",message:"svg-gradient direction must be 'to bottom', 'to right', 'to bottom right', 'to top right' or 'ellipse at center'"}}for(u='<?xml version="1.0" ?><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><'+d+'Gradient id="gradient" gradientUnits="userSpaceOnUse" '+a+">",l=0;s.length>l;l+=1)s[l]instanceof r?(c=s[l].value[0],h=s[l].value[1]):(c=s[l],h=void 0),c instanceof n&&((0===l||l+1===s.length)&&void 0===h||h instanceof t)||g(),f=h?h.toCSS(m):0===l?"0%":"100%",p=c.alpha,u+='<stop offset="'+f+'" stop-color="'+c.toRGB()+'"'+(1>p?' stop-opacity="'+p+'"':"")+"/>";return u+="</"+d+"Gradient><rect "+v+' fill="url(#gradient)" /></svg>',u=encodeURIComponent(u),new o(new i("'"+(u="data:image/svg+xml,"+u)+"'",u,!1,this.index,this.currentFileInfo),this.index,this.currentFileInfo)})}},{"../tree/color":49,"../tree/dimension":55,"../tree/expression":58,"../tree/quoted":72,"../tree/url":79,"./function-registry":21}],28:[function(e){var t=e("../tree/keyword"),n=e("../tree/detached-ruleset"),r=e("../tree/dimension"),i=e("../tree/color"),o=e("../tree/quoted"),s=e("../tree/anonymous"),a=e("../tree/url"),u=e("../tree/operation"),l=e("./function-registry"),c=function(e,n){return e instanceof n?t.True:t.False},h=function(e,n){if(void 0===n)throw{type:"Argument",message:"missing the required second argument to isunit."};if("string"!=typeof(n="string"==typeof n.value?n.value:n))throw{type:"Argument",message:"Second argument to isunit should be a unit or a string."};return e instanceof r&&e.unit.is(n)?t.True:t.False},f=function(e){return Array.isArray(e.value)?e.value:Array(e)};l.addMultiple({isruleset:function(e){return c(e,n)},iscolor:function(e){return c(e,i)},isnumber:function(e){return c(e,r)},isstring:function(e){return c(e,o)},iskeyword:function(e){return c(e,t)},isurl:function(e){return c(e,a)},ispixel:function(e){return h(e,"px")},ispercentage:function(e){return h(e,"%")},isem:function(e){return h(e,"em")},isunit:h,unit:function(e,n){if(!(e instanceof r))throw{type:"Argument",message:"the first argument to unit must be a number"+(e instanceof u?". Have you forgotten parenthesis?":"")};return n=n?n instanceof t?n.value:n.toCSS():"",new r(e.value,n)},"get-unit":function(e){return new s(e.unit)},extract:function(e,t){return t=t.value-1,f(e)[t]},length:function(e){return new r(f(e).length)}})},{"../tree/anonymous":45,"../tree/color":49,"../tree/detached-ruleset":54,"../tree/dimension":55,"../tree/keyword":64,"../tree/operation":70,"../tree/quoted":72,"../tree/url":79,"./function-registry":21}],29:[function(e,t){var n=e("./contexts"),r=e("./parser/parser"),i=e("./plugins/function-importer");t.exports=function(e){var t=function(e,t){this.rootFilename=t.filename,this.paths=e.paths||[],this.contents={},this.contentsIgnoredChars={},this.mime=e.mime,this.error=null,this.context=e,this.queue=[],this.files={}};return t.prototype.push=function(t,o,s,a,u){var l=this;this.queue.push(t);var c=function(e,n,r){l.queue.splice(l.queue.indexOf(t),1);var i=r===l.rootFilename;a.optional&&e?u(null,{rules:[]},!1,null):(l.files[r]=n,e&&!l.error&&(l.error=e),u(e,n,i,r))},h={relativeUrls:this.context.relativeUrls,entryPath:s.entryPath,rootpath:s.rootpath,rootFilename:s.rootFilename},f=e.getFileManager(t,s.currentDirectory,this.context,e);if(f){o&&(t=f.tryAppendExtension(t,a.plugin?".js":".less"));var p=function(e){var t=e.filename,o=e.contents.replace(/^\uFEFF/,"");h.currentDirectory=f.getPath(t),h.relativeUrls&&(h.rootpath=f.join(l.context.rootpath||"",f.pathDiff(h.currentDirectory,h.entryPath)),!f.isPathAbsolute(h.rootpath)&&f.alwaysMakePathsAbsolute()&&(h.rootpath=f.join(h.entryPath,h.rootpath))),h.filename=t;var u=new n.Parse(l.context);u.processImports=!1,l.contents[t]=o,(s.reference||a.reference)&&(h.reference=!0),a.plugin?new i(u,h).eval(o,function(e,n){c(e,n,t)}):a.inline?c(null,o,t):new r(u,l,h).parse(o,function(e,n){c(e,n,t)})},d=f.loadFile(t,s.currentDirectory,this.context,e,function(e,t){e?c(e):p(t)});d&&d.then(p,c)}else c({message:"Could not find a file-manager for "+t})},t}},{"./contexts":10,"./parser/parser":37,"./plugins/function-importer":39}],30:[function(e,t){t.exports=function(t,n){var r,i,o,s,a;return{version:[2,5,3],data:e("./data"),tree:e("./tree"),Environment:a=e("./environment/environment"),AbstractFileManager:e("./environment/abstract-file-manager"),environment:t=new a(t,n),visitors:e("./visitors"),Parser:e("./parser/parser"),functions:e("./functions")(t),contexts:e("./contexts"),SourceMapOutput:r=e("./source-map-output")(t),SourceMapBuilder:i=e("./source-map-builder")(r,t),ParseTree:o=e("./parse-tree")(i),ImportManager:s=e("./import-manager")(t),render:e("./render")(t,o,s),parse:e("./parse")(t,o,s),LessError:e("./less-error"),transformTree:e("./transform-tree"),utils:e("./utils"),PluginManager:e("./plugin-manager"),logger:e("./logger")}}},{"./contexts":10,"./data":12,"./environment/abstract-file-manager":14,"./environment/environment":15,"./functions":22,"./import-manager":29,"./less-error":31,"./logger":32,"./parse":34,"./parse-tree":33,"./parser/parser":37,"./plugin-manager":38,"./render":40,"./source-map-builder":41,"./source-map-output":42,"./transform-tree":43,"./tree":61,"./utils":82,"./visitors":86}],31:[function(e,t){var n=e("./utils"),r=t.exports=function(e,t,r){Error.call(this);var i=e.filename||r;if(t&&i){var o=t.contents[i],s=n.getLocation(e.index,o),a=s.line,u=s.column,l=e.call&&n.getLocation(e.call,o).line,c=o.split("\n");this.type=e.type||"Syntax",this.filename=i,this.index=e.index,this.line="number"==typeof a?a+1:null,this.callLine=l+1,this.callExtract=c[l],this.column=u,this.extract=[c[a-1],c[a],c[a+1]]}this.message=e.message,this.stack=e.stack};if(void 0===Object.create){var i=function(){};i.prototype=Error.prototype,r.prototype=new i}else r.prototype=Object.create(Error.prototype);r.prototype.constructor=r},{"./utils":82}],32:[function(e,t){t.exports={error:function(e){this._fireEvent("error",e)},warn:function(e){this._fireEvent("warn",e)},info:function(e){this._fireEvent("info",e)},debug:function(e){this._fireEvent("debug",e)},addListener:function(e){this._listeners.push(e)},removeListener:function(e){for(var t=0;this._listeners.length>t;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)},_fireEvent:function(e,t){for(var n=0;this._listeners.length>n;n++){var r=this._listeners[n][e];r&&r(t)}},_listeners:[]}},{}],33:[function(e,t){var n=e("./less-error"),r=e("./transform-tree"),i=e("./logger");t.exports=function(e){var t=function(e,t){this.root=e,this.imports=t};return t.prototype.toCSS=function(t){var o,s,a={};try{o=r(this.root,t)}catch(e){throw new n(e,this.imports)}try{var u=Boolean(t.compress);u&&i.warn("The compress option has been deprecated. We recommend you use a dedicated css minifier, for instance see less-plugin-clean-css.");var l={compress:u,dumpLineNumbers:t.dumpLineNumbers,strictUnits:Boolean(t.strictUnits),numPrecision:8};t.sourceMap?(s=new e(t.sourceMap),a.css=s.toCSS(o,l,this.imports)):a.css=o.toCSS(l)}catch(e){throw new n(e,this.imports)}if(t.pluginManager)for(var c=t.pluginManager.getPostProcessors(),h=0;c.length>h;h++)a.css=c[h].process(a.css,{sourceMap:s,options:t,imports:this.imports});for(var f in t.sourceMap&&(a.map=s.getExternalSourceMap()),a.imports=[],this.imports.files)this.imports.files.hasOwnProperty(f)&&f!==this.imports.rootFilename&&a.imports.push(f);return a},t}},{"./less-error":31,"./logger":32,"./transform-tree":43}],34:[function(e,t){var n,r=e("./contexts"),i=e("./parser/parser"),o=e("./plugin-manager");t.exports=function(t,s,a){var u=function(t,s,l){if("function"==typeof(s=s||{})&&(l=s,s={}),!l){n||(n="undefined"==typeof Promise?e("promise"):Promise);var c=this;return new n(function(e,n){u.call(c,t,s,function(t,r){t?n(t):e(r)})})}var h,f,p=new o(this);if(p.addPlugins(s.plugins),s.pluginManager=p,h=new r.Parse(s),s.rootFileInfo)f=s.rootFileInfo;else{var d=s.filename||"input",v=d.replace(/[^\/\\]*$/,"");(f={filename:d,relativeUrls:h.relativeUrls,rootpath:h.rootpath||"",currentDirectory:v,entryPath:v,rootFilename:d}).rootpath&&"/"!==f.rootpath.slice(-1)&&(f.rootpath+="/")}var m=new a(h,f);new i(h,m,f).parse(t,function(e,t){return e?l(e):void l(null,t,m,s)},s)};return u}},{"./contexts":10,"./parser/parser":37,"./plugin-manager":38,promise:void 0}],35:[function(e,t){t.exports=function(e,t){function c(t){var n=s-m;512>n&&!t||!n||(v.push(e.slice(m,s+1)),m=s+1)}var n,r,i,o,s,a,u,l,h,f=e.length,p=0,d=0,v=[],m=0;for(s=0;f>s;s++)if(!((u=e.charCodeAt(s))>=97&&122>=u||34>u))switch(u){case 40:d++,r=s;continue;case 41:if(--d<0)return t("missing opening `(`",s);continue;case 59:d||c();continue;case 123:p++,n=s;continue;case 125:if(--p<0)return t("missing opening `{`",s);p||d||c();continue;case 92:if(f-1>s){s++;continue}return t("unescaped `\\`",s);case 34:case 39:case 96:for(h=0,a=s,s+=1;f>s;s++)if(!((l=e.charCodeAt(s))>96)){if(l==u){h=1;break}if(92==l){if(s==f-1)return t("unescaped `\\`",s);s++}}if(h)continue;return t("unmatched `"+String.fromCharCode(u)+"`",a);case 47:if(d||s==f-1)continue;if(47==(l=e.charCodeAt(s+1)))for(s+=2;f>s&&(!(13>=(l=e.charCodeAt(s)))||10!=l&&13!=l);s++);else if(42==l){for(i=a=s,s+=2;f-1>s&&(125==(l=e.charCodeAt(s))&&(o=s),42!=l||47!=e.charCodeAt(s+1));s++);if(s==f-1)return t("missing closing `*/`",a);s++}continue;case 42:if(f-1>s&&47==e.charCodeAt(s+1))return t("unmatched `/*`",s);continue}return 0!==p?t(i>n&&o>i?"missing closing `}` or `*/`":"missing closing `}`",n):0!==d?t("missing closing `)`",r):(c(!0),v)}},{}],36:[function(e,t){var n=e("./chunker");t.exports=function(){var e,t,r,i,o,s,a,u=[],l={save:function(){a=l.i,u.push({current:s,i:l.i,j:t})},restore:function(e){(l.i>r||l.i===r&&e&&!i)&&(r=l.i,i=e);var n=u.pop();s=n.current,a=l.i=n.i,t=n.j},forget:function(){u.pop()},isWhitespace:function(t){var n=l.i+(t||0),r=e.charCodeAt(n);return r===c||r===p||r===h||r===f},$re:function(e){l.i>a&&(s=s.slice(l.i-a),a=l.i);var t=e.exec(s);return t?(d(t[0].length),"string"==typeof t?t:1===t.length?t[0]:t):null},$char:function(t){return e.charAt(l.i)!==t?null:(d(1),t)},$str:function(t){for(var n=t.length,r=0;n>r;r++)if(e.charAt(l.i+r)!==t.charAt(r))return null;return d(n),t},$quoted:function(){var t=e.charAt(l.i);if("'"===t||'"'===t){for(var n=e.length,r=l.i,i=1;n>i+r;i++){switch(e.charAt(i+r)){case"\\":i++;continue;case"\r":case"\n":break;case t:var o=e.substr(r,i+1);return d(i+1),o}}return null}}},c=32,h=9,f=10,p=13;l.autoCommentAbsorb=!0,l.commentStore=[],l.finished=!1;var d=function(n){for(var r,i,u,v=l.i,m=t,g=l.i-a,y=l.i+s.length-g,w=l.i+=n,x=e;y>l.i;l.i++){if(r=x.charCodeAt(l.i),l.autoCommentAbsorb&&47===r){if("/"===(i=x.charAt(l.i+1))){u={index:l.i,isLineComment:!0};var b=x.indexOf("\n",l.i+2);0>b&&(b=y),l.i=b,u.text=x.substr(u.i,l.i-u.i),l.commentStore.push(u);continue}if("*"===i){var S=x.indexOf("*/",l.i+2);if(S>=0){u={index:l.i,text:x.substr(l.i,S+2-l.i),isLineComment:!1},l.i+=u.text.length-1,l.commentStore.push(u);continue}}break}if(r!==c&&r!==f&&r!==h&&r!==p)break}if(s=s.slice(n+l.i-w+g),a=l.i,!s.length){if(o.length-1>t)return s=o[++t],d(0),!0;l.finished=!0}return v!==l.i||m!==t};return l.peek=function(t){if("string"==typeof t){for(var n=0;t.length>n;n++)if(e.charAt(l.i+n)!==t.charAt(n))return!1;return!0}return t.test(s)},l.peekChar=function(t){return e.charAt(l.i)===t},l.currentChar=function(){return e.charAt(l.i)},l.getInput=function(){return e},l.peekNotNumeric=function(){var t=e.charCodeAt(l.i);return t>57||43>t||47===t||44===t},l.start=function(i,u,c){e=i,l.i=t=a=r=0,o=u?n(i,c):[i],s=o[0],d(0)},l.end=function(){var t,n=l.i>=e.length;return r>l.i&&(t=i,l.i=r),{isFinished:n,furthest:l.i,furthestPossibleErrorMessage:t,furthestReachedEnd:l.i>=e.length-1,furthestChar:e[l.i]}},l}},{"./chunker":35}],37:[function(e,t){var n=e("../less-error"),r=e("../tree"),o=e("../visitors"),s=e("./parser-input"),u=e("../utils"),c=function i(e,t,c){function j(e,t){var n="[object Function]"===Object.prototype.toString.call(e)?e.call(h):f.$re(e);return n||void l(t||("string"==typeof e?"expected '"+e+"' got '"+f.currentChar()+"'":"unexpected token"))}function k(e,t){return f.$char(e)?e:void l(t||"expected '"+e+"' got '"+f.currentChar()+"'")}function l(e,r){throw new n({index:f.i,filename:c.filename,type:r||"Syntax",message:e},t)}function m(e){var t=c.filename;return{lineNumber:u.getLocation(e,f.getInput()).line+1,fileName:t}}var h,f=s();return{parse:function(s,a,u){var l,h,p,d,v=null,m="";if(h=u&&u.globalVars?i.serializeVars(u.globalVars)+"\n":"",p=u&&u.modifyVars?"\n"+i.serializeVars(u.modifyVars):"",e.pluginManager)for(var g=e.pluginManager.getPreProcessors(),y=0;g.length>y;y++)s=g[y].process(s,{context:e,imports:t,fileInfo:c});(h||u&&u.banner)&&(m=(u&&u.banner?u.banner:"")+h,(d=t.contentsIgnoredChars)[c.filename]=d[c.filename]||0,d[c.filename]+=m.length),s=m+(s=s.replace(/\r\n?/g,"\n")).replace(/^\uFEFF/,"")+p,t.contents[c.filename]=s;try{f.start(s,e.chunkInput,function(e,r){throw new n({index:r,type:"Parse",message:e,filename:c.filename},t)}),(l=new r.Ruleset(null,this.parsers.primary())).root=!0,l.firstRoot=!0}catch(e){return a(new n(e,t,c.filename))}var w=f.end();if(!w.isFinished){var x=w.furthestPossibleErrorMessage;x||(x="Unrecognised input","}"===w.furthestChar?x+=". Possibly missing opening '{'":")"===w.furthestChar?x+=". Possibly missing opening '('":w.furthestReachedEnd&&(x+=". Possibly missing something")),v=new n({type:"Parse",message:x,index:w.furthest,filename:c.filename},t)}var b=function(e){return(e=v||e||t.error)?(e instanceof n||(e=new n(e,t,c.filename)),a(e)):a(null,l)};return!1===e.processImports?b():void new o.ImportVisitor(t,b).run(l)},parsers:h={primary:function(){for(var e,t=this.mixin,n=[];;){for(;e=this.comment();)n.push(e);if(f.finished)break;if(f.peek("}"))break;if(e=this.extendRule())n=n.concat(e);else if(e=t.definition()||this.rule()||this.ruleset()||t.call()||this.rulesetCall()||this.directive())n.push(e);else{for(var r=!1;f.$char(";");)r=!0;if(!r)break}}return n},comment:function(){if(f.commentStore.length){var e=f.commentStore.shift();return new r.Comment(e.text,e.isLineComment,e.index,c)}},entities:{quoted:function(){var e,t=f.i,n=!1;return f.save(),f.$char("~")&&(n=!0),(e=f.$quoted())?(f.forget(),new r.Quoted(e.charAt(0),e.substr(1,e.length-2),n,t,c)):void f.restore()},keyword:function(){var e=f.$char("%")||f.$re(/^[_A-Za-z-][_A-Za-z0-9-]*/);return e?r.Color.fromKeyword(e)||new r.Keyword(e):void 0},call:function(){var e,t,n,i=f.i;if(!f.peek(/^url\(/i))return f.save(),(e=f.$re(/^([\w-]+|%|progid:[\w\.]+)\(/))?"alpha"===(e=e[1]).toLowerCase()&&(n=h.alpha())?(f.forget(),n):(t=this.arguments(),f.$char(")")?(f.forget(),new r.Call(e,t,i,c)):void f.restore("Could not parse call arguments or missing ')'")):void f.forget()},arguments:function(){for(var e,t=[];(e=this.assignment()||h.expression())&&(t.push(e),f.$char(",")););return t},literal:function(){return this.dimension()||this.color()||this.quoted()||this.unicodeDescriptor()},assignment:function(){var e,t;return f.save(),(e=f.$re(/^\w+(?=\s?=)/i))&&f.$char("=")&&(t=h.entity())?(f.forget(),new r.Assignment(e,t)):void f.restore()},url:function(){var e,t=f.i;return f.autoCommentAbsorb=!1,f.$str("url(")?(e=this.quoted()||this.variable()||f.$re(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",f.autoCommentAbsorb=!0,k(")"),new r.URL(null!=e.value||e instanceof r.Variable?e:new r.Anonymous(e),t,c)):void(f.autoCommentAbsorb=!0)},variable:function(){var e,t=f.i;return"@"===f.currentChar()&&(e=f.$re(/^@@?[\w-]+/))?new r.Variable(e,t,c):void 0},variableCurly:function(){var e,t=f.i;return"@"===f.currentChar()&&(e=f.$re(/^@\{([\w-]+)\}/))?new r.Variable("@"+e[1],t,c):void 0},color:function(){var e;if("#"===f.currentChar()&&(e=f.$re(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/))){var t=e.input.match(/^#([\w]+).*/);return(t=t[1]).match(/^[A-Fa-f0-9]+$/)||l("Invalid HEX color code"),new r.Color(e[1],void 0,"#"+t)}},dimension:function(){if(!f.peekNotNumeric()){var e=f.$re(/^([+-]?\d*\.?\d+)(%|[a-z]+)?/i);return e?new r.Dimension(e[1],e[2]):void 0}},unicodeDescriptor:function(){var e;return(e=f.$re(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/))?new r.UnicodeDescriptor(e[0]):void 0},javascript:function(){var e,t=f.i;f.save();var n=f.$char("~");return f.$char("`")?(e=f.$re(/^[^`]*`/))?(f.forget(),new r.JavaScript(e.substr(0,e.length-1),Boolean(n),t,c)):void f.restore("invalid javascript definition"):void f.restore()}},variable:function(){var e;return"@"===f.currentChar()&&(e=f.$re(/^(@[\w-]+)\s*:/))?e[1]:void 0},rulesetCall:function(){var e;return"@"===f.currentChar()&&(e=f.$re(/^(@[\w-]+)\s*\(\s*\)\s*;/))?new r.RulesetCall(e[1]):void 0},extend:function(e){var t,n,i,o,s,a=f.i;if(f.$str(e?"&:extend(":":extend(")){do{for(i=null,t=null;!(i=f.$re(/^(all)(?=\s*(\)|,))/))&&(n=this.element());)t?t.push(n):t=[n];i=i&&i[1],t||l("Missing target selector for :extend()."),s=new r.Extend(new r.Selector(t),i,a),o?o.push(s):o=[s]}while(f.$char(","));return j(/^\)/),e&&j(/^;/),o}},extendRule:function(){return this.extend(!0)},mixin:{call:function(){var e,t,n,i,o,s,a=f.currentChar(),u=!1,l=f.i;if("."===a||"#"===a){for(f.save();e=f.i,i=f.$re(/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/);)n=new r.Element(o,i,e,c),t?t.push(n):t=[n],o=f.$char(">");return t&&(f.$char("(")&&(s=this.args(!0).args,k(")")),h.important()&&(u=!0),h.end())?(f.forget(),new r.mixin.Call(t,s,l,c,u)):void f.restore()}},args:function(e){var t,n,i,o,s,a,u,c=h.entities,p={args:null,variadic:!1},d=[],v=[],m=[];for(f.save();;){if(e)a=h.detachedRuleset()||h.expression();else{if(f.commentStore.length=0,f.$str("...")){p.variadic=!0,f.$char(";")&&!t&&(t=!0),(t?v:m).push({variadic:!0});break}a=c.variable()||c.literal()||c.keyword()}if(!a)break;o=null,a.throwAwayComments&&a.throwAwayComments(),s=a;var g=null;if(e?a.value&&1==a.value.length&&(g=a.value[0]):g=a,g&&g instanceof r.Variable)if(f.$char(":")){if(d.length>0&&(t&&l("Cannot mix ; and , as delimiter types"),n=!0),!(s=h.detachedRuleset()||h.expression())){if(!e)return f.restore(),p.args=[],p;l("could not understand value for named argument")}o=i=g.name}else if(f.$str("...")){if(!e){p.variadic=!0,f.$char(";")&&!t&&(t=!0),(t?v:m).push({name:a.name,variadic:!0});break}u=!0}else e||(i=o=g.name,s=null);s&&d.push(s),m.push({name:o,value:s,expand:u}),f.$char(",")||(f.$char(";")||t)&&(n&&l("Cannot mix ; and , as delimiter types"),t=!0,d.length>1&&(s=new r.Value(d)),v.push({name:i,value:s,expand:u}),i=null,d=[],n=!1)}return f.forget(),p.args=t?v:m,p},definition:function(){var e,t,n,i,o=[],s=!1;if(!("."!==f.currentChar()&&"#"!==f.currentChar()||f.peek(/^[^{]*\}/)))if(f.save(),t=f.$re(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/)){e=t[1];var a=this.args(!1);if(o=a.args,s=a.variadic,!f.$char(")"))return void f.restore("Missing closing ')'");if(f.commentStore.length=0,f.$str("when")&&(i=j(h.conditions,"expected condition")),n=h.block())return f.forget(),new r.mixin.Definition(e,o,n,i,s);f.restore()}else f.forget()}},entity:function(){var e=this.entities;return this.comment()||e.literal()||e.variable()||e.url()||e.call()||e.keyword()||e.javascript()},end:function(){return f.$char(";")||f.peek("}")},alpha:function(){var e;if(f.$re(/^opacity=/i))return(e=f.$re(/^\d+/))||(e=j(this.entities.variable,"Could not parse alpha")),k(")"),new r.Alpha(e)},element:function(){var e,t,n,i=f.i;return t=this.combinator(),(e=f.$re(/^(?:\d+\.\d+|\d+)%/)||f.$re(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||f.$char("*")||f.$char("&")||this.attribute()||f.$re(/^\([^&()@]+\)/)||f.$re(/^[\.#:](?=@)/)||this.entities.variableCurly())||(f.save(),f.$char("(")?(n=this.selector())&&f.$char(")")?(e=new r.Paren(n),f.forget()):f.restore("Missing closing ')'"):f.forget()),e?new r.Element(t,e,i,c):void 0},combinator:function(){var e=f.currentChar();if("/"===e){f.save();var t=f.$re(/^\/[a-z]+\//i);if(t)return f.forget(),new r.Combinator(t);f.restore()}if(">"===e||"+"===e||"~"===e||"|"===e||"^"===e){for(f.i++,"^"===e&&"^"===f.currentChar()&&(e="^^",f.i++);f.isWhitespace();)f.i++;return new r.Combinator(e)}return new r.Combinator(f.isWhitespace(-1)?" ":null)},lessSelector:function(){return this.selector(!0)},selector:function(e){for(var t,n,i,o,s,a,u,h=f.i;(e&&(n=this.extend())||e&&(a=f.$str("when"))||(o=this.element()))&&(a?u=j(this.conditions,"expected condition"):u?l("CSS guard can only be used at the end of selector"):n?s=s?s.concat(n):n:(s&&l("Extend can only be used at the end of selector"),i=f.currentChar(),t?t.push(o):t=[o],o=null),"{"!==i&&"}"!==i&&";"!==i&&","!==i&&")"!==i););return t?new r.Selector(t,s,u,h,c):void(s&&l("Extend must be used to extend a selector, it cannot be used on its own"))},attribute:function(){if(f.$char("[")){var e,t,n,i=this.entities;return(e=i.variableCurly())||(e=j(/^(?:[_A-Za-z0-9-\*]*\|)?(?:[_A-Za-z0-9-]|\\.)+/)),(n=f.$re(/^[|~*$^]?=/))&&(t=i.quoted()||f.$re(/^[0-9]+%/)||f.$re(/^[\w-]+/)||i.variableCurly()),k("]"),new r.Attribute(e,n,t)}},block:function(){var e;return f.$char("{")&&(e=this.primary())&&f.$char("}")?e:void 0},blockRuleset:function(){var e=this.block();return e&&(e=new r.Ruleset(null,e)),e},detachedRuleset:function(){var e=this.blockRuleset();return e?new r.DetachedRuleset(e):void 0},ruleset:function(){var t,n,i,o;for(f.save(),e.dumpLineNumbers&&(o=m(f.i));(n=this.lessSelector())&&(t?t.push(n):t=[n],f.commentStore.length=0,n.condition&&t.length>1&&l("Guards are only currently allowed on a single selector."),f.$char(","));)n.condition&&l("Guards are only currently allowed on a single selector."),f.commentStore.length=0;if(t&&(i=this.block())){f.forget();var s=new r.Ruleset(t,i,e.strictImports);return e.dumpLineNumbers&&(s.debugInfo=o),s}f.restore()},rule:function(t){var n,i,o,s,a,u=f.i,l=f.currentChar();if("."!==l&&"#"!==l&&"&"!==l&&":"!==l)if(f.save(),n=this.variable()||this.ruleProperty()){if((a="string"==typeof n)&&(i=this.detachedRuleset()),f.commentStore.length=0,!i){s=!a&&n.length>1&&n.pop().value;var h=!t&&(e.compress||a);if(h&&(i=this.value()),!i&&(i=this.anonymousValue()))return f.forget(),new r.Rule(n,i,!1,s,u,c);h||i||(i=this.value()),o=this.important()}if(i&&this.end())return f.forget(),new r.Rule(n,i,o,s,u,c);if(f.restore(),i&&!t)return this.rule(!0)}else f.forget()},anonymousValue:function(){var e=f.$re(/^([^@+\/'"*`(;{}-]*);/);return e?new r.Anonymous(e[1]):void 0},import:function(){var e,t,n=f.i,i=f.$re(/^@import?\s+/);if(i){var o=(i?this.importOptions():null)||{};if(e=this.entities.quoted()||this.entities.url())return t=this.mediaFeatures(),f.$char(";")||(f.i=n,l("missing semi-colon or unrecognised media features on import")),t=t&&new r.Value(t),new r.Import(e,t,o,n,c);f.i=n,l("malformed import statement")}},importOptions:function(){var e,t,n,r={};if(!f.$char("("))return null;do{if(e=this.importOption()){switch(n=!0,t=e){case"css":t="less",n=!1;break;case"once":t="multiple",n=!1}if(r[t]=n,!f.$char(","))break}}while(e);return k(")"),r},importOption:function(){var e=f.$re(/^(less|css|multiple|once|inline|reference|optional)/);return e?e[1]:void 0},mediaFeature:function(){var e,t,n=this.entities,i=[];f.save();do{if(e=n.keyword()||n.variable())i.push(e);else if(f.$char("(")){if(t=this.property(),e=this.value(),!f.$char(")"))return f.restore("Missing closing ')'"),null;if(t&&e)i.push(new r.Paren(new r.Rule(t,e,null,null,f.i,c,!0)));else{if(!e)return f.restore("badly formed media feature definition"),null;i.push(new r.Paren(e))}}}while(e);return f.forget(),i.length>0?new r.Expression(i):void 0},mediaFeatures:function(){var e,t=this.entities,n=[];do{if(e=this.mediaFeature()){if(n.push(e),!f.$char(","))break}else if((e=t.variable())&&(n.push(e),!f.$char(",")))break}while(e);return n.length>0?n:null},media:function(){var t,n,i,o;return e.dumpLineNumbers&&(o=m(f.i)),f.save(),f.$str("@media")?(t=this.mediaFeatures(),(n=this.block())?(f.forget(),i=new r.Media(n,t,f.i,c),e.dumpLineNumbers&&(i.debugInfo=o),i):void f.restore("media definitions require block statements after any features")):void f.restore()},plugin:function(){var e,t=f.i;if(f.$re(/^@plugin?\s+/)){if(e=this.entities.quoted()||this.entities.url())return f.$char(";")||(f.i=t,l("missing semi-colon on plugin")),new r.Import(e,null,{plugin:!0},t,c);f.i=t,l("malformed plugin statement")}},directive:function(){var t,n,i,o,s,a,u,h=f.i,p=!0,d=!0;if("@"===f.currentChar()){if(n=this.import()||this.plugin()||this.media())return n;if(f.save(),t=f.$re(/^@[a-z-]+/)){switch(o=t,"-"==t.charAt(1)&&t.indexOf("-",2)>0&&(o="@"+t.slice(t.indexOf("-",2)+1)),o){case"@counter-style":s=!0,p=!0;break;case"@charset":s=!0,p=!1;break;case"@namespace":a=!0,p=!1;break;case"@keyframes":s=!0;break;case"@host":case"@page":u=!0;break;case"@document":case"@supports":u=!0,d=!1}return f.commentStore.length=0,s?(n=this.entity())||l("expected "+t+" identifier"):a?(n=this.expression())||l("expected "+t+" expression"):u&&((n=(f.$re(/^[^{;]+/)||"").trim())&&(n=new r.Anonymous(n))),p&&(i=this.blockRuleset()),i||!p&&n&&f.$char(";")?(f.forget(),new r.Directive(t,n,i,h,c,e.dumpLineNumbers?m(h):null,!1,d)):void f.restore("directive options not recognised")}}},value:function(){var e,t=[];do{if((e=this.expression())&&(t.push(e),!f.$char(",")))break}while(e);return t.length>0?new r.Value(t):void 0},important:function(){return"!"===f.currentChar()?f.$re(/^! *important/):void 0},sub:function(){var e,t;return f.save(),f.$char("(")?(e=this.addition())&&f.$char(")")?(f.forget(),(t=new r.Expression([e])).parens=!0,t):void f.restore("Expected ')'"):void f.restore()},multiplication:function(){var e,t,n,i,o;if(e=this.operand()){for(o=f.isWhitespace(-1);!f.peek(/^\/[*\/]/);){if(f.save(),!(n=f.$char("/")||f.$char("*"))){f.forget();break}if(!(t=this.operand())){f.restore();break}f.forget(),e.parensInOp=!0,t.parensInOp=!0,i=new r.Operation(n,[i||e,t],o),o=f.isWhitespace(-1)}return i||e}},addition:function(){var e,t,n,i,o;if(e=this.multiplication()){for(o=f.isWhitespace(-1);(n=f.$re(/^[-+]\s+/)||!o&&(f.$char("+")||f.$char("-")))&&(t=this.multiplication());)e.parensInOp=!0,t.parensInOp=!0,i=new r.Operation(n,[i||e,t],o),o=f.isWhitespace(-1);return i||e}},conditions:function(){var e,t,n,i=f.i;if(e=this.condition()){for(;f.peek(/^,\s*(not\s*)?\(/)&&f.$char(",")&&(t=this.condition());)n=new r.Condition("or",n||e,t,i);return n||e}},condition:function(){var e,t,n,i,o=this.entities,s=f.i,a=!1;return f.$str("not")&&(a=!0),k("("),(e=this.addition()||o.keyword()||o.quoted())?(f.$char(">")?i=f.$char("=")?">=":">":f.$char("<")?i=f.$char("=")?"<=":"<":f.$char("=")&&(i=f.$char(">")?"=>":f.$char("<")?"=<":"="),i?(t=this.addition()||o.keyword()||o.quoted())?n=new r.Condition(i,e,t,s,a):l("expected expression"):n=new r.Condition("=",e,new r.Keyword("true"),s,a),k(")"),f.$str("and")?new r.Condition("and",n,this.condition()):n):void 0},operand:function(){var e,t=this.entities;f.peek(/^-[@\(]/)&&(e=f.$char("-"));var n=this.sub()||t.dimension()||t.color()||t.variable()||t.call();return e&&(n.parensInOp=!0,n=new r.Negative(n)),n},expression:function(){for(var e,t,n=[];(e=this.comment())?n.push(e):(e=this.addition()||this.entity())&&(n.push(e),f.peek(/^\/[\/*]/)||(t=f.$char("/"))&&n.push(new r.Anonymous(t))),e;);return n.length>0?new r.Expression(n):void 0},property:function(){var e=f.$re(/^(\*?-?[_a-zA-Z0-9-]+)\s*:/);return e?e[1]:void 0},ruleProperty:function(){function a(e){var t=f.i,r=f.$re(e);return r?(i.push(t),n.push(r[1])):void 0}var e,t,n=[],i=[];f.save();var o=f.$re(/^([_a-zA-Z0-9-]+)\s*:/);if(o)return n=[new r.Keyword(o[1])],f.forget(),n;for(a(/^(\*?)/);a(/^((?:[\w-]+)|(?:@\{[\w-]+\}))/););if(n.length>1&&a(/^((?:\+_|\+)?)\s*:/)){for(f.forget(),""===n[0]&&(n.shift(),i.shift()),t=0;n.length>t;t++)e=n[t],n[t]="@"!==e.charAt(0)?new r.Keyword(e):new r.Variable("@"+e.slice(2,-1),i[t],c);return n}f.restore()}}}};c.serializeVars=function(e){var t="";for(var n in e)if(Object.hasOwnProperty.call(e,n)){var r=e[n];t+=("@"===n[0]?"":"@")+n+": "+r+(";"===String(r).slice(-1)?"":";")}return t},t.exports=c},{"../less-error":31,"../tree":61,"../utils":82,"../visitors":86,"./parser-input":36}],38:[function(e,t){var n=function(e){this.less=e,this.visitors=[],this.preProcessors=[],this.postProcessors=[],this.installedPlugins=[],this.fileManagers=[]};n.prototype.addPlugins=function(e){if(e)for(var t=0;e.length>t;t++)this.addPlugin(e[t])},n.prototype.addPlugin=function(e){this.installedPlugins.push(e),e.install(this.less,this)},n.prototype.addVisitor=function(e){this.visitors.push(e)},n.prototype.addPreProcessor=function(e,t){var n;for(n=0;this.preProcessors.length>n&&!(this.preProcessors[n].priority>=t);n++);this.preProcessors.splice(n,0,{preProcessor:e,priority:t})},n.prototype.addPostProcessor=function(e,t){var n;for(n=0;this.postProcessors.length>n&&!(this.postProcessors[n].priority>=t);n++);this.postProcessors.splice(n,0,{postProcessor:e,priority:t})},n.prototype.addFileManager=function(e){this.fileManagers.push(e)},n.prototype.getPreProcessors=function(){for(var e=[],t=0;this.preProcessors.length>t;t++)e.push(this.preProcessors[t].preProcessor);return e},n.prototype.getPostProcessors=function(){for(var e=[],t=0;this.postProcessors.length>t;t++)e.push(this.postProcessors[t].postProcessor);return e},n.prototype.getVisitors=function(){return this.visitors},n.prototype.getFileManagers=function(){return this.fileManagers},t.exports=n},{}],39:[function(e,t){var n=e("../less-error"),r=e("../tree");(t.exports=function(e,t){this.fileInfo=t}).prototype.eval=function(e,t){var i,o={};i={add:function(e,t){o[e]=t},addMultiple:function(e){Object.keys(e).forEach(function(t){o[t]=e[t]})}};try{new Function("functions","tree","fileInfo",e)(i,r,this.fileInfo)}catch(e){t(new n({message:"Plugin evaluation error: '"+e.name+": "+e.message.replace(/["]/g,"'")+"'",filename:this.fileInfo.filename}),null)}t(null,{functions:o})}},{"../less-error":31,"../tree":61}],40:[function(e,t){var n;t.exports=function(t,r){var i=function(t,o,s){if("function"==typeof o&&(s=o,o={}),!s){n||(n="undefined"==typeof Promise?e("promise"):Promise);var a=this;return new n(function(e,n){i.call(a,t,o,function(t,r){t?n(t):e(r)})})}this.parse(t,o,function(e,t,n,i){if(e)return s(e);var o;try{o=new r(t,n).toCSS(i)}catch(e){return s(e)}s(null,o)})};return i}},{promise:void 0}],41:[function(e,t){t.exports=function(e,t){var n=function(e){this.options=e};return n.prototype.toCSS=function(t,n,r){var i=new e({contentsIgnoredCharsMap:r.contentsIgnoredChars,rootNode:t,contentsMap:r.contents,sourceMapFilename:this.options.sourceMapFilename,sourceMapURL:this.options.sourceMapURL,outputFilename:this.options.sourceMapOutputFilename,sourceMapBasepath:this.options.sourceMapBasepath,sourceMapRootpath:this.options.sourceMapRootpath,outputSourceFiles:this.options.outputSourceFiles,sourceMapGenerator:this.options.sourceMapGenerator,sourceMapFileInline:this.options.sourceMapFileInline}),o=i.toCSS(n);return this.sourceMap=i.sourceMap,this.sourceMapURL=i.sourceMapURL,this.options.sourceMapInputFilename&&(this.sourceMapInputFilename=i.normalizeFilename(this.options.sourceMapInputFilename)),o+this.getCSSAppendage()},n.prototype.getCSSAppendage=function(){var e=this.sourceMapURL;if(this.options.sourceMapFileInline){if(void 0===this.sourceMap)return"";e="data:application/json;base64,"+t.encodeBase64(this.sourceMap)}return e?"/*# sourceMappingURL="+e+" */":""},n.prototype.getExternalSourceMap=function(){return this.sourceMap},n.prototype.setExternalSourceMap=function(e){this.sourceMap=e},n.prototype.isInline=function(){return this.options.sourceMapFileInline},n.prototype.getSourceMapURL=function(){return this.sourceMapURL},n.prototype.getOutputFilename=function(){return this.options.sourceMapOutputFilename},n.prototype.getInputFilename=function(){return this.sourceMapInputFilename},n}},{}],42:[function(e,t){t.exports=function(e){var t=function(t){this._css=[],this._rootNode=t.rootNode,this._contentsMap=t.contentsMap,this._contentsIgnoredCharsMap=t.contentsIgnoredCharsMap,t.sourceMapFilename&&(this._sourceMapFilename=t.sourceMapFilename.replace(/\\/g,"/")),this._outputFilename=t.outputFilename,this.sourceMapURL=t.sourceMapURL,t.sourceMapBasepath&&(this._sourceMapBasepath=t.sourceMapBasepath.replace(/\\/g,"/")),t.sourceMapRootpath?(this._sourceMapRootpath=t.sourceMapRootpath.replace(/\\/g,"/"),"/"!==this._sourceMapRootpath.charAt(this._sourceMapRootpath.length-1)&&(this._sourceMapRootpath+="/")):this._sourceMapRootpath="",this._outputSourceFiles=t.outputSourceFiles,this._sourceMapGeneratorConstructor=e.getSourceMapGenerator(),this._lineNumber=0,this._column=0};return t.prototype.normalizeFilename=function(e){return e=e.replace(/\\/g,"/"),this._sourceMapBasepath&&0===e.indexOf(this._sourceMapBasepath)&&(("\\"===(e=e.substring(this._sourceMapBasepath.length)).charAt(0)||"/"===e.charAt(0))&&(e=e.substring(1))),(this._sourceMapRootpath||"")+e},t.prototype.add=function(e,t,n,r){if(e){var i,o,s,a,u;if(t){var l=this._contentsMap[t.filename];this._contentsIgnoredCharsMap[t.filename]&&(0>(n-=this._contentsIgnoredCharsMap[t.filename])&&(n=0),l=l.slice(this._contentsIgnoredCharsMap[t.filename])),a=(o=(l=l.substring(0,n)).split("\n"))[o.length-1]}if(s=(i=e.split("\n"))[i.length-1],t)if(r)for(u=0;i.length>u;u++)this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+u+1,column:0===u?this._column:0},original:{line:o.length+u,column:0===u?a.length:0},source:this.normalizeFilename(t.filename)});else this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+1,column:this._column},original:{line:o.length,column:a.length},source:this.normalizeFilename(t.filename)});1===i.length?this._column+=s.length:(this._lineNumber+=i.length-1,this._column=s.length),this._css.push(e)}},t.prototype.isEmpty=function(){return 0===this._css.length},t.prototype.toCSS=function(e){if(this._sourceMapGenerator=new this._sourceMapGeneratorConstructor({file:this._outputFilename,sourceRoot:null}),this._outputSourceFiles)for(var t in this._contentsMap)if(this._contentsMap.hasOwnProperty(t)){var n=this._contentsMap[t];this._contentsIgnoredCharsMap[t]&&(n=n.slice(this._contentsIgnoredCharsMap[t])),this._sourceMapGenerator.setSourceContent(this.normalizeFilename(t),n)}if(this._rootNode.genCSS(e,this),this._css.length>0){var r,i=JSON.stringify(this._sourceMapGenerator.toJSON());this.sourceMapURL?r=this.sourceMapURL:this._sourceMapFilename&&(r=this._sourceMapFilename),this.sourceMapURL=r,this.sourceMap=i}return this._css.join("")},t}},{}],43:[function(e,t){var n=e("./contexts"),r=e("./visitors"),i=e("./tree");t.exports=function(e,t){var o,s=(t=t||{}).variables,a=new n.Eval(t);"object"!=typeof s||Array.isArray(s)||(s=Object.keys(s).map(function(e){var t=s[e];return t instanceof i.Value||(t instanceof i.Expression||(t=new i.Expression([t])),t=new i.Value([t])),new i.Rule("@"+e,t,!1,null,0)}),a.frames=[new i.Ruleset(null,s)]);var u,l=[],c=[new r.JoinSelectorVisitor,new r.ExtendVisitor,new r.ToCSSVisitor({compress:Boolean(t.compress)})];if(t.pluginManager){var h=t.pluginManager.getVisitors();for(u=0;h.length>u;u++){var f=h[u];f.isPreEvalVisitor?l.push(f):f.isPreVisitor?c.splice(0,0,f):c.push(f)}}for(u=0;l.length>u;u++)l[u].run(e);for(o=e.eval(a),u=0;c.length>u;u++)c[u].run(o);return o}},{"./contexts":10,"./tree":61,"./visitors":86}],44:[function(e,t){var n=e("./node"),r=function(e){this.value=e};(r.prototype=new n).type="Alpha",r.prototype.accept=function(e){this.value=e.visit(this.value)},r.prototype.eval=function(e){return this.value.eval?new r(this.value.eval(e)):this},r.prototype.genCSS=function(e,t){t.add("alpha(opacity="),this.value.genCSS?this.value.genCSS(e,t):t.add(this.value),t.add(")")},t.exports=r},{"./node":69}],45:[function(e,t){var n=e("./node"),r=function(e,t,n,r,i,o){this.value=e,this.index=t,this.mapLines=r,this.currentFileInfo=n,this.rulesetLike=void 0!==i&&i,this.isReferenced=o||!1};(r.prototype=new n).type="Anonymous",r.prototype.eval=function(){return new r(this.value,this.index,this.currentFileInfo,this.mapLines,this.rulesetLike,this.isReferenced)},r.prototype.compare=function(e){return e.toCSS&&this.toCSS()===e.toCSS()?0:void 0},r.prototype.isRulesetLike=function(){return this.rulesetLike},r.prototype.genCSS=function(e,t){t.add(this.value,this.currentFileInfo,this.index,this.mapLines)},r.prototype.markReferenced=function(){this.isReferenced=!0},r.prototype.getIsReferenced=function(){return!this.currentFileInfo||!this.currentFileInfo.reference||this.isReferenced},t.exports=r},{"./node":69}],46:[function(e,t){var n=e("./node"),r=function(e,t){this.key=e,this.value=t};(r.prototype=new n).type="Assignment",r.prototype.accept=function(e){this.value=e.visit(this.value)},r.prototype.eval=function(e){return this.value.eval?new r(this.key,this.value.eval(e)):this},r.prototype.genCSS=function(e,t){t.add(this.key+"="),this.value.genCSS?this.value.genCSS(e,t):t.add(this.value)},t.exports=r},{"./node":69}],47:[function(e,t){var n=e("./node"),r=function(e,t,n){this.key=e,this.op=t,this.value=n};(r.prototype=new n).type="Attribute",r.prototype.eval=function(e){return new r(this.key.eval?this.key.eval(e):this.key,this.op,this.value&&this.value.eval?this.value.eval(e):this.value)},r.prototype.genCSS=function(e,t){t.add(this.toCSS(e))},r.prototype.toCSS=function(e){var t=this.key.toCSS?this.key.toCSS(e):this.key;return this.op&&(t+=this.op,t+=this.value.toCSS?this.value.toCSS(e):this.value),"["+t+"]"},t.exports=r},{"./node":69}],48:[function(e,t){var n=e("./node"),r=e("../functions/function-caller"),i=function(e,t,n,r){this.name=e,this.args=t,this.index=n,this.currentFileInfo=r};(i.prototype=new n).type="Call",i.prototype.accept=function(e){this.args&&(this.args=e.visitArray(this.args))},i.prototype.eval=function(e){var t,n=this.args.map(function(t){return t.eval(e)}),o=new r(this.name,e,this.index,this.currentFileInfo);if(o.isValid())try{if(null!=(t=o.call(n)))return t}catch(e){throw{type:e.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(e.message?": "+e.message:""),index:this.index,filename:this.currentFileInfo.filename}}return new i(this.name,n,this.index,this.currentFileInfo)},i.prototype.genCSS=function(e,t){t.add(this.name+"(",this.currentFileInfo,this.index);for(var n=0;this.args.length>n;n++)this.args[n].genCSS(e,t),this.args.length>n+1&&t.add(", ");t.add(")")},t.exports=i},{"../functions/function-caller":20,"./node":69}],49:[function(e,t){function c(e,t){return Math.min(Math.max(e,0),t)}function d(e){return"#"+e.map(function(e){return(16>(e=c(Math.round(e),255))?"0":"")+e.toString(16)}).join("")}var n=e("./node"),r=e("../data/colors"),i=function(e,t,n){this.rgb=Array.isArray(e)?e:6==e.length?e.match(/.{2}/g).map(function(e){return parseInt(e,16)}):e.split("").map(function(e){return parseInt(e+e,16)}),this.alpha="number"==typeof t?t:1,void 0!==n&&(this.value=n)};(i.prototype=new n).type="Color",i.prototype.luma=function(){var e=this.rgb[0]/255,t=this.rgb[1]/255,n=this.rgb[2]/255;return.2126*(e=.03928>=e?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t=.03928>=t?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n=.03928>=n?n/12.92:Math.pow((n+.055)/1.055,2.4))},i.prototype.genCSS=function(e,t){t.add(this.toCSS(e))},i.prototype.toCSS=function(e,t){var n,r,i=e&&e.compress&&!t;if(this.value)return this.value;if(1>(r=this.fround(e,this.alpha)))return"rgba("+this.rgb.map(function(e){return c(Math.round(e),255)}).concat(c(r,1)).join(","+(i?"":" "))+")";if(n=this.toRGB(),i){var o=n.split("");o[1]===o[2]&&o[3]===o[4]&&o[5]===o[6]&&(n="#"+o[1]+o[3]+o[5])}return n},i.prototype.operate=function(e,t,n){for(var r=[],o=this.alpha*(1-n.alpha)+n.alpha,s=0;3>s;s++)r[s]=this._operate(e,t,this.rgb[s],n.rgb[s]);return new i(r,o)},i.prototype.toRGB=function(){return d(this.rgb)},i.prototype.toHSL=function(){var e,t,n=this.rgb[0]/255,r=this.rgb[1]/255,i=this.rgb[2]/255,o=this.alpha,s=Math.max(n,r,i),a=Math.min(n,r,i),u=(s+a)/2,l=s-a;if(s===a)e=t=0;else{switch(t=u>.5?l/(2-s-a):l/(s+a),s){case n:e=(r-i)/l+(i>r?6:0);break;case r:e=(i-n)/l+2;break;case i:e=(n-r)/l+4}e/=6}return{h:360*e,s:t,l:u,a:o}},i.prototype.toHSV=function(){var e,t,n=this.rgb[0]/255,r=this.rgb[1]/255,i=this.rgb[2]/255,o=this.alpha,s=Math.max(n,r,i),a=Math.min(n,r,i),u=s,l=s-a;if(t=0===s?0:l/s,s===a)e=0;else{switch(s){case n:e=(r-i)/l+(i>r?6:0);break;case r:e=(i-n)/l+2;break;case i:e=(n-r)/l+4}e/=6}return{h:360*e,s:t,v:u,a:o}},i.prototype.toARGB=function(){return d([255*this.alpha].concat(this.rgb))},i.prototype.compare=function(e){return e.rgb&&e.rgb[0]===this.rgb[0]&&e.rgb[1]===this.rgb[1]&&e.rgb[2]===this.rgb[2]&&e.alpha===this.alpha?0:void 0},i.fromKeyword=function(e){var t,n=e.toLowerCase();return r.hasOwnProperty(n)?t=new i(r[n].slice(1)):"transparent"===n&&(t=new i([0,0,0],0)),t?(t.value=e,t):void 0},t.exports=i},{"../data/colors":11,"./node":69}],50:[function(e,t){var n=e("./node"),r=function(e){" "===e?(this.value=" ",this.emptyOrWhitespace=!0):(this.value=e?e.trim():"",this.emptyOrWhitespace=""===this.value)};(r.prototype=new n).type="Combinator";var i={"":!0," ":!0,"|":!0};r.prototype.genCSS=function(e,t){var n=e.compress||i[this.value]?"":" ";t.add(n+this.value+n)},t.exports=r},{"./node":69}],51:[function(e,t){var n=e("./node"),r=e("./debug-info"),i=function(e,t,n,r){this.value=e,this.isLineComment=t,this.currentFileInfo=r};(i.prototype=new n).type="Comment",i.prototype.genCSS=function(e,t){this.debugInfo&&t.add(r(e,this),this.currentFileInfo,this.index),t.add(this.value)},i.prototype.isSilent=function(e){var t=this.currentFileInfo&&this.currentFileInfo.reference&&!this.isReferenced,n=e.compress&&"!"!==this.value[2];return this.isLineComment||t||n},i.prototype.markReferenced=function(){this.isReferenced=!0},t.exports=i},{"./debug-info":53,"./node":69}],52:[function(e,t){var n=e("./node"),r=function(e,t,n,r,i){this.op=e.trim(),this.lvalue=t,this.rvalue=n,this.index=r,this.negate=i};(r.prototype=new n).type="Condition",r.prototype.accept=function(e){this.lvalue=e.visit(this.lvalue),this.rvalue=e.visit(this.rvalue)},r.prototype.eval=function(e){var t=function(e,t,r){switch(e){case"and":return t&&r;case"or":return t||r;default:switch(n.compare(t,r)){case-1:return"<"===e||"=<"===e||"<="===e;case 0:return"="===e||">="===e||"=<"===e||"<="===e;case 1:return">"===e||">="===e;default:return!1}}}(this.op,this.lvalue.eval(e),this.rvalue.eval(e));return this.negate?!t:t},t.exports=r},{"./node":69}],53:[function(e,t){var n=function(e,t,r){var i="";if(e.dumpLineNumbers&&!e.compress)switch(e.dumpLineNumbers){case"comments":i=n.asComment(t);break;case"mediaquery":i=n.asMediaQuery(t);break;case"all":i=n.asComment(t)+(r||"")+n.asMediaQuery(t)}return i};n.asComment=function(e){return"/* line "+e.debugInfo.lineNumber+", "+e.debugInfo.fileName+" */\n"},n.asMediaQuery=function(e){var t=e.debugInfo.fileName;return/^[a-z]+:\/\//i.test(t)||(t="file://"+t),"@media -sass-debug-info{filename{font-family:"+t.replace(/([.:\/\\])/g,function(e){return"\\"==e&&(e="/"),"\\"+e})+"}line{font-family:\\00003"+e.debugInfo.lineNumber+"}}\n"},t.exports=n},{}],54:[function(e,t){var n=e("./node"),r=e("../contexts"),i=function(e,t){this.ruleset=e,this.frames=t};(i.prototype=new n).type="DetachedRuleset",i.prototype.evalFirst=!0,i.prototype.accept=function(e){this.ruleset=e.visit(this.ruleset)},i.prototype.eval=function(e){var t=this.frames||e.frames.slice(0);return new i(this.ruleset,t)},i.prototype.callEval=function(e){return this.ruleset.eval(this.frames?new r.Eval(e,this.frames.concat(e.frames)):e)},t.exports=i},{"../contexts":10,"./node":69}],55:[function(e,t){var n=e("./node"),r=e("../data/unit-conversions"),i=e("./unit"),o=e("./color"),s=function(e,t){this.value=parseFloat(e),this.unit=t&&t instanceof i?t:new i(t?[t]:void 0)};(s.prototype=new n).type="Dimension",s.prototype.accept=function(e){this.unit=e.visit(this.unit)},s.prototype.eval=function(){return this},s.prototype.toColor=function(){return new o([this.value,this.value,this.value])},s.prototype.genCSS=function(e,t){if(e&&e.strictUnits&&!this.unit.isSingular())throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: "+this.unit.toString());var n=this.fround(e,this.value),r=String(n);if(0!==n&&1e-6>n&&n>-1e-6&&(r=n.toFixed(20).replace(/0+$/,"")),e&&e.compress){if(0===n&&this.unit.isLength())return void t.add(r);n>0&&1>n&&(r=r.substr(1))}t.add(r),this.unit.genCSS(e,t)},s.prototype.operate=function(e,t,n){var r=this._operate(e,t,this.value,n.value),i=this.unit.clone();if("+"===t||"-"===t)if(0===i.numerator.length&&0===i.denominator.length)i=n.unit.clone(),this.unit.backupUnit&&(i.backupUnit=this.unit.backupUnit);else if(0===n.unit.numerator.length&&0===i.denominator.length);else{if(n=n.convertTo(this.unit.usedUnits()),e.strictUnits&&n.unit.toString()!==i.toString())throw new Error("Incompatible units. Change the units or use the unit function. Bad units: '"+i.toString()+"' and '"+n.unit.toString()+"'.");r=this._operate(e,t,this.value,n.value)}else"*"===t?(i.numerator=i.numerator.concat(n.unit.numerator).sort(),i.denominator=i.denominator.concat(n.unit.denominator).sort(),i.cancel()):"/"===t&&(i.numerator=i.numerator.concat(n.unit.denominator).sort(),i.denominator=i.denominator.concat(n.unit.numerator).sort(),i.cancel());return new s(r,i)},s.prototype.compare=function(e){var t,r;if(e instanceof s){if(this.unit.isEmpty()||e.unit.isEmpty())t=this,r=e;else if(t=this.unify(),r=e.unify(),0!==t.unit.compare(r.unit))return;return n.numericCompare(t.value,r.value)}},s.prototype.unify=function(){return this.convertTo({length:"px",duration:"s",angle:"rad"})},s.prototype.convertTo=function(e){var t,n,i,o,a,u=this.value,l=this.unit.clone(),c={};if("string"==typeof e){for(t in r)r[t].hasOwnProperty(e)&&((c={})[t]=e);e=c}for(n in a=function(e,t){return i.hasOwnProperty(e)?(t?u/=i[e]/i[o]:u*=i[e]/i[o],o):e},e)e.hasOwnProperty(n)&&(o=e[n],i=r[n],l.map(a));return l.cancel(),new s(u,l)},t.exports=s},{"../data/unit-conversions":13,"./color":49,"./node":69,"./unit":78}],56:[function(e,t){var n=e("./node"),r=e("./selector"),i=e("./ruleset"),o=function(e,t,n,i,o,s,a,u){var l;if(this.name=e,this.value=t,n)for(Array.isArray(n)?this.rules=n:(this.rules=[n],this.rules[0].selectors=new r([],null,null,this.index,o).createEmptySelectors()),l=0;this.rules.length>l;l++)this.rules[l].allowImports=!0;this.index=i,this.currentFileInfo=o,this.debugInfo=s,this.isReferenced=a,this.isRooted=u||!1};(o.prototype=new n).type="Directive",o.prototype.accept=function(e){var t=this.value,n=this.rules;n&&(this.rules=e.visitArray(n)),t&&(this.value=e.visit(t))},o.prototype.isRulesetLike=function(){return this.rules||!this.isCharset()},o.prototype.isCharset=function(){return"@charset"===this.name},o.prototype.genCSS=function(e,t){var n=this.value,r=this.rules;t.add(this.name,this.currentFileInfo,this.index),n&&(t.add(" "),n.genCSS(e,t)),r?this.outputRuleset(e,t,r):t.add(";")},o.prototype.eval=function(e){var t,n,r=this.value,i=this.rules;return t=e.mediaPath,n=e.mediaBlocks,e.mediaPath=[],e.mediaBlocks=[],r&&(r=r.eval(e)),i&&((i=[i[0].eval(e)])[0].root=!0),e.mediaPath=t,e.mediaBlocks=n,new o(this.name,r,i,this.index,this.currentFileInfo,this.debugInfo,this.isReferenced,this.isRooted)},o.prototype.variable=function(e){return this.rules?i.prototype.variable.call(this.rules[0],e):void 0},o.prototype.find=function(){return this.rules?i.prototype.find.apply(this.rules[0],arguments):void 0},o.prototype.rulesets=function(){return this.rules?i.prototype.rulesets.apply(this.rules[0]):void 0},o.prototype.markReferenced=function(){var e,t;if(this.isReferenced=!0,this.rules)for(t=this.rules,e=0;t.length>e;e++)t[e].markReferenced&&t[e].markReferenced()},o.prototype.getIsReferenced=function(){return!this.currentFileInfo||!this.currentFileInfo.reference||this.isReferenced},o.prototype.outputRuleset=function(e,t,n){var r,i=n.length;if(e.tabLevel=1+(0|e.tabLevel),e.compress){for(t.add("{"),r=0;i>r;r++)n[r].genCSS(e,t);return t.add("}"),void e.tabLevel--}var o="\n"+Array(e.tabLevel).join("  "),s=o+"  ";if(i){for(t.add(" {"+s),n[0].genCSS(e,t),r=1;i>r;r++)t.add(s),n[r].genCSS(e,t);t.add(o+"}")}else t.add(" {"+o+"}");e.tabLevel--},t.exports=o},{"./node":69,"./ruleset":75,"./selector":76}],57:[function(e,t){var n=e("./node"),r=e("./paren"),i=e("./combinator"),o=function(e,t,n,r){this.combinator=e instanceof i?e:new i(e),this.value="string"==typeof t?t.trim():t||"",this.index=n,this.currentFileInfo=r};(o.prototype=new n).type="Element",o.prototype.accept=function(e){var t=this.value;this.combinator=e.visit(this.combinator),"object"==typeof t&&(this.value=e.visit(t))},o.prototype.eval=function(e){return new o(this.combinator,this.value.eval?this.value.eval(e):this.value,this.index,this.currentFileInfo)},o.prototype.genCSS=function(e,t){t.add(this.toCSS(e),this.currentFileInfo,this.index)},o.prototype.toCSS=function(e){e=e||{};var t=this.value,n=e.firstSelector;return t instanceof r&&(e.firstSelector=!0),t=t.toCSS?t.toCSS(e):t,e.firstSelector=n,""===t&&"&"===this.combinator.value.charAt(0)?"":this.combinator.toCSS(e)+t},t.exports=o},{"./combinator":50,"./node":69,"./paren":71}],58:[function(e,t){var n=e("./node"),r=e("./paren"),i=e("./comment"),o=function(e){if(this.value=e,!e)throw new Error("Expression requires an array parameter")};(o.prototype=new n).type="Expression",o.prototype.accept=function(e){this.value=e.visitArray(this.value)},o.prototype.eval=function(e){var t,n=this.parens&&!this.parensInOp,i=!1;return n&&e.inParenthesis(),this.value.length>1?t=new o(this.value.map(function(t){return t.eval(e)})):1===this.value.length?(this.value[0].parens&&!this.value[0].parensInOp&&(i=!0),t=this.value[0].eval(e)):t=this,n&&e.outOfParenthesis(),this.parens&&this.parensInOp&&!e.isMathOn()&&!i&&(t=new r(t)),t},o.prototype.genCSS=function(e,t){for(var n=0;this.value.length>n;n++)this.value[n].genCSS(e,t),this.value.length>n+1&&t.add(" ")},o.prototype.throwAwayComments=function(){this.value=this.value.filter(function(e){return!(e instanceof i)})},o.prototype.markReferenced=function(){this.value.forEach(function(e){e.markReferenced&&e.markReferenced()})},t.exports=o},{"./comment":51,"./node":69,"./paren":71}],59:[function(e,t){var n=e("./node"),r=function e(t,n,r){switch(this.selector=t,this.option=n,this.index=r,this.object_id=e.next_id++,this.parent_ids=[this.object_id],n){case"all":this.allowBefore=!0,this.allowAfter=!0;break;default:this.allowBefore=!1,this.allowAfter=!1}};r.next_id=0,(r.prototype=new n).type="Extend",r.prototype.accept=function(e){this.selector=e.visit(this.selector)},r.prototype.eval=function(e){return new r(this.selector.eval(e),this.option,this.index)},r.prototype.clone=function(){return new r(this.selector,this.option,this.index)},r.prototype.findSelfSelectors=function(e){var t,n,r=[];for(t=0;e.length>t;t++)n=e[t].elements,t>0&&n.length&&""===n[0].combinator.value&&(n[0].combinator.value=" "),r=r.concat(e[t].elements);this.selfSelectors=[{elements:r}]},t.exports=r},{"./node":69}],60:[function(e,t){var n=e("./node"),r=e("./media"),i=e("./url"),o=e("./quoted"),s=e("./ruleset"),a=e("./anonymous"),u=function(e,t,n,r,i){if(this.options=n,this.index=r,this.path=e,this.features=t,this.currentFileInfo=i,void 0!==this.options.less||this.options.inline)this.css=!this.options.less||this.options.inline;else{var o=this.getPath();o&&/[#\.\&\?\/]css([\?;].*)?$/.test(o)&&(this.css=!0)}};(u.prototype=new n).type="Import",u.prototype.accept=function(e){this.features&&(this.features=e.visit(this.features)),this.path=e.visit(this.path),this.options.plugin||this.options.inline||!this.root||(this.root=e.visit(this.root))},u.prototype.genCSS=function(e,t){this.css&&void 0===this.path.currentFileInfo.reference&&(t.add("@import ",this.currentFileInfo,this.index),this.path.genCSS(e,t),this.features&&(t.add(" "),this.features.genCSS(e,t)),t.add(";"))},u.prototype.getPath=function(){return this.path instanceof i?this.path.value.value:this.path.value},u.prototype.isVariableImport=function(){var e=this.path;return e instanceof i&&(e=e.value),!(e instanceof o)||e.containsVariables()},u.prototype.evalForImport=function(e){var t=this.path;return t instanceof i&&(t=t.value),new u(t.eval(e),this.features,this.options,this.index,this.currentFileInfo)},u.prototype.evalPath=function(e){var t=this.path.eval(e),n=this.currentFileInfo&&this.currentFileInfo.rootpath;if(!(t instanceof i)){if(n){var r=t.value;r&&e.isPathRelative(r)&&(t.value=n+r)}t.value=e.normalizePath(t.value)}return t},u.prototype.eval=function(e){var t,n,i=this.features&&this.features.eval(e);if(this.options.plugin)return(n=e.frames[0]&&e.frames[0].functionRegistry)&&this.root&&this.root.functions&&n.addMultiple(this.root.functions),[];if(this.skip&&("function"==typeof this.skip&&(this.skip=this.skip()),this.skip))return[];if(this.options.inline){var o=new a(this.root,0,{filename:this.importedFilename,reference:this.path.currentFileInfo&&this.path.currentFileInfo.reference},!0,!0,!1);return this.features?new r([o],this.features.value):[o]}if(this.css){var l=new u(this.evalPath(e),i,this.options,this.index);if(!l.css&&this.error)throw this.error;return l}return(t=new s(null,this.root.rules.slice(0))).evalImports(e),this.features?new r(t.rules,this.features.value):t.rules},t.exports=u},{"./anonymous":45,"./media":65,"./node":69,"./quoted":72,"./ruleset":75,"./url":79}],61:[function(e,t){var n={};n.Node=e("./node"),n.Alpha=e("./alpha"),n.Color=e("./color"),n.Directive=e("./directive"),n.DetachedRuleset=e("./detached-ruleset"),n.Operation=e("./operation"),n.Dimension=e("./dimension"),n.Unit=e("./unit"),n.Keyword=e("./keyword"),n.Variable=e("./variable"),n.Ruleset=e("./ruleset"),n.Element=e("./element"),n.Attribute=e("./attribute"),n.Combinator=e("./combinator"),n.Selector=e("./selector"),n.Quoted=e("./quoted"),n.Expression=e("./expression"),n.Rule=e("./rule"),n.Call=e("./call"),n.URL=e("./url"),n.Import=e("./import"),n.mixin={Call:e("./mixin-call"),Definition:e("./mixin-definition")},n.Comment=e("./comment"),n.Anonymous=e("./anonymous"),n.Value=e("./value"),n.JavaScript=e("./javascript"),n.Assignment=e("./assignment"),n.Condition=e("./condition"),n.Paren=e("./paren"),n.Media=e("./media"),n.UnicodeDescriptor=e("./unicode-descriptor"),n.Negative=e("./negative"),n.Extend=e("./extend"),n.RulesetCall=e("./ruleset-call"),t.exports=n},{"./alpha":44,"./anonymous":45,"./assignment":46,"./attribute":47,"./call":48,"./color":49,"./combinator":50,"./comment":51,"./condition":52,"./detached-ruleset":54,"./dimension":55,"./directive":56,"./element":57,"./expression":58,"./extend":59,"./import":60,"./javascript":62,"./keyword":64,"./media":65,"./mixin-call":66,"./mixin-definition":67,"./negative":68,"./node":69,"./operation":70,"./paren":71,"./quoted":72,"./rule":73,"./ruleset":75,"./ruleset-call":74,"./selector":76,"./unicode-descriptor":77,"./unit":78,"./url":79,"./value":80,"./variable":81}],62:[function(e,t){var n=e("./js-eval-node"),r=e("./dimension"),i=e("./quoted"),o=e("./anonymous"),s=function(e,t,n,r){this.escaped=t,this.expression=e,this.index=n,this.currentFileInfo=r};(s.prototype=new n).type="JavaScript",s.prototype.eval=function(e){var t=this.evaluateJavaScript(this.expression,e);return"number"==typeof t?new r(t):"string"==typeof t?new i('"'+t+'"',t,this.escaped,this.index):new o(Array.isArray(t)?t.join(", "):t)},t.exports=s},{"./anonymous":45,"./dimension":55,"./js-eval-node":63,"./quoted":72}],63:[function(e,t){var n=e("./node"),r=e("./variable"),i=function(){};(i.prototype=new n).evaluateJavaScript=function(e,t){var n,i=this,o={};if(void 0!==t.javascriptEnabled&&!t.javascriptEnabled)throw{message:"You are using JavaScript, which has been disabled.",filename:this.currentFileInfo.filename,index:this.index};e=e.replace(/@\{([\w-]+)\}/g,function(e,n){return i.jsify(new r("@"+n,i.index,i.currentFileInfo).eval(t))});try{e=new Function("return ("+e+")")}catch(t){throw{message:"JavaScript evaluation error: "+t.message+" from `"+e+"`",filename:this.currentFileInfo.filename,index:this.index}}var s=t.frames[0].variables();for(var a in s)s.hasOwnProperty(a)&&(o[a.slice(1)]={value:s[a].value,toJS:function(){return this.value.eval(t).toCSS()}});try{n=e.call(o)}catch(e){throw{message:"JavaScript evaluation error: '"+e.name+": "+e.message.replace(/["]/g,"'")+"'",filename:this.currentFileInfo.filename,index:this.index}}return n},i.prototype.jsify=function(e){return Array.isArray(e.value)&&e.value.length>1?"["+e.value.map(function(e){return e.toCSS()}).join(", ")+"]":e.toCSS()},t.exports=i},{"./node":69,"./variable":81}],64:[function(e,t){var n=e("./node"),r=function(e){this.value=e};(r.prototype=new n).type="Keyword",r.prototype.genCSS=function(e,t){if("%"===this.value)throw{type:"Syntax",message:"Invalid % without number"};t.add(this.value)},r.True=new r("true"),r.False=new r("false"),t.exports=r},{"./node":69}],65:[function(e,t){var n=e("./ruleset"),r=e("./value"),i=e("./selector"),o=e("./anonymous"),s=e("./expression"),a=e("./directive"),u=function(e,t,o,s){this.index=o,this.currentFileInfo=s;var a=new i([],null,null,this.index,this.currentFileInfo).createEmptySelectors();this.features=new r(t),this.rules=[new n(a,e)],this.rules[0].allowImports=!0};(u.prototype=new a).type="Media",u.prototype.isRulesetLike=!0,u.prototype.accept=function(e){this.features&&(this.features=e.visit(this.features)),this.rules&&(this.rules=e.visitArray(this.rules))},u.prototype.genCSS=function(e,t){t.add("@media ",this.currentFileInfo,this.index),this.features.genCSS(e,t),this.outputRuleset(e,t,this.rules)},u.prototype.eval=function(e){e.mediaBlocks||(e.mediaBlocks=[],e.mediaPath=[]);var t=new u(null,[],this.index,this.currentFileInfo);this.debugInfo&&(this.rules[0].debugInfo=this.debugInfo,t.debugInfo=this.debugInfo);var n=!1;e.strictMath||(n=!0,e.strictMath=!0);try{t.features=this.features.eval(e)}finally{n&&(e.strictMath=!1)}return e.mediaPath.push(t),e.mediaBlocks.push(t),this.rules[0].functionRegistry=e.frames[0].functionRegistry.inherit(),e.frames.unshift(this.rules[0]),t.rules=[this.rules[0].eval(e)],e.frames.shift(),e.mediaPath.pop(),0===e.mediaPath.length?t.evalTop(e):t.evalNested(e)},u.prototype.evalTop=function(e){var t=this;if(e.mediaBlocks.length>1){var r=new i([],null,null,this.index,this.currentFileInfo).createEmptySelectors();(t=new n(r,e.mediaBlocks)).multiMedia=!0}return delete e.mediaBlocks,delete e.mediaPath,t},u.prototype.evalNested=function(e){var t,i,a=e.mediaPath.concat([this]);for(t=0;a.length>t;t++)i=a[t].features instanceof r?a[t].features.value:a[t].features,a[t]=Array.isArray(i)?i:[i];return this.features=new r(this.permute(a).map(function(e){for(e=e.map(function(e){return e.toCSS?e:new o(e)}),t=e.length-1;t>0;t--)e.splice(t,0,new o("and"));return new s(e)})),new n([],[])},u.prototype.permute=function(e){if(0===e.length)return[];if(1===e.length)return e[0];for(var t=[],n=this.permute(e.slice(1)),r=0;n.length>r;r++)for(var i=0;e[0].length>i;i++)t.push([e[0][i]].concat(n[r]));return t},u.prototype.bubbleSelectors=function(e){e&&(this.rules=[new n(e.slice(0),[this.rules[0]])])},t.exports=u},{"./anonymous":45,"./directive":56,"./expression":58,"./ruleset":75,"./selector":76,"./value":80}],66:[function(e,t){var n=e("./node"),r=e("./selector"),i=e("./mixin-definition"),o=e("../functions/default"),s=function(e,t,n,i,o){this.selector=new r(e),this.arguments=t||[],this.index=n,this.currentFileInfo=i,this.important=o};(s.prototype=new n).type="MixinCall",s.prototype.accept=function(e){this.selector&&(this.selector=e.visit(this.selector)),this.arguments.length&&(this.arguments=e.visitArray(this.arguments))},s.prototype.eval=function(e){function b(t,n){var r,i,s;for(r=0;2>r;r++){for(k[r]=!0,o.value(r),i=0;n.length>i&&k[r];i++)(s=n[i]).matchCondition&&(k[r]=k[r]&&s.matchCondition(null,e));t.matchCondition&&(k[r]=k[r]&&t.matchCondition(w,e))}return k[0]||k[1]?k[0]!=k[1]?k[1]?R:F:M:I}var t,n,r,s,a,u,l,c,h,f,p,d,v,m,g,y,w=[],x=[],S=!1,C=[],k=[],I=-1,M=0,R=1,F=2;for(l=0;this.arguments.length>l;l++)if(a=(s=this.arguments[l]).value.eval(e),s.expand&&Array.isArray(a.value))for(a=a.value,c=0;a.length>c;c++)w.push({value:a[c]});else w.push({name:s.name,value:a});for(y=function(t){return t.matchArgs(null,e)},l=0;e.frames.length>l;l++)if((t=e.frames[l].find(this.selector,null,y)).length>0){for(p=!0,c=0;t.length>c;c++){for(n=t[c].rule,r=t[c].path,f=!1,h=0;e.frames.length>h;h++)if(!(n instanceof i)&&n===(e.frames[h].originalRuleset||e.frames[h])){f=!0;break}f||n.matchArgs(w,e)&&((d={mixin:n,group:b(n,r)}).group!==I&&C.push(d),S=!0)}for(o.reset(),m=[0,0,0],c=0;C.length>c;c++)m[C[c].group]++;if(m[M]>0)v=F;else if(v=R,m[R]+m[F]>1)throw{type:"Runtime",message:"Ambiguous use of `default()` found when matching for `"+this.format(w)+"`",index:this.index,filename:this.currentFileInfo.filename};for(c=0;C.length>c;c++)if((d=C[c].group)===M||d===v)try{(n=C[c].mixin)instanceof i||(g=n.originalRuleset||n,(n=new i("",[],n.rules,null,!1)).originalRuleset=g),Array.prototype.push.apply(x,n.evalCall(e,w,this.important).rules)}catch(e){throw{message:e.message,index:this.index,filename:this.currentFileInfo.filename,stack:e.stack}}if(S){if(!this.currentFileInfo||!this.currentFileInfo.reference)for(l=0;x.length>l;l++)(u=x[l]).markReferenced&&u.markReferenced();return x}}throw p?{type:"Runtime",message:"No matching definition was found for `"+this.format(w)+"`",index:this.index,filename:this.currentFileInfo.filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.currentFileInfo.filename}},s.prototype.format=function(e){return this.selector.toCSS().trim()+"("+(e?e.map(function(e){var t="";return e.name&&(t+=e.name+":"),t+(e.value.toCSS?e.value.toCSS():"???")}).join(", "):"")+")"},t.exports=s},{"../functions/default":19,"./mixin-definition":67,"./node":69,"./selector":76}],67:[function(e,t){var n=e("./selector"),r=e("./element"),i=e("./ruleset"),o=e("./rule"),s=e("./expression"),a=e("../contexts"),u=function(e,t,i,o,s,a){this.name=e,this.selectors=[new n([new r(null,e,this.index,this.currentFileInfo)])],this.params=t,this.condition=o,this.variadic=s,this.arity=t.length,this.rules=i,this._lookups={};var u=[];this.required=t.reduce(function(e,t){return!t.name||t.name&&!t.value?e+1:(u.push(t.name),e)},0),this.optionalParameters=u,this.frames=a};(u.prototype=new i).type="MixinDefinition",u.prototype.evalFirst=!0,u.prototype.accept=function(e){this.params&&this.params.length&&(this.params=e.visitArray(this.params)),this.rules=e.visitArray(this.rules),this.condition&&(this.condition=e.visit(this.condition))},u.prototype.evalParams=function(e,t,n,r){var u,l,c,h,f,p,d,v,m=new i(null,null),g=this.params.slice(0),y=0;if(t.frames&&t.frames[0]&&t.frames[0].functionRegistry&&(m.functionRegistry=t.frames[0].functionRegistry.inherit()),t=new a.Eval(t,[m].concat(t.frames)),n)for(y=(n=n.slice(0)).length,c=0;y>c;c++)if(p=(l=n[c])&&l.name){for(d=!1,h=0;g.length>h;h++)if(!r[h]&&p===g[h].name){r[h]=l.value.eval(e),m.prependRule(new o(p,l.value.eval(e))),d=!0;break}if(d){n.splice(c,1),c--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+n[c].name+" not found"}}for(v=0,c=0;g.length>c;c++)if(!r[c]){if(l=n&&n[v],p=g[c].name)if(g[c].variadic){for(u=[],h=v;y>h;h++)u.push(n[h].value.eval(e));m.prependRule(new o(p,new s(u).eval(e)))}else{if(f=l&&l.value)f=f.eval(e);else{if(!g[c].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+y+" for "+this.arity+")"};f=g[c].value.eval(t),m.resetCache()}m.prependRule(new o(p,f)),r[c]=f}if(g[c].variadic&&n)for(h=v;y>h;h++)r[h]=n[h].value.eval(e);v++}return m},u.prototype.makeImportant=function(){var e=this.rules?this.rules.map(function(e){return e.makeImportant?e.makeImportant(!0):e}):this.rules;return new u(this.name,this.params,e,this.condition,this.variadic,this.frames)},u.prototype.eval=function(e){return new u(this.name,this.params,this.rules,this.condition,this.variadic,this.frames||e.frames.slice(0))},u.prototype.evalCall=function(e,t,n){var r,u,l=[],c=this.frames?this.frames.concat(e.frames):e.frames,h=this.evalParams(e,new a.Eval(e,c),t,l);return h.prependRule(new o("@arguments",new s(l).eval(e))),r=this.rules.slice(0),(u=new i(null,r)).originalRuleset=this,u=u.eval(new a.Eval(e,[this,h].concat(c))),n&&(u=u.makeImportant()),u},u.prototype.matchCondition=function(e,t){return!(this.condition&&!this.condition.eval(new a.Eval(t,[this.evalParams(t,new a.Eval(t,this.frames?this.frames.concat(t.frames):t.frames),e,[])].concat(this.frames||[]).concat(t.frames))))},u.prototype.matchArgs=function(e,t){var n,r=e&&e.length||0,i=this.optionalParameters,o=e?e.reduce(function(e,t){return i.indexOf(t.name)<0?e+1:e},0):0;if(this.variadic){if(this.required-1>o)return!1}else{if(this.required>o)return!1;if(r>this.params.length)return!1}n=Math.min(o,this.arity);for(var s=0;n>s;s++)if(!this.params[s].name&&!this.params[s].variadic&&e[s].value.eval(t).toCSS()!=this.params[s].value.eval(t).toCSS())return!1;return!0},t.exports=u},{"../contexts":10,"./element":57,"./expression":58,"./rule":73,"./ruleset":75,"./selector":76}],68:[function(e,t){var n=e("./node"),r=e("./operation"),i=e("./dimension"),o=function(e){this.value=e};(o.prototype=new n).type="Negative",o.prototype.genCSS=function(e,t){t.add("-"),this.value.genCSS(e,t)},o.prototype.eval=function(e){return e.isMathOn()?new r("*",[new i(-1),this.value]).eval(e):new o(this.value.eval(e))},t.exports=o},{"./dimension":55,"./node":69,"./operation":70}],69:[function(e,t){var n=function(){};n.prototype.toCSS=function(e){var t=[];return this.genCSS(e,{add:function(e){t.push(e)},isEmpty:function(){return 0===t.length}}),t.join("")},n.prototype.genCSS=function(e,t){t.add(this.value)},n.prototype.accept=function(e){this.value=e.visit(this.value)},n.prototype.eval=function(){return this},n.prototype._operate=function(e,t,n,r){switch(t){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r}},n.prototype.fround=function(e,t){var n=e&&e.numPrecision;return null==n?t:Number((t+2e-16).toFixed(n))},n.compare=function(e,t){if(e.compare&&"Quoted"!==t.type&&"Anonymous"!==t.type)return e.compare(t);if(t.compare)return-t.compare(e);if(e.type===t.type){if(e=e.value,t=t.value,!Array.isArray(e))return e===t?0:void 0;if(e.length===t.length){for(var r=0;e.length>r;r++)if(0!==n.compare(e[r],t[r]))return;return 0}}},n.numericCompare=function(e,t){return t>e?-1:e===t?0:e>t?1:void 0},t.exports=n},{}],70:[function(e,t){var n=e("./node"),r=e("./color"),i=e("./dimension"),o=function(e,t,n){this.op=e.trim(),this.operands=t,this.isSpaced=n};(o.prototype=new n).type="Operation",o.prototype.accept=function(e){this.operands=e.visit(this.operands)},o.prototype.eval=function(e){var t=this.operands[0].eval(e),n=this.operands[1].eval(e);if(e.isMathOn()){if(t instanceof i&&n instanceof r&&(t=t.toColor()),n instanceof i&&t instanceof r&&(n=n.toColor()),!t.operate)throw{type:"Operation",message:"Operation on an invalid type"};return t.operate(e,this.op,n)}return new o(this.op,[t,n],this.isSpaced)},o.prototype.genCSS=function(e,t){this.operands[0].genCSS(e,t),this.isSpaced&&t.add(" "),t.add(this.op),this.isSpaced&&t.add(" "),this.operands[1].genCSS(e,t)},t.exports=o},{"./color":49,"./dimension":55,"./node":69}],71:[function(e,t){var n=e("./node"),r=function(e){this.value=e};(r.prototype=new n).type="Paren",r.prototype.genCSS=function(e,t){t.add("("),this.value.genCSS(e,t),t.add(")")},r.prototype.eval=function(e){return new r(this.value.eval(e))},t.exports=r},{"./node":69}],72:[function(e,t){var n=e("./node"),r=e("./js-eval-node"),i=e("./variable"),o=function(e,t,n,r,i){this.escaped=null==n||n,this.value=t||"",this.quote=e.charAt(0),this.index=r,this.currentFileInfo=i};(o.prototype=new r).type="Quoted",o.prototype.genCSS=function(e,t){this.escaped||t.add(this.quote,this.currentFileInfo,this.index),t.add(this.value),this.escaped||t.add(this.quote)},o.prototype.containsVariables=function(){return this.value.match(/(`([^`]+)`)|@\{([\w-]+)\}/)},o.prototype.eval=function(e){function b(e,t,n){for(var r=e;(e=r)!==(r=e.replace(t,n)););return r}var t=this,n=this.value;return n=b(n=b(n,/`([^`]+)`/g,function(n,r){return String(t.evaluateJavaScript(r,e))}),/@\{([\w-]+)\}/g,function(n,r){var s=new i("@"+r,t.index,t.currentFileInfo).eval(e,!0);return s instanceof o?s.value:s.toCSS()}),new o(this.quote+n+this.quote,n,this.escaped,this.index,this.currentFileInfo)},o.prototype.compare=function(e){return"Quoted"!==e.type||this.escaped||e.escaped?e.toCSS&&this.toCSS()===e.toCSS()?0:void 0:n.numericCompare(this.value,e.value)},t.exports=o},{"./js-eval-node":63,"./node":69,"./variable":81}],73:[function(e,t){var n=e("./node"),r=e("./value"),i=e("./keyword"),o=function(e,t,i,o,s,a,u,l){this.name=e,this.value=t instanceof n?t:new r([t]),this.important=i?" "+i.trim():"",this.merge=o,this.index=s,this.currentFileInfo=a,this.inline=u||!1,this.variable=void 0!==l?l:e.charAt&&"@"===e.charAt(0)};(o.prototype=new n).type="Rule",o.prototype.genCSS=function(e,t){t.add(this.name+(e.compress?":":": "),this.currentFileInfo,this.index);try{this.value.genCSS(e,t)}catch(e){throw e.index=this.index,e.filename=this.currentFileInfo.filename,e}t.add(this.important+(this.inline||e.lastRule&&e.compress?"":";"),this.currentFileInfo,this.index)},o.prototype.eval=function(e){var t,n=!1,r=this.name,s=this.variable;"string"!=typeof r&&(r=1===r.length&&r[0]instanceof i?r[0].value:function c(e,t){var n,r="",i=t.length,o={add:function(e){r+=e}};for(n=0;i>n;n++)t[n].eval(e).genCSS(e,o);return r}(e,r),s=!1),"font"!==r||e.strictMath||(n=!0,e.strictMath=!0);try{if(e.importantScope.push({}),t=this.value.eval(e),!this.variable&&"DetachedRuleset"===t.type)throw{message:"Rulesets cannot be evaluated on a property.",index:this.index,filename:this.currentFileInfo.filename};var a=this.important,u=e.importantScope.pop();return!a&&u.important&&(a=u.important),new o(r,t,a,this.merge,this.index,this.currentFileInfo,this.inline,s)}catch(e){throw"number"!=typeof e.index&&(e.index=this.index,e.filename=this.currentFileInfo.filename),e}finally{n&&(e.strictMath=!1)}},o.prototype.makeImportant=function(){return new o(this.name,this.value,"!important",this.merge,this.index,this.currentFileInfo,this.inline)};var s=function(e){Array.isArray(e)?e.forEach(function(e){s(e)}):e.markReferenced&&e.markReferenced()};o.prototype.markReferenced=function(){this.value&&s(this.value)},t.exports=o},{"./keyword":64,"./node":69,"./value":80}],74:[function(e,t){var n=e("./node"),r=e("./variable"),i=function(e){this.variable=e};(i.prototype=new n).type="RulesetCall",i.prototype.eval=function(e){return new r(this.variable).eval(e).callEval(e)},t.exports=i},{"./node":69,"./variable":81}],75:[function(e,t){var n=e("./node"),r=e("./rule"),o=e("./selector"),s=e("./element"),a=e("./paren"),u=e("../contexts"),c=e("../functions/function-registry"),h=e("../functions/default"),f=e("./debug-info"),p=function(e,t,n){this.selectors=e,this.rules=t,this._lookups={},this.strictImports=n};(p.prototype=new n).type="Ruleset",p.prototype.isRuleset=!0,p.prototype.isRulesetLike=!0,p.prototype.accept=function(e){this.paths?e.visitArray(this.paths,!0):this.selectors&&(this.selectors=e.visitArray(this.selectors)),this.rules&&this.rules.length&&(this.rules=e.visitArray(this.rules))},p.prototype.eval=function(e){var t,n,i,o,s=this.selectors,a=!1;if(s&&(n=s.length)){for(t=[],h.error({type:"Syntax",message:"it is currently only allowed in parametric mixin guards,"}),o=0;n>o;o++)i=s[o].eval(e),t.push(i),i.evaldCondition&&(a=!0);h.reset()}else a=!0;var u,l,f=this.rules?this.rules.slice(0):null,d=new p(t,f,this.strictImports);d.originalRuleset=this,d.root=this.root,d.firstRoot=this.firstRoot,d.allowImports=this.allowImports,this.debugInfo&&(d.debugInfo=this.debugInfo),a||(f.length=0),d.functionRegistry=function(e){for(var t,n=0,r=e.length;n!==r;++n)if(t=e[n].functionRegistry)return t;return c}(e.frames).inherit();var v=e.frames;v.unshift(d);var m=e.selectors;m||(e.selectors=m=[]),m.unshift(this.selectors),(d.root||d.allowImports||!d.strictImports)&&d.evalImports(e);var g=d.rules,y=g?g.length:0;for(o=0;y>o;o++)g[o].evalFirst&&(g[o]=g[o].eval(e));var w=e.mediaBlocks&&e.mediaBlocks.length||0;for(o=0;y>o;o++)"MixinCall"===g[o].type?(f=g[o].eval(e).filter(function(e){return!(e instanceof r&&e.variable)||!d.variable(e.name)}),g.splice.apply(g,[o,1].concat(f)),y+=f.length-1,o+=f.length-1,d.resetCache()):"RulesetCall"===g[o].type&&(f=g[o].eval(e).rules.filter(function(e){return!(e instanceof r&&e.variable)}),g.splice.apply(g,[o,1].concat(f)),y+=f.length-1,o+=f.length-1,d.resetCache());for(o=0;g.length>o;o++)(u=g[o]).evalFirst||(g[o]=u=u.eval?u.eval(e):u);for(o=0;g.length>o;o++)if((u=g[o])instanceof p&&u.selectors&&1===u.selectors.length&&u.selectors[0].isJustParentSelector()){g.splice(o--,1);for(var x=0;u.rules.length>x;x++)(l=u.rules[x])instanceof r&&l.variable||g.splice(++o,0,l)}if(v.shift(),m.shift(),e.mediaBlocks)for(o=w;e.mediaBlocks.length>o;o++)e.mediaBlocks[o].bubbleSelectors(t);return d},p.prototype.evalImports=function(e){var t,n,r=this.rules;if(r)for(t=0;r.length>t;t++)"Import"===r[t].type&&((n=r[t].eval(e))&&n.length?(r.splice.apply(r,[t,1].concat(n)),t+=n.length-1):r.splice(t,1,n),this.resetCache())},p.prototype.makeImportant=function(){return new p(this.selectors,this.rules.map(function(e){return e.makeImportant?e.makeImportant():e}),this.strictImports)},p.prototype.matchArgs=function(e){return!e||0===e.length},p.prototype.matchCondition=function(e,t){var n=this.selectors[this.selectors.length-1];return!!n.evaldCondition&&!(n.condition&&!n.condition.eval(new u.Eval(t,t.frames)))},p.prototype.resetCache=function(){this._rulesets=null,this._variables=null,this._lookups={}},p.prototype.variables=function(){return this._variables||(this._variables=this.rules?this.rules.reduce(function(e,t){if(t instanceof r&&!0===t.variable&&(e[t.name]=t),"Import"===t.type&&t.root&&t.root.variables){var n=t.root.variables();for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e},{}):{}),this._variables},p.prototype.variable=function(e){return this.variables()[e]},p.prototype.rulesets=function(){if(!this.rules)return[];var e,t,n=[],r=this.rules,i=r.length;for(e=0;i>e;e++)(t=r[e]).isRuleset&&n.push(t);return n},p.prototype.prependRule=function(e){var t=this.rules;t?t.unshift(e):this.rules=[e]},p.prototype.find=function(e,t,n){t=t||this;var r,i,s=[],a=e.toCSS();return a in this._lookups?this._lookups[a]:(this.rulesets().forEach(function(a){if(a!==t)for(var u=0;a.selectors.length>u;u++)if(r=e.match(a.selectors[u])){if(e.elements.length>r){if(!n||n(a)){i=a.find(new o(e.elements.slice(r)),t,n);for(var l=0;i.length>l;++l)i[l].path.push(a);Array.prototype.push.apply(s,i)}}else s.push({rule:a,path:[]});break}}),this._lookups[a]=s,s)},p.prototype.genCSS=function(e,t){var n,r,i,o,s,a=[];e.tabLevel=e.tabLevel||0,this.root||e.tabLevel++;var u,l,c=e.compress?"":Array(e.tabLevel+1).join("  "),h=e.compress?"":Array(e.tabLevel).join("  "),p=0,d=0;for(n=0;this.rules.length>n;n++)"Comment"===(o=this.rules[n]).type?(d===n&&d++,a.push(o)):o.isCharset&&o.isCharset()?(a.splice(p,0,o),p++,d++):"Import"===o.type?(a.splice(d,0,o),d++):a.push(o);if(a=[].concat(a),!this.root){(i=f(e,this,h))&&(t.add(i),t.add(h));var v,m=this.paths,g=m.length;for(u=e.compress?",":",\n"+h,n=0;g>n;n++)if(v=(s=m[n]).length)for(n>0&&t.add(u),e.firstSelector=!0,s[0].genCSS(e,t),e.firstSelector=!1,r=1;v>r;r++)s[r].genCSS(e,t);t.add((e.compress?"{":" {\n")+c)}for(n=0;a.length>n;n++){o=a[n],n+1===a.length&&(e.lastRule=!0);var y=e.lastRule;("boolean"==typeof(l=o).isRulesetLike?l.isRulesetLike:"function"==typeof l.isRulesetLike&&l.isRulesetLike())&&(e.lastRule=!1),o.genCSS?o.genCSS(e,t):o.value&&t.add(o.value.toString()),e.lastRule=y,e.lastRule?e.lastRule=!1:t.add(e.compress?"":"\n"+c)}this.root||(t.add(e.compress?"}":"\n"+h+"}"),e.tabLevel--),t.isEmpty()||e.compress||!this.firstRoot||t.add("\n")},p.prototype.markReferenced=function(){var e;if(this.selectors)for(e=0;this.selectors.length>e;e++)this.selectors[e].markReferenced();if(this.rules)for(e=0;this.rules.length>e;e++)this.rules[e].markReferenced&&this.rules[e].markReferenced()},p.prototype.getIsReferenced=function(){var e,t,n,r;if(this.paths)for(e=0;this.paths.length>e;e++)for(n=this.paths[e],t=0;n.length>t;t++)if(n[t].getIsReferenced&&n[t].getIsReferenced())return!0;if(this.selectors)for(e=0;this.selectors.length>e;e++)if((r=this.selectors[e]).getIsReferenced&&r.getIsReferenced())return!0;return!1},p.prototype.joinSelectors=function(e,t,n){for(var r=0;n.length>r;r++)this.joinSelector(e,t,n[r])},p.prototype.joinSelector=function(e,t,n){function d(e,t){var n,r;if(0===e.length)n=new a(e[0]);else{var i=[];for(r=0;e.length>r;r++)i.push(new s(null,e[r],t.index,t.currentFileInfo));n=new a(new o(i))}return n}function j(e,t,n,r){var i,o,a;if(i=[],e.length>0?(o=(i=e.slice(0)).pop(),a=r.createDerived(o.elements.slice(0))):a=r.createDerived([]),t.length>0){var u=n.combinator,l=t[0].elements[0];u.emptyOrWhitespace&&!l.combinator.emptyOrWhitespace&&(u=l.combinator),a.elements.push(new s(u,l.value,n.index,n.currentFileInfo)),a.elements=a.elements.concat(t[0].elements.slice(1))}return 0!==a.elements.length&&i.push(a),t.length>1&&(i=i.concat(t.slice(1))),i}function k(e,t,n,r,i){var o;for(o=0;e.length>o;o++){var s=j(e[o],t,n,r);i.push(s)}return i}function l(e,t){var n,r;if(0!==e.length){if(0===t.length)return void t.push([new o(e)]);for(n=0;t.length>n;n++)(r=t[n]).length>0?r[r.length-1]=r[r.length-1].createDerived(r[r.length-1].elements.concat(e)):r.push(new o(e))}}var r,u;if(!function i(e,t,n){var r,a,u,c,h,f,p,v,m,g,y,w,x,b,S,C=!1;for(c=[],h=[[]],r=0;n.elements.length>r;r++)if("&"!==(v=n.elements[r]).value){var I=(S=void 0,"Paren"!==(b=v).value.type?null:"Selector"!==(S=b.value.value).type?null:S);if(null!=I){l(c,h);var M,R=[],F=[];for(M=i(R,t,I),C=C||M,u=0;R.length>u;u++)k(h,[(y=d(R[u],v),x=void 0,x=new s(null,y,(w=v).index,w.currentFileInfo),new o([x]))],v,n,F);h=F,c=[]}else c.push(v)}else{for(C=!0,f=[],l(c,h),a=0;h.length>a;a++)if(p=h[a],0===t.length)p.length>0&&p[0].elements.push(new s(v.combinator,"",v.index,v.currentFileInfo)),f.push(p);else for(u=0;t.length>u;u++){var E=j(p,t[u],v,n);f.push(E)}h=f,c=[]}for(l(c,h),r=0;h.length>r;r++)(m=h[r].length)>0&&(e.push(h[r]),g=h[r][m-1],h[r][m-1]=g.createDerived(g.elements,n.extendList));return C}(u=[],t,n))if(t.length>0)for(u=[],r=0;t.length>r;r++)u.push(t[r].concat(n));else u=[[n]];for(r=0;u.length>r;r++)e.push(u[r])},t.exports=p},{"../contexts":10,"../functions/default":19,"../functions/function-registry":21,"./debug-info":53,"./element":57,"./node":69,"./paren":71,"./rule":73,"./selector":76}],76:[function(e,t){var n=e("./node"),r=e("./element"),i=function(e,t,n,r,i,o){this.elements=e,this.extendList=t,this.condition=n,this.currentFileInfo=i||{},this.isReferenced=o,n||(this.evaldCondition=!0)};(i.prototype=new n).type="Selector",i.prototype.accept=function(e){this.elements&&(this.elements=e.visitArray(this.elements)),this.extendList&&(this.extendList=e.visitArray(this.extendList)),this.condition&&(this.condition=e.visit(this.condition))},i.prototype.createDerived=function(e,t,n){n=null!=n?n:this.evaldCondition;var r=new i(e,t||this.extendList,null,this.index,this.currentFileInfo,this.isReferenced);return r.evaldCondition=n,r.mediaEmpty=this.mediaEmpty,r},i.prototype.createEmptySelectors=function(){var e=new r("","&",this.index,this.currentFileInfo),t=[new i([e],null,null,this.index,this.currentFileInfo)];return t[0].mediaEmpty=!0,t},i.prototype.match=function(e){var t,n,r=this.elements,i=r.length;if(e.CacheElements(),0===(t=e._elements.length)||t>i)return 0;for(n=0;t>n;n++)if(r[n].value!==e._elements[n])return 0;return t},i.prototype.CacheElements=function(){if(!this._elements){var e=this.elements.map(function(e){return e.combinator.value+(e.value.value||e.value)}).join("").match(/[,&#\*\.\w-]([\w-]|(\\.))*/g);e?"&"===e[0]&&e.shift():e=[],this._elements=e}},i.prototype.isJustParentSelector=function(){return!this.mediaEmpty&&1===this.elements.length&&"&"===this.elements[0].value&&(" "===this.elements[0].combinator.value||""===this.elements[0].combinator.value)},i.prototype.eval=function(e){var t=this.condition&&this.condition.eval(e),n=this.elements,r=this.extendList;return n=n&&n.map(function(t){return t.eval(e)}),r=r&&r.map(function(t){return t.eval(e)}),this.createDerived(n,r,t)},i.prototype.genCSS=function(e,t){var n;if(e&&e.firstSelector||""!==this.elements[0].combinator.value||t.add(" ",this.currentFileInfo,this.index),!this._css)for(n=0;this.elements.length>n;n++)this.elements[n].genCSS(e,t)},i.prototype.markReferenced=function(){this.isReferenced=!0},i.prototype.getIsReferenced=function(){return!this.currentFileInfo.reference||this.isReferenced},i.prototype.getIsOutput=function(){return this.evaldCondition},t.exports=i},{"./element":57,"./node":69}],77:[function(e,t){var n=e("./node"),r=function(e){this.value=e};(r.prototype=new n).type="UnicodeDescriptor",t.exports=r},{"./node":69}],78:[function(e,t){var n=e("./node"),r=e("../data/unit-conversions"),i=function(e,t,n){this.numerator=e?e.slice(0).sort():[],this.denominator=t?t.slice(0).sort():[],n?this.backupUnit=n:e&&e.length&&(this.backupUnit=e[0])};(i.prototype=new n).type="Unit",i.prototype.clone=function(){return new i(this.numerator.slice(0),this.denominator.slice(0),this.backupUnit)},i.prototype.genCSS=function(e,t){var n=e&&e.strictUnits;1===this.numerator.length?t.add(this.numerator[0]):!n&&this.backupUnit?t.add(this.backupUnit):!n&&this.denominator.length&&t.add(this.denominator[0])},i.prototype.toString=function(){var e,t=this.numerator.join("*");for(e=0;this.denominator.length>e;e++)t+="/"+this.denominator[e];return t},i.prototype.compare=function(e){return this.is(e.toString())?0:void 0},i.prototype.is=function(e){return this.toString().toUpperCase()===e.toUpperCase()},i.prototype.isLength=function(){return Boolean(this.toCSS().match(/px|em|%|in|cm|mm|pc|pt|ex/))},i.prototype.isEmpty=function(){return 0===this.numerator.length&&0===this.denominator.length},i.prototype.isSingular=function(){return 1>=this.numerator.length&&0===this.denominator.length},i.prototype.map=function(e){var t;for(t=0;this.numerator.length>t;t++)this.numerator[t]=e(this.numerator[t],!1);for(t=0;this.denominator.length>t;t++)this.denominator[t]=e(this.denominator[t],!0)},i.prototype.usedUnits=function(){var e,t,n={};for(var i in t=function(t){return e.hasOwnProperty(t)&&!n[i]&&(n[i]=t),t},r)r.hasOwnProperty(i)&&(e=r[i],this.map(t));return n},i.prototype.cancel=function(){var e,t,n={};for(t=0;this.numerator.length>t;t++)n[e=this.numerator[t]]=(n[e]||0)+1;for(t=0;this.denominator.length>t;t++)n[e=this.denominator[t]]=(n[e]||0)-1;for(e in this.numerator=[],this.denominator=[],n)if(n.hasOwnProperty(e)){var r=n[e];if(r>0)for(t=0;r>t;t++)this.numerator.push(e);else if(0>r)for(t=0;-r>t;t++)this.denominator.push(e)}this.numerator.sort(),this.denominator.sort()},t.exports=i},{"../data/unit-conversions":13,"./node":69}],79:[function(e,t){var n=e("./node"),r=function(e,t,n,r){this.value=e,this.currentFileInfo=n,this.index=t,this.isEvald=r};(r.prototype=new n).type="Url",r.prototype.accept=function(e){this.value=e.visit(this.value)},r.prototype.genCSS=function(e,t){t.add("url("),this.value.genCSS(e,t),t.add(")")},r.prototype.eval=function(e){var t,n=this.value.eval(e);if(!this.isEvald&&((t=this.currentFileInfo&&this.currentFileInfo.rootpath)&&"string"==typeof n.value&&e.isPathRelative(n.value)&&(n.quote||(t=t.replace(/[\(\)'"\s]/g,function(e){return"\\"+e})),n.value=t+n.value),n.value=e.normalizePath(n.value),e.urlArgs&&!n.value.match(/^\s*data:/))){var i=(-1===n.value.indexOf("?")?"?":"&")+e.urlArgs;-1!==n.value.indexOf("#")?n.value=n.value.replace("#",i+"#"):n.value+=i}return new r(n,this.index,this.currentFileInfo,!0)},t.exports=r},{"./node":69}],80:[function(e,t){var n=e("./node"),r=function(e){if(this.value=e,!e)throw new Error("Value requires an array argument")};(r.prototype=new n).type="Value",r.prototype.accept=function(e){this.value&&(this.value=e.visitArray(this.value))},r.prototype.eval=function(e){return 1===this.value.length?this.value[0].eval(e):new r(this.value.map(function(t){return t.eval(e)}))},r.prototype.genCSS=function(e,t){var n;for(n=0;this.value.length>n;n++)this.value[n].genCSS(e,t),this.value.length>n+1&&t.add(e&&e.compress?",":", ")},t.exports=r},{"./node":69}],81:[function(e,t){var n=e("./node"),r=function(e,t,n){this.name=e,this.index=t,this.currentFileInfo=n||{}};(r.prototype=new n).type="Variable",r.prototype.eval=function(e){var t,n=this.name;if(0===n.indexOf("@@")&&(n="@"+new r(n.slice(1),this.index,this.currentFileInfo).eval(e).value),this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+n,filename:this.currentFileInfo.filename,index:this.index};if(this.evaluating=!0,t=this.find(e.frames,function(t){var r=t.variable(n);if(r){if(r.important)e.importantScope[e.importantScope.length-1].important=r.important;return r.value.eval(e)}}))return this.evaluating=!1,t;throw{type:"Name",message:"variable "+n+" is undefined",filename:this.currentFileInfo.filename,index:this.index}},r.prototype.find=function(e,t){for(var n,r=0;e.length>r;r++)if(n=t.call(e,e[r]))return n;return null},t.exports=r},{"./node":69}],82:[function(e,t){t.exports={getLocation:function(e,t){for(var n=e+1,r=null,i=-1;--n>=0&&"\n"!==t.charAt(n);)i++;return"number"==typeof e&&(r=(t.slice(0,e).match(/\n/g)||"").length),{line:r,column:i}}}},{}],83:[function(e,t){var n=e("../tree"),r=e("./visitor"),i=e("../logger"),o=function(){this._visitor=new r(this),this.contexts=[],this.allExtendsStack=[[]]};o.prototype={run:function(e){return(e=this._visitor.visit(e)).allExtends=this.allExtendsStack[0],e},visitRule:function(e,t){t.visitDeeper=!1},visitMixinDefinition:function(e,t){t.visitDeeper=!1},visitRuleset:function(e){if(!e.root){var t,r,i,o,s=[],a=e.rules,u=a?a.length:0;for(t=0;u>t;t++)e.rules[t]instanceof n.Extend&&(s.push(a[t]),e.extendOnEveryPath=!0);var l=e.paths;for(t=0;l.length>t;t++){var c=l[t],h=c[c.length-1].extendList;for((o=h?h.slice(0).concat(s):s)&&(o=o.map(function(e){return e.clone()})),r=0;o.length>r;r++)this.foundExtends=!0,(i=o[r]).findSelfSelectors(c),i.ruleset=e,0===r&&(i.firstExtendOnThisSelectorPath=!0),this.allExtendsStack[this.allExtendsStack.length-1].push(i)}this.contexts.push(e.selectors)}},visitRulesetOut:function(e){e.root||(this.contexts.length=this.contexts.length-1)},visitMedia:function(e){e.allExtends=[],this.allExtendsStack.push(e.allExtends)},visitMediaOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1},visitDirective:function(e){e.allExtends=[],this.allExtendsStack.push(e.allExtends)},visitDirectiveOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1}};var s=function(){this._visitor=new r(this)};s.prototype={run:function(e){var t=new o;if(this.extendIndicies={},t.run(e),!t.foundExtends)return e;e.allExtends=e.allExtends.concat(this.doExtendChaining(e.allExtends,e.allExtends)),this.allExtendsStack=[e.allExtends];var n=this._visitor.visit(e);return this.checkExtendsForNonMatched(e.allExtends),n},checkExtendsForNonMatched:function(e){var t=this.extendIndicies;e.filter(function(e){return!e.hasFoundMatches&&1==e.parent_ids.length}).forEach(function(e){var n="_unknown_";try{n=e.selector.toCSS({})}catch(e){}t[e.index+" "+n]||(t[e.index+" "+n]=!0,i.warn("extend '"+n+"' has no matches"))})},doExtendChaining:function(e,t,r){var i,o,s,a,u,l,c,h,f=[],p=this;for(r=r||0,i=0;e.length>i;i++)for(o=0;t.length>o;o++)l=e[i],c=t[o],l.parent_ids.indexOf(c.object_id)>=0||(u=[c.selfSelectors[0]],(s=p.findMatch(l,u)).length&&(l.hasFoundMatches=!0,l.selfSelectors.forEach(function(e){a=p.extendSelector(s,u,e),(h=new n.Extend(c.selector,c.option,0)).selfSelectors=a,a[a.length-1].extendList=[h],f.push(h),h.ruleset=c.ruleset,h.parent_ids=h.parent_ids.concat(c.parent_ids,l.parent_ids),c.firstExtendOnThisSelectorPath&&(h.firstExtendOnThisSelectorPath=!0,c.ruleset.paths.push(a))})));if(f.length){if(this.extendChainCount++,r>100){var d="{unable to calculate}",v="{unable to calculate}";try{d=f[0].selfSelectors[0].toCSS(),v=f[0].selector.toCSS()}catch(e){}throw{message:"extend circular reference detected. One of the circular extends is currently:"+d+":extend("+v+")"}}return f.concat(p.doExtendChaining(f,t,r+1))}return f},visitRule:function(e,t){t.visitDeeper=!1},visitMixinDefinition:function(e,t){t.visitDeeper=!1},visitSelector:function(e,t){t.visitDeeper=!1},visitRuleset:function(e){if(!e.root){var t,n,r,i,o=this.allExtendsStack[this.allExtendsStack.length-1],s=[],a=this;for(r=0;o.length>r;r++)for(n=0;e.paths.length>n;n++)if(i=e.paths[n],!e.extendOnEveryPath){var u=i[i.length-1].extendList;u&&u.length||(t=this.findMatch(o[r],i)).length&&(o[r].hasFoundMatches=!0,o[r].selfSelectors.forEach(function(e){s.push(a.extendSelector(t,i,e))}))}e.paths=e.paths.concat(s)}},findMatch:function(e,t){var n,r,i,o,s,a,u,l=e.selector.elements,c=[],h=[];for(n=0;t.length>n;n++)for(r=t[n],i=0;r.elements.length>i;i++)for(o=r.elements[i],(e.allowBefore||0===n&&0===i)&&c.push({pathIndex:n,index:i,matched:0,initialCombinator:o.combinator}),a=0;c.length>a;a++)u=c[a],""===(s=o.combinator.value)&&0===i&&(s=" "),!this.isElementValuesEqual(l[u.matched].value,o.value)||u.matched>0&&l[u.matched].combinator.value!==s?u=null:u.matched++,u&&(u.finished=u.matched===l.length,u.finished&&!e.allowAfter&&(r.elements.length>i+1||t.length>n+1)&&(u=null)),u?u.finished&&(u.length=l.length,u.endPathIndex=n,u.endPathElementIndex=i+1,c.length=0,h.push(u)):(c.splice(a,1),a--);return h},isElementValuesEqual:function(e,t){if("string"==typeof e||"string"==typeof t)return e===t;if(e instanceof n.Attribute)return e.op===t.op&&e.key===t.key&&(e.value&&t.value?(e=e.value.value||e.value)===(t=t.value.value||t.value):!e.value&&!t.value);if(e=e.value,t=t.value,e instanceof n.Selector){if(!(t instanceof n.Selector)||e.elements.length!==t.elements.length)return!1;for(var r=0;e.elements.length>r;r++){if(e.elements[r].combinator.value!==t.elements[r].combinator.value&&(0!==r||(e.elements[r].combinator.value||" ")!==(t.elements[r].combinator.value||" ")))return!1;if(!this.isElementValuesEqual(e.elements[r].value,t.elements[r].value))return!1}return!0}return!1},extendSelector:function(e,t,r){var i,o,s,a,u,l=0,c=0,h=[];for(i=0;e.length>i;i++)o=t[(a=e[i]).pathIndex],s=new n.Element(a.initialCombinator,r.elements[0].value,r.elements[0].index,r.elements[0].currentFileInfo),a.pathIndex>l&&c>0&&(h[h.length-1].elements=h[h.length-1].elements.concat(t[l].elements.slice(c)),c=0,l++),u=o.elements.slice(c,a.index).concat([s]).concat(r.elements.slice(1)),l===a.pathIndex&&i>0?h[h.length-1].elements=h[h.length-1].elements.concat(u):(h=h.concat(t.slice(l,a.pathIndex))).push(new n.Selector(u)),l=a.endPathIndex,(c=a.endPathElementIndex)>=t[l].elements.length&&(c=0,l++);return t.length>l&&c>0&&(h[h.length-1].elements=h[h.length-1].elements.concat(t[l].elements.slice(c)),l++),h.concat(t.slice(l,t.length))},visitRulesetOut:function(){},visitMedia:function(e){var t=e.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);t=t.concat(this.doExtendChaining(t,e.allExtends)),this.allExtendsStack.push(t)},visitMediaOut:function(){var e=this.allExtendsStack.length-1;this.allExtendsStack.length=e},visitDirective:function(e){var t=e.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);t=t.concat(this.doExtendChaining(t,e.allExtends)),this.allExtendsStack.push(t)},visitDirectiveOut:function(){var e=this.allExtendsStack.length-1;this.allExtendsStack.length=e}},t.exports=s},{"../logger":32,"../tree":61,"./visitor":89}],84:[function(e,t){function c(e){this.imports=[],this.variableImports=[],this._onSequencerEmpty=e,this._currentDepth=0}c.prototype.addImport=function(e){var t=this,n={callback:e,args:null,isReady:!1};return this.imports.push(n),function(){n.args=Array.prototype.slice.call(arguments,0),n.isReady=!0,t.tryRun()}},c.prototype.addVariableImport=function(e){this.variableImports.push(e)},c.prototype.tryRun=function(){this._currentDepth++;try{for(;;){for(;this.imports.length>0;){var e=this.imports[0];if(!e.isReady)return;this.imports=this.imports.slice(1),e.callback.apply(null,e.args)}if(0===this.variableImports.length)break;var t=this.variableImports[0];this.variableImports=this.variableImports.slice(1),t()}}finally{this._currentDepth--}0===this._currentDepth&&this._onSequencerEmpty&&this._onSequencerEmpty()},t.exports=c},{}],85:[function(e,t){var n=e("../contexts"),r=e("./visitor"),i=e("./import-sequencer"),o=function(e,t){this._visitor=new r(this),this._importer=e,this._finish=t,this.context=new n.Eval,this.importCount=0,this.onceFileDetectionMap={},this.recursionDetector={},this._sequencer=new i(this._onSequencerEmpty.bind(this))};o.prototype={isReplacing:!1,run:function(e){try{this._visitor.visit(e)}catch(e){this.error=e}this.isFinished=!0,this._sequencer.tryRun()},_onSequencerEmpty:function(){this.isFinished&&this._finish(this.error)},visitImport:function(e,t){var r=e.options.inline;if(!e.css||r){var i=new n.Eval(this.context,this.context.frames.slice(0)),o=i.frames[0];this.importCount++,e.isVariableImport()?this._sequencer.addVariableImport(this.processImportNode.bind(this,e,i,o)):this.processImportNode(e,i,o)}t.visitDeeper=!1},processImportNode:function(e,t,n){var r,i=e.options.inline;try{r=e.evalForImport(t)}catch(t){t.filename||(t.index=e.index,t.filename=e.currentFileInfo.filename),e.css=!0,e.error=t}if(!r||r.css&&!i)this.importCount--,this.isFinished&&this._sequencer.tryRun();else{r.options.multiple&&(t.importMultiple=!0);for(var o=void 0===r.css,s=0;n.rules.length>s;s++)if(n.rules[s]===e){n.rules[s]=r;break}var a=this.onImported.bind(this,r,t),u=this._sequencer.addImport(a);this._importer.push(r.getPath(),o,r.currentFileInfo,r.options,u)}},onImported:function(e,t,n,r,i,o){n&&(n.filename||(n.index=e.index,n.filename=e.currentFileInfo.filename),this.error=n);var s=this,a=e.options.inline,u=e.options.plugin,l=e.options.optional,c=i||o in s.recursionDetector;if(t.importMultiple||(e.skip=!!c||function(){return o in s.onceFileDetectionMap||(s.onceFileDetectionMap[o]=!0,!1)}),!o&&l&&(e.skip=!0),r&&(e.root=r,e.importedFilename=o,!(a||u||!t.importMultiple&&c))){s.recursionDetector[o]=!0;var h=this.context;this.context=t;try{this._visitor.visit(r)}catch(n){this.error=n}this.context=h}s.importCount--,s.isFinished&&s._sequencer.tryRun()},visitRule:function(e,t){"DetachedRuleset"===e.value.type?this.context.frames.unshift(e):t.visitDeeper=!1},visitRuleOut:function(e){"DetachedRuleset"===e.value.type&&this.context.frames.shift()},visitDirective:function(e){this.context.frames.unshift(e)},visitDirectiveOut:function(){this.context.frames.shift()},visitMixinDefinition:function(e){this.context.frames.unshift(e)},visitMixinDefinitionOut:function(){this.context.frames.shift()},visitRuleset:function(e){this.context.frames.unshift(e)},visitRulesetOut:function(){this.context.frames.shift()},visitMedia:function(e){this.context.frames.unshift(e.rules[0])},visitMediaOut:function(){this.context.frames.shift()}},t.exports=o},{"../contexts":10,"./import-sequencer":84,"./visitor":89}],86:[function(e,t){var n={Visitor:e("./visitor"),ImportVisitor:e("./import-visitor"),ExtendVisitor:e("./extend-visitor"),JoinSelectorVisitor:e("./join-selector-visitor"),ToCSSVisitor:e("./to-css-visitor")};t.exports=n},{"./extend-visitor":83,"./import-visitor":85,"./join-selector-visitor":87,"./to-css-visitor":88,"./visitor":89}],87:[function(e,t){var n=e("./visitor"),r=function(){this.contexts=[[]],this._visitor=new n(this)};r.prototype={run:function(e){return this._visitor.visit(e)},visitRule:function(e,t){t.visitDeeper=!1},visitMixinDefinition:function(e,t){t.visitDeeper=!1},visitRuleset:function(e){var t,n=this.contexts[this.contexts.length-1],r=[];this.contexts.push(r),e.root||((t=e.selectors)&&(t=t.filter(function(e){return e.getIsOutput()}),e.selectors=t.length?t:t=null,t&&e.joinSelectors(r,n,t)),t||(e.rules=null),e.paths=r)},visitRulesetOut:function(){this.contexts.length=this.contexts.length-1},visitMedia:function(e){var t=this.contexts[this.contexts.length-1];e.rules[0].root=0===t.length||t[0].multiMedia},visitDirective:function(e){var t=this.contexts[this.contexts.length-1];e.rules&&e.rules.length&&(e.rules[0].root=e.isRooted||0===t.length||null)}},t.exports=r},{"./visitor":89}],88:[function(t,n){var r=t("../tree"),i=t("./visitor"),o=function(e){this._visitor=new i(this),this._context=e};o.prototype={isReplacing:!0,run:function(e){return this._visitor.visit(e)},visitRule:function(e){return e.variable?void 0:e},visitMixinDefinition:function(e){e.frames=[]},visitExtend:function(){},visitComment:function(e){return e.isSilent(this._context)?void 0:e},visitMedia:function(e,t){return e.accept(this._visitor),t.visitDeeper=!1,e.rules.length?e:void 0},visitImport:function(e){return void 0!==e.path.currentFileInfo.reference&&e.css?void 0:e},visitDirective:function(e,t){if("@charset"===e.name){if(!e.getIsReferenced())return;if(this.charset){if(e.debugInfo){var n=new r.Comment("/* "+e.toCSS(this._context).replace(/\n/g,"")+" */\n");return n.debugInfo=e.debugInfo,this._visitor.visit(n)}return}this.charset=!0}if(e.rules&&e.rules.length){if(this._mergeRules(e.rules[0].rules),e.accept(this._visitor),t.visitDeeper=!1,e.getIsReferenced())return e;if(!e.rules||!e.rules.length)return;if(function d(e){var t,n=e.rules;1!==n.length||n[0].paths&&0!==n[0].paths.length||(n=n[0].rules);for(var r=0;n.length>r;r++)if((t=n[r]).getIsReferenced&&t.getIsReferenced())return!0;return!1}(e))return e.markReferenced(),e}else if(e.getIsReferenced())return e},checkPropertiesInRoot:function(e){for(var t,n=0;e.length>n;n++)if((t=e[n])instanceof r.Rule&&!t.variable)throw{message:"properties must be inside selector blocks, they cannot be in the root.",index:t.index,filename:t.currentFileInfo?t.currentFileInfo.filename:null}},visitRuleset:function(e,t){var n,i=[];if(e.firstRoot&&this.checkPropertiesInRoot(e.rules),e.root)e.accept(this._visitor),t.visitDeeper=!1,(e.firstRoot||e.rules&&e.rules.length>0)&&i.splice(0,0,e);else{e.paths&&(e.paths=e.paths.filter(function(e){var t;for(" "===e[0].elements[0].combinator.value&&(e[0].elements[0].combinator=new r.Combinator("")),t=0;e.length>t;t++)if(e[t].getIsReferenced()&&e[t].getIsOutput())return!0;return!1}));for(var o=e.rules,s=o?o.length:0,a=0;s>a;)(n=o[a])&&n.rules?(i.push(this._visitor.visit(n)),o.splice(a,1),s--):a++;s>0?e.accept(this._visitor):e.rules=null,t.visitDeeper=!1,(o=e.rules)&&(this._mergeRules(o),o=e.rules),o&&(this._removeDuplicateRules(o),o=e.rules),o&&o.length>0&&e.paths.length>0&&i.splice(0,0,e)}return 1===i.length?i[0]:i},_removeDuplicateRules:function(e){if(e){var t,n,i,o={};for(i=e.length-1;i>=0;i--)if((n=e[i])instanceof r.Rule)if(o[n.name]){(t=o[n.name])instanceof r.Rule&&(t=o[n.name]=[o[n.name].toCSS(this._context)]);var s=n.toCSS(this._context);-1!==t.indexOf(s)?e.splice(i,1):t.push(s)}else o[n.name]=n}},_mergeRules:function(t){if(t){for(var n,i,o,s={},a=0;t.length>a;a++)(i=t[a])instanceof r.Rule&&i.merge&&(o=[i.name,i.important?"!":""].join(","),s[o]?t.splice(a--,1):s[o]=[],s[o].push(i));Object.keys(s).map(function(t){function e(e){return new r.Expression(e.map(function(e){return e.value}))}if((n=s[t]).length>1){i=n[0];var o=[],a=[];n.map(function(t){"+"===t.merge&&(a.length>0&&o.push(e(a)),a=[]),a.push(t)}),o.push(e(a)),i.value=function g(e){return new r.Value(e.map(function(e){return e}))}(o)}})}},visitAnonymous:function(e){return e.getIsReferenced()?(e.accept(this._visitor),e):void 0}},n.exports=o},{"../tree":61,"./visitor":89}],89:[function(e,t){function c(e){return e}var n=e("../tree"),r={visitDeeper:!0},i=!1,o=function(e){this._implementation=e,this._visitFnCache=[],i||(function d(e,t){var n,r;for(n in e)if(e.hasOwnProperty(n))switch(r=e[n],typeof r){case"function":r.prototype&&r.prototype.type&&(r.prototype.typeIndex=t++);break;case"object":t=d(r,t)}return t}(n,1),i=!0)};o.prototype={visit:function(e){if(!e)return e;var t=e.typeIndex;if(!t)return e;var n,i=this._visitFnCache,o=this._implementation,s=t<<1,a=1|s,u=i[s],l=i[a],h=r;if(h.visitDeeper=!0,u||(u=o[n="visit"+e.type]||c,l=o[n+"Out"]||c,i[s]=u,i[a]=l),u!==c){var f=u.call(o,e,h);o.isReplacing&&(e=f)}return h.visitDeeper&&e&&e.accept&&e.accept(this),l!=c&&l.call(o,e),e},visitArray:function(e,t){if(!e)return e;var n,r=e.length;if(t||!this._implementation.isReplacing){for(n=0;r>n;n++)this.visit(e[n]);return e}var i=[];for(n=0;r>n;n++){var o=this.visit(e[n]);void 0!==o&&(o.splice?o.length&&this.flatten(o,i):i.push(o))}return i},flatten:function(e,t){var n,r,i,o,s,a;for(t||(t=[]),r=0,n=e.length;n>r;r++)if(void 0!==(i=e[r]))if(i.splice)for(s=0,o=i.length;o>s;s++)void 0!==(a=i[s])&&(a.splice?a.length&&this.flatten(a,t):t.push(a));else t.push(i);return t}},t.exports=o},{"../tree":61}],90:[function(e,t){function c(){if(!i){i=!0;for(var e,t=r.length;t;){e=r,r=[];for(var n=-1;++n<t;)e[n]();t=r.length}i=!1}}function d(){}var n=t.exports={},r=[],i=!1;n.nextTick=function(e){r.push(e),i||setTimeout(c,0)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=d,n.addListener=d,n.once=d,n.off=d,n.removeListener=d,n.removeAllListeners=d,n.emit=d,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],91:[function(t,n){"use strict";function e(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}var r=t("asap");n.exports=function c(t){function b(e){return null===n?void o.push(e):void r(function(){var t=n?e.onFulfilled:e.onRejected;if(null!==t){var r;try{r=t(i)}catch(t){return void e.reject(t)}e.resolve(r)}else(n?e.resolve:e.reject)(i)})}function g(e){n=!1,i=e,h()}function h(){for(var e=0,t=o.length;t>e;e++)b(o[e]);o=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");var n=null,i=null,o=[],s=this;this.then=function(e,t){return new s.constructor(function(n,r){b(new function d(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}(e,t,n,r))})},e(t,function c(t){try{if(t===s)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if("function"==typeof r)return void e(r.bind(t),c,g)}n=!0,i=t,h()}catch(e){g(e)}},g)}},{asap:93}],92:[function(e,t){"use strict";function c(e){this.then=function(t){return"function"!=typeof t?this:new n(function(n,i){r(function(){try{n(t(e))}catch(e){i(e)}})})}}var n=e("./core.js"),r=e("asap");t.exports=n,c.prototype=n.prototype;var i=new c(!0),o=new c(!1),s=new c(null),a=new c(void 0),u=new c(0),l=new c("");n.resolve=function(e){if(e instanceof n)return e;if(null===e)return s;if(void 0===e)return a;if(!0===e)return i;if(!1===e)return o;if(0===e)return u;if(""===e)return l;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new n(t.bind(e))}catch(e){return new n(function(t,n){n(e)})}return new c(e)},n.all=function(e){var t=Array.prototype.slice.call(e);return new n(function(e,n){function d(i,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,function(e){d(i,e)},n)}t[i]=o,0==--r&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var r=t.length,i=0;t.length>i;i++)d(i,t[i])})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,r){e.forEach(function(e){n.resolve(e).then(t,r)})})},n.prototype.catch=function(e){return this.then(null,e)}},{"./core.js":91,asap:93}],93:[function(e,t){(function(e){function c(){for(;n.next;){var e=(n=n.next).task;n.task=void 0;var t=n.domain;t&&(n.domain=void 0,t.enter());try{e()}catch(e){if(s)throw t&&t.exit(),setTimeout(c,0),t&&t.enter(),e;setTimeout(function(){throw e},0)}t&&t.exit()}i=!1}var n={task:void 0,next:null},r=n,i=!1,o=void 0,s=!1;if(void 0!==e&&e.nextTick)s=!0,o=function(){e.nextTick(c)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,c):function(){setImmediate(c)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=c,o=function(){a.port2.postMessage(0)}}else o=function(){setTimeout(c,0)};t.exports=function d(t){r=r.next={task:t,domain:s&&e.domain,next:null},i||(i=!0,o())}}).call(this,e("_process"))},{_process:90}],94:[function(){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})})},{}],95:[function(e){e("asap"),"undefined"==typeof Promise&&(Promise=e("./lib/core.js"),e("./lib/es6-extensions.js")),e("./polyfill-done.js")},{"./lib/core.js":91,"./lib/es6-extensions.js":92,"./polyfill-done.js":94,asap:93}]},{},[2])(2)});!function(t,e){function s(t,e){for(var n in e)try{t.style[n]=e[n]}catch(t){}return t}function H(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof t}function R(t,e){if("array"!==H(e))return-1;if(e.indexOf)return e.indexOf(t);for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1}function I(){var t,e=arguments;for(t in e[1])if(e[1].hasOwnProperty(t))switch(H(e[1][t])){case"object":e[0][t]=I({},e[0][t],e[1][t]);break;case"array":e[0][t]=e[1][t].slice(0);break;default:e[0][t]=e[1][t]}return 2<e.length?I.apply(null,[e[0]].concat(Array.prototype.slice.call(e,2))):e[0]}function N(t){return 1===(t=Math.round(255*t).toString(16)).length?"0"+t:t}function S(t,e,n,o){t.addEventListener?t[o?"removeEventListener":"addEventListener"](e,n,!1):t.attachEvent&&t[o?"detachEvent":"attachEvent"]("on"+e,n)}function D(t,o){function g(t,e,n,o){return l[0|t][Math.round(Math.min((e-n)/(o-n)*z,z))]}function r(){C.legend.fps!==L&&(C.legend.fps=L,C.legend[p]=L?"FPS":"ms"),w=L?O.fps:O.duration,C.count[p]=999<w?"999+":w.toFixed(99<w?0:F.decimals)}function m(){for(c=n(),T<c-F.threshold&&(O.fps-=O.fps/Math.max(1,60*F.smoothing/F.interval),O.duration=1e3/O.fps),v=F.history;v--;)j[v]=0===v?O.fps:j[v-1],q[v]=0===v?O.duration:q[v-1];if(r(),F.heat){if(E.length)for(v=E.length;v--;)E[v].el.style[h[E[v].name].heatOn]=L?g(h[E[v].name].heatmap,O.fps,0,F.maxFps):g(h[E[v].name].heatmap,O.duration,F.threshold,0);if(C.graph&&h.column.heatOn)for(v=M.length;v--;)M[v].style[h.column.heatOn]=L?g(h.column.heatmap,j[v],0,F.maxFps):g(h.column.heatmap,q[v],F.threshold,0)}if(C.graph)for(y=0;y<F.history;y++)M[y].style.height=(L?j[y]?Math.round(b/F.maxFps*Math.min(j[y],F.maxFps)):0:q[y]?Math.round(b/F.threshold*Math.min(q[y],F.threshold)):0)+"px"}function k(){20>F.interval?(f=i(k),m()):(f=setTimeout(k,F.interval),x=i(m))}function G(t){(t=t||window.event).preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0),O.toggle()}function U(){F.toggleOn&&S(C.container,F.toggleOn,G,1),t.removeChild(C.container)}function V(){if(C.container&&U(),h=D.theme[F.theme],!(l=h.compiledHeatmaps||[]).length&&h.heatmaps.length){for(y=0;y<h.heatmaps.length;y++)for(l[y]=[],v=0;v<=z;v++){var e,n=l[y],o=v;e=.33/z*v;var a=h.heatmaps[y].saturation,i=h.heatmaps[y].lightness,c=void 0,p=void 0,u=void 0,d=u=void 0,g=c=p=void 0;g=void 0;0===(u=.5>=i?i*(1+a):i+a-i*a)?e="#000":(p=(u-(d=2*i-u))/u,g=(e*=6)-(c=Math.floor(e)),g*=u*p,0===c||6===c?(c=u,p=d+g,u=d):1===c?(c=u-g,p=u,u=d):2===c?(c=d,p=u,u=d+g):3===c?(c=d,p=u-g):4===c?(c=d+g,p=d):(c=u,p=d,u-=g),e="#"+N(c)+N(p)+N(u)),n[o]=e}h.compiledHeatmaps=l}for(var m in C.container=s(document.createElement("div"),h.container),C.count=C.container.appendChild(s(document.createElement("div"),h.count)),C.legend=C.container.appendChild(s(document.createElement("div"),h.legend)),C.graph=F.graph?C.container.appendChild(s(document.createElement("div"),h.graph)):0,E.length=0,C)C[m]&&h[m].heatOn&&E.push({name:m,el:C[m]});if(M.length=0,C.graph)for(C.graph.style.width=F.history*h.column.width+(F.history-1)*h.column.spacing+"px",v=0;v<F.history;v++)M[v]=C.graph.appendChild(s(document.createElement("div"),h.column)),M[v].style.position="absolute",M[v].style.bottom=0,M[v].style.right=v*h.column.width+v*h.column.spacing+"px",M[v].style.width=h.column.width+"px",M[v].style.height="0px";s(C.container,F),r(),t.appendChild(C.container),C.graph&&(b=C.graph.clientHeight),F.toggleOn&&("click"===F.toggleOn&&(C.container.style.cursor="pointer"),S(C.container,F.toggleOn,G))}"object"===H(t)&&t.nodeType===e&&(o=t,t=document.body),t||(t=document.body);var h,l,c,f,x,b,w,v,y,O=this,F=I({},D.defaults,o||{}),C={},M=[],z=100,E=[],A=F.threshold,P=0,T=n()-A,j=[],q=[],L="fps"===F.show;O.options=F,O.fps=0,O.duration=0,O.isPaused=0,O.tickStart=function(){P=n()},O.tick=function(){c=n(),A+=(c-T-A)/F.smoothing,O.fps=1e3/A,O.duration=P<T?A:c-P,T=c},O.pause=function(){return f&&(O.isPaused=1,clearTimeout(f),a(f),a(x),f=x=0),O},O.resume=function(){return f||(O.isPaused=0,k()),O},O.set=function(t,e){return F[t]=e,L="fps"===F.show,-1!==R(t,u)&&V(),-1!==R(t,d)&&s(C.container,F),O},O.showDuration=function(){return O.set("show","ms"),O},O.showFps=function(){return O.set("show","fps"),O},O.toggle=function(){return O.set("show",L?"ms":"fps"),O},O.hide=function(){return O.pause(),C.container.style.display="none",O},O.show=function(){return O.resume(),C.container.style.display="block",O},O.destroy=function(){O.pause(),U(),O.tick=O.tickStart=function(){}},V(),k()}var n,o=t.performance;n=o&&(o.now||o.webkitNow)?o[o.now?"now":"webkitNow"].bind(o):function(){return+new Date};for(var a=t.cancelAnimationFrame||t.cancelRequestAnimationFrame,i=t.requestAnimationFrame,h=0,l=0,c=(o=["moz","webkit","o"]).length;l<c&&!a;++l)i=(a=t[o[l]+"CancelAnimationFrame"]||t[o[l]+"CancelRequestAnimationFrame"])&&t[o[l]+"RequestAnimationFrame"];a||(i=function(e){var o=n(),a=Math.max(0,16-(o-h));return h=o+a,t.setTimeout(function(){e(o+a)},a)},a=function(t){clearTimeout(t)});var p="string"===H(document.createElement("div").textContent)?"textContent":"innerText";D.extend=I,window.FPSMeter=D,D.defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20};var u=["toggleOn","theme","heat","graph","history"],d="position zIndex left top right bottom margin".split(" ")}(window),function(t,e){e.theme={};var n=e.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};e.theme.dark=e.extend({},n,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"#222",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),e.theme.light=e.extend({},n,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),e.theme.colorful=e.extend({},n,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),e.theme.transparent=e.extend({},n,{heatmaps:[{saturation:.8,lightness:.5}],container:{padding:0,color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.5)"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},legend:{padding:"0 5px",height:"40px",lineHeight:"42px"},graph:{height:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}(window,FPSMeter);var Floor=pc.createScript("floor");Floor.attributes.add("speed",{type:"number",default:60}),Floor.prototype.initialize=function(){this.vec=new pc.Vec4(8,8,.5,0)},Floor.prototype.update=function(e){if(this.speed){this.vec.w=this.vec.w-1e3*this.speed/60/60*e,this.vec.w<0&&(this.vec.w+=1);var t=this.entity.model.meshInstances[0].material;t.diffuseMapTiling.set(this.vec.x,this.vec.y),t.diffuseMapOffset.set(this.vec.z,this.vec.w),t.update()}};var Glass=pc.createScript("glass");Glass.attributes.add("onlyMaterial",{type:"string",default:""}),Glass.prototype.initialize=function(){for(var r=this.entity.model.model.meshInstances,a=(pc.shaderChunks,0);a<r.length;a++){var o=r[a].material;""!==this.onlyMaterial&&this.onlyMaterial!==o.name||(o.chunks.endPS="gl_FragColor.rgb = combineColor();        gl_FragColor.rgb += getEmission();        gl_FragColor.rgb = addFog(gl_FragColor.rgb);        float aboveOne = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721)) + 1.0;        gl_FragColor.rgb = toneMap(gl_FragColor.rgb);        gl_FragColor.rgb = gammaCorrectOutput(gl_FragColor.rgb);",o.chunks.glossTexConstPS="uniform sampler2D texture_glossMap;        uniform float material_shininess;        void getGlossiness() {\n            dGlossiness = saturate(material_shininess + texture2D(texture_glossMap, $UV).$CH);\n        }",o.chunks.endPS+="dAlpha *= aboveOne;",o.update())}};var MouseLook=pc.createScript("mouseLook");MouseLook.attributes.add("weight",{type:"number",default:1}),MouseLook.attributes.add("sensivity",{type:"number",default:.5}),MouseLook.attributes.add("easing",{type:"number",default:.2}),MouseLook.attributes.add("maxPitchUp",{type:"number",default:25}),MouseLook.attributes.add("maxPitchDown",{type:"number",default:25}),MouseLook.prototype.postInitialize=function(){var t=this.app;this.oldQuat=new pc.Quat,this.steerAngle=0,this.steerAngleSmooth=0,t._mouseLook=this,window.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("touchstart",this.onTouchStart.bind(this)),window.addEventListener("touchmove",this.onTouchMove.bind(this)),window.addEventListener("touchend",this.onTouchEnd.bind(this)),this.rotating=!1,this.steerSelected=!1,this.pitch=0,this.yaw=0,this.pitchTarget=0,this.yawTarget=0,this.m={x:0,y:0},this.ml={x:0,y:0},this.steer=t.root.findByName("steerParent"),this.wFL=t.root.findByName("front-left"),this.wFR=t.root.findByName("front-right"),this.steerRot=this.steer.getLocalRotation().clone(),this.wheelRot=this.wFL.getLocalRotation().clone(),this.touchInd=-1,this.turned=!1,this.enabled=!1},MouseLook.prototype.intersectSphere=function(t,e,i){t.sub(i);var o=t.dot(e);return o*o-(t.dot(t)-i.w*i.w)>=0},MouseLook.prototype.checkSteer=function(t){var e=this.app,i=e.scene._activeCamera,o=i._node.getPosition().clone(),s=i.screenToWorld(t.clientX*e.graphicsDevice.maxPixelRatio,t.clientY*e.graphicsDevice.maxPixelRatio,1,e.graphicsDevice.width,e.graphicsDevice.height).sub(o).normalize(),h=new pc.Vec4(.381,.776,.491,.2075);this.steerSelected=this.intersectSphere(o,s,h)},MouseLook.prototype.onMouseDown=function(t){this.checkSteer(t),this.rotating=!0,this.m.x=t.clientX,this.m.y=t.clientY,this.ml.x=this.m.x,this.ml.y=this.m.y,t.preventDefault(),t.stopPropagation()},MouseLook.prototype.onMouseMove=function(t){this.m.x=t.clientX,this.m.y=t.clientY},MouseLook.prototype.onMouseUp=function(t){this.rotating=!1},MouseLook.prototype.onTouchStart=function(t){if(this.rotating=!0,-1===this.touchInd&&t.touches.length){var e=t.touches[0];this.touchInd=e.identifier,this.checkSteer(e),this.m.x=e.clientX,this.m.y=e.clientY,this.ml.x=this.m.x,this.ml.y=this.m.y,t.preventDefault(),t.stopPropagation()}},MouseLook.prototype.onTouchMove=function(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e];if(i.identifier===this.touchInd)return this.m.x=i.clientX,void(this.m.y=i.clientY)}},MouseLook.prototype.onTouchEnd=function(t){this.rotating=!1,this.ratateEnd=Date.now(),this.touchInd=-1},MouseLook.prototype.update=function(t){var e=this.app;if(this.rotating){var i=this.ml.x-this.m.x,o=this.ml.y-this.m.y;if(this.steerSelected){if(this.steerAngle+=.3*i,this.steerAngle=pc.math.clamp(this.steerAngle,-34,34),!this.turned){this.turned=!0;var s=e.root.findByName("ground");s.script.floor.speed=0,s.model.model.meshInstances[0].material.setParameter("texture_diffuseMap",e.assets.get(2356114).resource)}}else this.pitchTarget=Math.max(-this.maxPitchUp,Math.min(this.maxPitchDown,this.pitchTarget+o*this.sensivity*this.weight)),this.yawTarget+=i*this.sensivity*this.weight;this.ml.x=this.m.x,this.ml.y=this.m.y}this.steerAngleSmooth=pc.math.lerp(this.steerAngleSmooth,this.steerAngle,10*t);var h=(new pc.Quat).setFromAxisAngle(pc.Vec3.FORWARD,this.steerAngleSmooth),n=this.steer.getLocalRotation();n.mul2(this.steerRot,h),this.steer.setLocalRotation(n),h=(new pc.Quat).setFromAxisAngle(pc.Vec3.UP,this.steerAngleSmooth),(n=this.wFL.getLocalRotation()).mul2(this.wheelRot,h),this.wFL.setLocalRotation(n),this.wFR.setLocalRotation(n),this.pitch+=(this.pitchTarget-this.pitch)*this.easing,this.yaw+=(this.yawTarget-this.yaw)*this.easing,this.oldQuat.copy(this.entity.getRotation()),this.entity.setEulerAngles(this.pitch,this.yaw+180,0),this.oldQuat.slerp(this.oldQuat,this.entity.getRotation(),this.weight),this.entity.setRotation(this.oldQuat)};var Paint=pc.createScript("paint");Paint.attributes.add("materialAssets",{type:"asset",assetType:"material",array:!0}),Paint.prototype.initialize=function(){var e=this.app;this.percent=0,e._paint=this,this.materials={};for(var s=0;s<this.materialAssets.length;s++){var i=this.materialAssets[s];this.materials[i.name]=i.resource}for(var t in this.stateChanged=!0,this.state={exterior:{name:"elegant",percent:0},interior:{name:"elegant",percent:0}},this.paramsUniforms={diffuse:"material_diffuse",metalness:"material_metalness",shininess:"material_shininess",reflectivity:"material_reflectivity",clearCoat:"material_clearCoatSpecularity",clearCoatGlossiness:"material_clearCoatGlossiness",emissive:"material_emissive"},this.params={exterior:{white:{"carpaint-body":{diffuse:[140,140,140],metalness:.001,shininess:50,reflectivity:1,clearCoat:.1,clearCoatGlossiness:.9},"carpaint-black-body":{shininess:10,reflectivity:.1,clearCoat:.1,clearCoatGlossiness:1},"carpaint-top-body":{diffuse:[0,0,0],metalness:.5,shininess:100,reflectivity:.1},"plastic-blue-body":{diffuse:[0,91,220]},"glass-body":{shininess:100,reflectivity:.1,clearCoat:.1,clearCoatGlossiness:1},"brakes-wheel":{diffuse:[255,255,255]},"plastic-blue-wheel":{diffuse:[0,91,220]},"plastic-blue-interior":{diffuse:[0,91,220]},"cloth-blue-interior":{diffuse:[0,91,220]}},elegant:{"carpaint-body":{diffuse:[72,72,72],metalness:1,shininess:30,reflectivity:1,clearCoat:.1,clearCoatGlossiness:.9},"carpaint-black-body":{shininess:10,reflectivity:.5,clearCoat:.02,clearCoatGlossiness:.9},"carpaint-top-body":{diffuse:[0,0,0],metalness:.5,shininess:50,reflectivity:.5},"glass-body":{shininess:10,reflectivity:.5,clearCoat:.02,clearCoatGlossiness:.9},"plastic-blue-body":{diffuse:[0,91,220]},"brakes-wheel":{diffuse:[128,128,128]},"plastic-blue-wheel":{diffuse:[0,91,220]},"plastic-blue-interior":{diffuse:[0,91,220]},"cloth-blue-interior":{diffuse:[0,91,220]}},blue:{"carpaint-body":{diffuse:[36,89,174],metalness:1,shininess:30,reflectivity:1,clearCoat:.1,clearCoatGlossiness:.95},"carpaint-black-body":{shininess:10,reflectivity:.1,clearCoat:.1,clearCoatGlossiness:1},"carpaint-top-body":{diffuse:[0,0,0],metalness:.5,shininess:100,reflectivity:.1},"plastic-blue-body":{diffuse:[48,48,48]},"glass-body":{shininess:10,reflectivity:.1,clearCoat:.1,clearCoatGlossiness:1},"brakes-wheel":{diffuse:[0,91,255]},"plastic-blue-wheel":{diffuse:[0,91,255]},"plastic-blue-interior":{diffuse:[0,91,220]},"cloth-blue-interior":{diffuse:[0,91,220]}},black:{"carpaint-body":{diffuse:[0,0,0],metalness:.5,shininess:30,reflectivity:.2,clearCoat:.03,clearCoatGlossiness:.95},"carpaint-black-body":{shininess:30,reflectivity:.2,clearCoat:.03,clearCoatGlossiness:.95},"plastic-blue-body":{diffuse:[255,128,0]},"carpaint-top-body":{diffuse:[255,128,0],metalness:.1,shininess:90,reflectivity:.5},"glass-body":{shininess:30,reflectivity:.2,clearCoat:.03,clearCoatGlossiness:1},"brakes-wheel":{diffuse:[255,128,0]},"plastic-blue-wheel":{diffuse:[255,128,0]},"plastic-blue-interior":{diffuse:[255,128,0]},"cloth-blue-interior":{diffuse:[255,128,0]}}},interior:{white:{"panel-top-interior":{diffuse:[16,16,16],metalness:.2,shininess:30,reflectivity:.7},"leather-primary-interior":{diffuse:[195,173,152],metalness:.1,shininess:10},"leather-second-interior":{diffuse:[195,173,152],metalness:.1,shininess:20},"leather-third-interior":{diffuse:[159,134,110],metalness:0,shininess:0},"plastic-dark-interior":{diffuse:[32,32,32],metalness:0,shininess:30,reflectivity:.3},"plastic-top-interior":{diffuse:[211,195,180],metalness:.1,shininess:85,reflectivity:.3},"plastic-shine-interior":{diffuse:[64,64,64],metalness:.5,shininess:80},"metal-shine-interior":{diffuse:[193,193,193],metalness:.9,shininess:70},"rubber-interior":{diffuse:[16,16,16],metalness:0,shininess:0},"labels-interior":{emissive:[255,255,255]},"leather-second-door":{diffuse:[195,173,152],metalness:.1,shininess:10},"leather-brown-steering":{diffuse:[32,32,32],metalness:.4,shininess:40},"labels-steering":{emissive:[255,255,255]}},elegant:{"panel-top-interior":{diffuse:[57,41,34],metalness:.3,shininess:20,reflectivity:.5},"leather-primary-interior":{diffuse:[57,41,34],metalness:.3,shininess:20},"leather-second-interior":{diffuse:[195,173,152],metalness:.1,shininess:20},"leather-third-interior":{diffuse:[83,69,64],metalness:.3,shininess:10},"plastic-dark-interior":{diffuse:[50,38,32],metalness:0,shininess:8,reflectivity:1},"plastic-top-interior":{diffuse:[50,38,32],metalness:0,shininess:8,reflectivity:1},"plastic-shine-interior":{diffuse:[64,64,64],metalness:0,shininess:80},"metal-shine-interior":{diffuse:[193,193,193],metalness:.9,shininess:70},"rubber-interior":{diffuse:[44,44,44],metalness:0,shininess:0},"labels-interior":{emissive:[255,64,0]},"leather-second-door":{diffuse:[195,173,152],metalness:.1,shininess:20},"leather-brown-steering":{diffuse:[57,41,34],metalness:.3,shininess:20},"labels-steering":{emissive:[255,64,0]}},black:{"panel-top-interior":{diffuse:[16,16,16],metalness:.4,shininess:40,reflectivity:.5},"leather-primary-interior":{diffuse:[16,16,16],metalness:.4,shininess:40},"leather-second-interior":{diffuse:[8,8,8],metalness:.2,shininess:0},"leather-third-interior":{diffuse:[16,16,16],metalness:.4,shininess:40},"plastic-dark-interior":{diffuse:[0,0,0],metalness:0,shininess:30,reflectivity:.3},"plastic-top-interior":{diffuse:[0,0,0],metalness:0,shininess:30,reflectivity:.3},"plastic-shine-interior":{diffuse:[16,16,16],metalness:.5,shininess:80},"metal-shine-interior":{diffuse:[96,96,96],metalness:.9,shininess:70},"rubber-interior":{diffuse:[0,0,0],metalness:0,shininess:0},"labels-interior":{emissive:[0,96,255]},"leather-second-door":{diffuse:[8,8,8],metalness:.2,shininess:0},"leather-brown-steering":{diffuse:[16,16,16],metalness:.4,shininess:40},"labels-steering":{emissive:[0,96,255]}}}},this.params.exterior.elegant){var a=this.params.exterior.elegant[t];for(var r in a){var n=this.paramsUniforms[r];if(Array.isArray(a[r])){var l=this.materials[t][r];l.r=a[r][0]/255,l.g=a[r][1]/255,l.b=a[r][2]/255,l.uniform||(l.uniform=new Float32Array(3)),l.uniform[0]=Math.pow(l.r,2.2),l.uniform[1]=Math.pow(l.g,2.2),l.uniform[2]=Math.pow(l.b,2.2),this.materials[t].setParameter(n,l.uniform)}else{this.materials[t][r]=a[r];var f=this.materials[t][r];"shininess"===r&&(f/=100),this.materials[t].setParameter(n,f),"clearCoat"===r&&this.materials[t].setParameter("material_clearCoatReflectivity",f)}}this.materials[t].update()}},Paint.prototype.setState=function(e,s){this.state[e]!==s&&(this.state[e].name=s,this.state[e].percent=0,this.stateChanged=!0)},Paint.prototype.update=function(e){for(var s in this.state){var i=this.state[s];if(!(i.percent>=1))for(var t in i.percent=Math.min(1,i.percent+e),this.params[s][i.name]){var a=this.params[s][i.name][t];for(var r in a){var n=this.paramsUniforms[r];if(Array.isArray(a[r])){var l=this.materials[t][r];l.r=pc.math.lerp(l.r,a[r][0]/255,i.percent),l.g=pc.math.lerp(l.g,a[r][1]/255,i.percent),l.b=pc.math.lerp(l.b,a[r][2]/255,i.percent),l.uniform||(l.uniform=new Float32Array(3)),l.uniform[0]=Math.pow(l.r,2.2),l.uniform[1]=Math.pow(l.g,2.2),l.uniform[2]=Math.pow(l.b,2.2),this.materials[t].setParameter(n,l.uniform)}else{this.materials[t][r]=pc.math.lerp(this.materials[t][r],a[r],i.percent);var f=this.materials[t][r];"shininess"===r&&(f/=100),this.materials[t].setParameter(n,f),"clearCoat"===r&&this.materials[t].setParameter("material_clearCoatReflectivity",f)}}this.stateChanged&&this.materials[t].update()}}this.stateChanged=!1};var PatchSkybox=pc.createScript("patchSkybox");PatchSkybox.prototype.initialize=function(){pc.shaderChunks.skyboxHDRPS="    varying vec3 vViewDir;    uniform samplerCube texture_cubeMap;    void main(void) {        vec3 color = processEnvironment($textureCubeSAMPLE(texture_cubeMap, fixSeamsStatic(vViewDir, $FIXCONST)).rgb);        color = toneMap(color * 0.2);        color = gammaCorrectOutput(color);        gl_FragColor = vec4(color, 1.0);    }"};pc.extend(pc.posteffect,function(){var e=15;function computeGaussian(e,t){return 1/Math.sqrt(2*Math.PI*t)*Math.exp(-e*e/(2*t*t))}function calculateBlurValues(t,s,r,a,o){t[0]=computeGaussian(0,o),s[0]=0,s[1]=0;var i,u,l=t[0];for(i=0,u=Math.floor(e/2);i<u;i++){var f=computeGaussian(i+1,o);t[2*i]=f,t[2*i+1]=f,l+=2*f;var n=2*i+1.5;s[4*i]=r*n,s[4*i+1]=a*n,s[4*i+2]=-r*n,s[4*i+3]=-a*n}for(i=0,u=t.length;i<u;i++)t[i]/=l}var t=function(t){var s={aPosition:pc.gfx.SEMANTIC_POSITION},r=["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition + 1.0) * 0.5;","}"].join("\n"),a=["precision "+t.precision+" float;","","varying vec2 vUv0;","","uniform sampler2D uBaseTexture;","uniform float uBloomThreshold;","","void main(void)","{","    vec4 color = texture2D(uBaseTexture, vUv0);","","    gl_FragColor = clamp((color - uBloomThreshold) / (1.0 - uBloomThreshold), 0.0, 1.0);","}"].join("\n"),o=["precision "+t.precision+" float;","","#define SAMPLE_COUNT "+e,"","varying vec2 vUv0;","","uniform float uMaskMix;","uniform sampler2D uBloomTexture;","uniform vec2 uBlurOffsets[SAMPLE_COUNT];","uniform float uBlurWeights[SAMPLE_COUNT];","uniform sampler2D uMaskTexture;","","void main(void)","{","    vec4 color = vec4(0.0);","    float maskFactor = texture2D(uMaskTexture, vUv0).r;","    maskFactor = mix(1.0, maskFactor, uMaskMix);","    for (int i = 0; i < SAMPLE_COUNT; i++)","    {","        color += texture2D(uBloomTexture, vUv0 + uBlurOffsets[i] * maskFactor) * uBlurWeights[i];","    }","","    gl_FragColor = color;","}"].join("\n"),i=["precision "+t.precision+" float;","","varying vec2 vUv0;","","uniform float uBloomIntensity;","uniform sampler2D uBaseTexture;","uniform sampler2D uBloomTexture;","uniform sampler2D uMaskTexture;","uniform float uDarkness;","uniform float uOffset;","uniform float uAberration;","","void main(void)","{","    vec4 bloom = texture2D(uBloomTexture, vUv0) * uBloomIntensity;","    vec4 mask = texture2D(uMaskTexture, vUv0);","    vec2 uv = (vUv0 - vec2(0.5));","    float f = dot(uv, uv);","    bloom *= mask;","    vec4 texelA = texture2D(uBaseTexture, vUv0 - (uv * uAberration * f / 100.0));","    vec4 texelB = texture2D(uBaseTexture, vUv0 + (uv * uAberration * f / 100.0));","    vec4 base = vec4(texelA.r, texelB.gb, 1.0);","","    base *= (1.0 - clamp(bloom, 0.0, 1.0));","    float dark = dot(uv * uOffset, uv * uOffset);","","    gl_FragColor = vec4(mix(base.rgb + bloom.rgb, vec3(1.0 - uDarkness), dark), 1.0);","}"].join("\n");this.extractShader=new pc.gfx.Shader(t,{attributes:s,vshader:r,fshader:a}),this.blurShader=new pc.gfx.Shader(t,{attributes:s,vshader:r,fshader:o}),this.combineShader=new pc.gfx.Shader(t,{attributes:s,vshader:r,fshader:i});t.width,t.height;this.targets=[];for(var u=0;u<2;u++){var l=new pc.gfx.Texture(t,{format:pc.gfx.PIXELFORMAT_R8_G8_B8,width:Math.pow(2,Math.round(Math.log(t.width)/Math.log(2))),height:Math.pow(2,Math.round(Math.log(t.height)/Math.log(2)))});l.minFilter=pc.gfx.FILTER_LINEAR_MIPMAP_LINEAR,l.magFilter=pc.gfx.FILTER_LINEAR,l.addressU=pc.gfx.ADDRESS_CLAMP_TO_EDGE,l.addressV=pc.gfx.ADDRESS_CLAMP_TO_EDGE;var f=new pc.gfx.RenderTarget(t,l,{depth:!1});this.targets.push(f)}this.bloomThreshold=.25,this.blurAmount=4,this.bloomIntensity=1.25,this.maskTexture=null,this.maskMix=.5,this.offset=1,this.darkness=1,this.aberration=1,this.sampleWeights=new Float32Array(e),this.sampleOffsets=new Float32Array(2*e)};return(t=pc.inherits(t,pc.posteffect.PostEffect)).prototype=pc.extend(t.prototype,{render:function(e,t,s){var r=this.device,a=r.scope;a.resolve("uBloomThreshold").setValue(this.bloomThreshold),a.resolve("uBaseTexture").setValue(e.colorBuffer),pc.posteffect.drawFullscreenQuad(r,this.targets[0],this.vertexBuffer,this.extractShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,1/this.targets[1].width,0,this.blurAmount),a.resolve("uBlurWeights[0]").setValue(this.sampleWeights),a.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),a.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),a.resolve("uMaskMix").setValue(this.maskMix),a.resolve("uMaskTexture").setValue(this.maskTexture),pc.posteffect.drawFullscreenQuad(r,this.targets[1],this.vertexBuffer,this.blurShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,0,1/this.targets[0].height,this.blurAmount),a.resolve("uBlurWeights[0]").setValue(this.sampleWeights),a.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),a.resolve("uMaskMix").setValue(this.maskMix),a.resolve("uMaskTexture").setValue(this.maskTexture),a.resolve("uBloomTexture").setValue(this.targets[1].colorBuffer),pc.posteffect.drawFullscreenQuad(r,this.targets[0],this.vertexBuffer,this.blurShader),a.resolve("uBloomIntensity").setValue(this.bloomIntensity),a.resolve("uMaskMix").setValue(this.maskMix),a.resolve("uMaskTexture").setValue(this.maskTexture),a.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),a.resolve("uOffset").setValue(this.offset),a.resolve("uDarkness").setValue(this.darkness),a.resolve("uAberration").setValue(this.aberration),pc.posteffect.drawFullscreenQuad(r,t,this.vertexBuffer,this.combineShader,s)}}),{BloomMasked:t}}());var BloomMasked=pc.createScript("bloomMasked");BloomMasked.attributes.add("bloomIntensity",{type:"number",default:1,slider:!0,min:0,max:.5}),BloomMasked.attributes.add("bloomThreshold",{type:"number",default:.25,slider:!0,min:0,step:.01,max:1}),BloomMasked.attributes.add("blurAmount",{type:"number",default:4,slider:!1,min:1}),BloomMasked.attributes.add("maskTexture",{type:"asset",assetType:"texture",array:!1}),BloomMasked.attributes.add("maskMix",{type:"number",default:.5,slider:!0,min:0,step:.01,max:1}),BloomMasked.attributes.add("offset",{type:"number",default:.5,slider:!1,min:0,step:.05,precision:5}),BloomMasked.attributes.add("darkness",{type:"number",default:1,slider:!1,step:.05,precision:5}),BloomMasked.attributes.add("aberration",{type:"number",default:.5,slider:!1,step:.1,precision:5}),BloomMasked.prototype.initialize=function(){var e=this.app;this.effect=new pc.posteffect.BloomMasked(e.graphicsDevice),this.on("set",this.onAttributeChanged,this),this.effect.bloomThreshold=this.bloomThreshold,this.effect.blurAmount=this.blurAmount,this.effect.bloomIntensity=this.bloomIntensity,this.effect.maskTexture=e.assets.get(this.maskTexture[0]).resource,this.effect.maskMix=this.maskMix,this.effect.offset=this.offset,this.effect.darkness=this.darkness,this.effect.aberration=this.aberration,this.on("attr",function(t,s,r){this.effect[t]="maskTexture"===t?e.assets.get(newValue[0]).resource:newValue}),this.on("enable",function(){this.entity.camera.postEffects.addEffect(this.effect)}),this.on("disable",function(){this.entity.camera.postEffects.removeEffect(this.effect)})};var Rotation=pc.createScript("rotation");Rotation.attributes.add("sensivity",{type:"number",default:.5}),Rotation.attributes.add("easing",{type:"number",default:.2}),Rotation.attributes.add("maxPitchUp",{type:"number",default:25}),Rotation.attributes.add("maxPitchDown",{type:"number",default:25}),Rotation.prototype.initialize=function(){var t=this.app;this.weight=1,this.oldQuat=new pc.Quat,this.pitchS=-20,this.yawS=10,t._carPivotRotation=this,window.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("touchstart",this.onTouchStart.bind(this)),window.addEventListener("touchmove",this.onTouchMove.bind(this)),window.addEventListener("touchend",this.onTouchEnd.bind(this)),this.rotating=!1,this.pitch=0,this.yaw=-15,this.pitchTarget=0,this.yawTarget=-15,this.m={x:0,y:0},this.ml={x:0,y:0},this.entity.setEulerAngles(this.pitch,this.yaw,0),this.rotateEnd=0,this.touchInd=-1},Rotation.prototype.onMouseDown=function(t){this.rotating=!0,this.m.x=t.clientX,this.m.y=t.clientY,this.ml.x=this.m.x,this.ml.y=this.m.y,t.preventDefault(),t.stopPropagation()},Rotation.prototype.onMouseMove=function(t){this.m.x=t.clientX,this.m.y=t.clientY},Rotation.prototype.onMouseUp=function(t){this.rotating=!1,this.rotateEnd=Date.now()},Rotation.prototype.onTouchStart=function(t){if(this.rotating=!0,-1===this.touchInd&&t.touches.length){var i=t.touches[0];this.touchInd=i.identifier,this.m.x=i.clientX,this.m.y=i.clientY,this.ml.x=this.m.x,this.ml.y=this.m.y,t.preventDefault(),t.stopPropagation()}},Rotation.prototype.onTouchMove=function(t){for(var i=0;i<t.changedTouches.length;i++){var h=t.changedTouches[i];if(h.identifier===this.touchInd)return this.m.x=h.clientX,void(this.m.y=h.clientY)}},Rotation.prototype.onTouchEnd=function(t){this.rotating=!1,this.ratateEnd=Date.now(),this.touchInd=-1},Rotation.prototype.update=function(t){if(this.rotating){var i=this.ml.x-this.m.x,h=this.ml.y-this.m.y;this.pitchTarget=Math.max(-this.maxPitchUp,Math.min(this.maxPitchDown,this.pitchTarget+h*this.sensivity)),this.yawTarget+=i*this.sensivity,this.ml.x=this.m.x,this.ml.y=this.m.y}else Date.now()-this.rotateEnd>1e3&&(this.yawTarget+=10*t*Math.min(1,(Date.now()-this.rotateEnd-1e3)/2e3));Math.abs(this.pitch-this.pitchTarget)+Math.abs(this.yaw-this.yawTarget)>.1&&(this.pitch+=(this.pitchTarget-this.pitch)*this.easing,this.yaw+=(this.yawTarget-this.yaw)*this.easing,this.oldQuat.copy(this.entity.getRotation()),this.entity.setEulerAngles(this.pitch+this.pitchS,this.yaw+this.yawS,0),this.oldQuat.slerp(this.oldQuat,this.entity.getRotation(),this.weight),this.entity.setRotation(this.oldQuat))};var Ui=pc.createScript("ui");Ui.attributes.add("htmlSocial",{type:"asset",assetType:"html",array:!1}),Ui.attributes.add("cssUi",{type:"asset",assetType:"css",array:!1}),Ui.attributes.add("disabled",{type:"boolean",default:!1}),Ui.prototype.initialize=function(){var e=this.app;if(!this.disabled){var t=document.createElement("style");t.innerHTML=css,less.render(this.cssUi.resource,function(e,a){if(e)return console.error(e);t.innerHTML=a.css}),document.querySelector("head").appendChild(t),this.cssUi.on("load",function(){less.render(this.cssUi.resource,function(e,a){if(e)return console.error(e);t.innerHTML=a.css})});var a=document.createElement("div");a.innerHTML=this.htmlSocial.resource,a=a.firstChild,document.body.appendChild(a);for(var s=function(e){return function(t){t.stopPropagation();var a=screen.width/2-320,s=screen.height/2-190,r=encodeURIComponent("http://car.playcanvas.com/"),i=encodeURIComponent("Interactive BMW i8 right in your Browser! http://car.playcanvas.com/ Powered by @PlayCanvas #webgl #3d");switch(e){case"facebook":r="http://facebook.com/sharer.php?u="+r+"&t="+i;break;case"twitter":r="https://twitter.com/intent/tweet?text="+i}var n=window.open(r,"name","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=640, height=380, top="+s+", left="+a);window.focus&&n&&n.focus()}},r=a.querySelectorAll(".share"),i=0;i<r.length;i++)r[i].addEventListener("click",s(r[i].getAttribute("network")),!1),r[i].addEventListener("touchstart",s(r[i].getAttribute("network")),!1);var n=document.createElement("a");n.href="http://guanfu.org#www.thefwa.com/site/next-generation-car-configurator",n.target="_blank",n.id="fwa",document.body.appendChild(n),n.addEventListener("touchstart",function(e){e.stopPropagation()},!1);var o=document.createElement("a");o.href="http://guanfu.org#playcanvas.com",o.target="_blank",o.id="powered",document.body.appendChild(o),o.addEventListener("touchstart",function(e){e.stopPropagation()},!1);var d=document.createElement("div");d.id="button",document.body.appendChild(d);var c=function(t){e._openDoor.toggle(),t.preventDefault(),t.stopPropagation()};d.addEventListener("touchstart",c,!1),d.addEventListener("click",c,!1);var l=document.createElement("div");l.id="enterVr",l.textContent="VR",document.body.appendChild(l);var p=function(t){l.classList.contains("disabled")||(e.fire("vr:start"),t.preventDefault(),t.stopPropagation())};l.addEventListener("touchstart",p,!1),l.addEventListener("click",p,!1),this.app.xr.supported&&this.app.xr.isAvailable(pc.XRTYPE_VR)||l.classList.add("disabled"),this.app.xr.on("available:"+pc.XRTYPE_VR,function(){this.app.xr.supported&&this.app.xr.isAvailable(pc.XRTYPE_VR)?l.classList.remove("disabled"):l.classList.add("disabled")});var u=document.createElement("div");u.classList.add("presets","exterior"),document.body.appendChild(u);var v=document.createElement("div");v.classList.add("presets","interior"),document.body.appendChild(v);var h={exterior:u,interior:v},m={exterior:{white:{first:"#e6e6e6",second:"#5593f7"},elegant:{first:"#babdc6",second:"#5593f7"},blue:{first:"#5593f7",second:"#585b5f"},black:{first:"#1a1a1a",second:"#eab055"}},interior:{white:{first:"#e7dcd0",second:"#414b58"},elegant:{first:"#513b32",second:"#d7c4b0"},black:{first:"#414b58",second:"#1c2631"}}},b={exterior:null,interior:null},f=function(t){b[this.styleType].classList.remove("active"),b[this.styleType]=this,b[this.styleType].classList.add("active"),e._paint.setState(this.styleType,this.styleName),t.stopPropagation()};for(var y in m)for(var L in m[y]){var g=document.createElement("div");if(g.classList.add("preset"),g.styleName=L,g.styleType=y,"elegant"===L&&(b[y]=g,g.classList.add("active")),h[y].appendChild(g),"exterior"===y){var E=document.createElement("div");E.classList.add("first"),E.style.backgroundColor=m[y][L].first,E.style.borderColor=m[y][L].first,g.appendChild(E);var w=document.createElement("div");w.classList.add("second"),w.style.backgroundColor=m[y][L].second,w.style.borderColor=m[y][L].second,g.appendChild(w)}else{var C=document.createElement("div");C.classList.add("color"),C.style.backgroundColor=m[y][L].second,C.style.borderColor=m[y][L].first,g.appendChild(C)}g.addEventListener("click",f,!1),g.addEventListener("touchstart",f,!1)}e._openDoor.entity.on("stateStart",function(){d.classList.add("transition"),l.classList.remove("active")}),e._openDoor.entity.on("state",function(e){1===e?(l.classList.add("active"),d.classList.add("active")):(l.classList.remove("active"),d.classList.remove("active")),d.classList.remove("transition")})}};var Augment=pc.createScript("augment");Augment.attributes.add("tag",{type:"string",default:""}),Augment.attributes.add("func",{type:"string",default:""}),Augment.attributes.add("offset",{type:"number",default:0}),Augment.prototype.postInitialize=function(){var t=this,e=this.app,i=document.getElementById("augmented");if(null===i){(i=document.createElement("div")).id="augmented";var n=document.getElementById("application-canvas").nextSibling;n?document.body.insertBefore(i,n):document.body.appendChild(i);var s=e.assets.get(2356385).resource,a=document.createElement("style");a.innerHTML=s,document.head.appendChild(a)}var d=e.root.findByName("augmented").script.augmented;d.add(this),this.state=!1,this.point=new pc.Vec3,this.element=document.createElement("div"),this.element.classList.add("item"),i.appendChild(this.element);var o=document.createElement("inner");if(o.classList.add("inner"),this.element.appendChild(o),this.func){var h=function(e){t.entity.enabled&&d.functions[t.func]&&(d.functions[t.func](),e.stopPropagation())};this.element.addEventListener("click",h,!1),this.element.addEventListener("touchstart",h,!1)}this.camera=e.root.findByName("camera-demo"),this.hidden=0,this.on("disable",function(){this.state&&(this.state=!1,this.element.classList.remove("active"),this.hidden=Date.now())})},Augment.prototype.postUpdate=function(){this.point.copy(this.entity.getPosition()).sub(this.camera.getPosition()).normalize();var t=this.entity.up.dot(this.point)-this.offset,e=this.camera.forward.dot(this.point);(t<=0||e<=.2)&&this.state?(this.state=!1,this.element.classList.remove("active"),this.hidden=Date.now(),e<=.2&&(this.element.style.display="none")):t>0&&e>.2&&!this.state&&(this.state=!0,this.element.style.display="",this.element.classList.add("active")),(this.state||Date.now()-this.hidden<200)&&(this.camera.camera.worldToScreen(this.entity.getPosition(),this.point),this.element.style.transform="translate("+this.point.x+"px,"+this.point.y+"px) rotate(45deg)",this.element.style.webkitTransform="translate("+this.point.x+"px,"+this.point.y+"px) rotate(45deg)")};var BlobType=pc.createScript("blob");BlobType.attributes.add("asset",{type:"asset",assetType:"texture",array:!1}),BlobType.attributes.add("scale",{type:"number",default:1}),BlobType.attributes.add("opacity",{type:"number",default:1,slider:!0,min:0,max:1}),BlobType.prototype.initialize=function(){var t=this.app,e=this;this.texture=null,this.asset&&(this.textureAsset=this.asset,this.textureAsset.resource?this.setTexture(this.textureAsset.resource):(this.textureAsset.once("load",function(t){e.setTexture(t.resource),e.entity.fire("texture")}),t.assets.load(this.textureAsset)),this.opacityOld=this.opacity,this.scaleOld=this.scale)},BlobType.prototype.setTexture=function(t){this.texture=t,this.entity.model.model.meshInstances[0].setParameter("texture_diffuseMap",this.texture),this.entity.model.model.meshInstances[0].setParameter("opacity",this.opacity),this.entity.model.model.meshInstances[0].setParameter("scale",this.scale)},BlobType.prototype.update=function(t){this.opacityOld!==this.opacity&&(this.opacityOld=this.opacity,this.entity.model.model.meshInstances[0].setParameter("opacity",this.opacity)),this.scaleOld!==this.scale&&(this.scaleOld=this.scale,this.entity.model.model.meshInstances[0].setParameter("scale",this.scale))};var Blobs=pc.createScript("blobs"),vecA=new pc.Vec3,vecB=new pc.Vec3(0,0,1);Blobs.prototype.initialize=function(){var e,t=this.app,i=this;this.list=[],vecA.set(0,1,0),this.material=new pc.BasicMaterial,this.material.updateShader=function(e){this.shader=new pc.Shader(e,{attributes:{vertex_position:"POSITION"},vshader:"                 attribute vec3 vertex_position;\n                 uniform mat4 matrix_model;\n                 uniform mat4 matrix_projection;\n                 uniform mat4 matrix_view;\n                 uniform mat3 matrix_normal;\n                 uniform float scale;\n                 varying vec2 vUv0;\n                 void main(void)\n                 {\n                     vec3 normal = normalize(matrix_normal * vec3(0, 1, 0));\n                     float d = max(0.0, (dot(vec3(matrix_view[0][2], matrix_view[1][2], matrix_view[2][2]), normal) - 0.35) * (1.0 / (1.0 - 0.35)));\n                     mat4 modelMatrix = matrix_view * matrix_model;\n                     modelMatrix[0][0] = 1.0;\n                     modelMatrix[0][1] = 0.0;\n                     modelMatrix[0][2] = 0.0;\n                     modelMatrix[1][0] = 0.0;\n                     modelMatrix[1][1] = 1.0;\n                     modelMatrix[1][2] = 0.0;\n                     modelMatrix[2][0] = 0.0;\n                     modelMatrix[2][1] = 0.0;\n                     modelMatrix[2][2] = 1.0;\n                     vec4 positionW = modelMatrix * vec4(vertex_position * scale * d, 1.0);\n                     gl_Position = matrix_projection * positionW;\n                     vUv0 = vertex_position.xy + vec2(0.5);\n                     vUv0.y = 1.0 - vUv0.y;\n                 }\n",fshader:"                 precision mediump float;\n                 varying vec2 vUv0;\n                 uniform float opacity;\n                 uniform sampler2D texture_diffuseMap;\n                 void main(void)\n                 {\n                     vec3 diffuse = texture2D(texture_diffuseMap, vUv0).rgb;\n                     if (diffuse.r * opacity < 0.001) discard;\n                     gl_FragColor = vec4(diffuse * opacity, 1.0);\n                 }\n"})},this.material.depthTest=!1,this.material.depthWrite=!1,this.material.blend=!0,this.material.blendSrc=1,this.material.blendDst=1,this.material.cull=pc.CULLFACE_NONE,this.material.update();var a=[-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0],r=[2,1,0,0,3,2],n=new pc.VertexFormat(t.graphicsDevice,[{semantic:pc.SEMANTIC_POSITION,components:3,type:pc.ELEMENTTYPE_FLOAT32}]),o=new pc.VertexBuffer(t.graphicsDevice,n,a.length/3),c=new pc.VertexIterator(o);for(e=0;e<a.length/3;e++)c.element[pc.SEMANTIC_POSITION].set(a[3*e],a[3*e+1],a[3*e+2]),c.next();c.end();var m=new pc.IndexBuffer(t.graphicsDevice,pc.INDEXFORMAT_UINT16,r.length);new Uint16Array(m.lock()).set(r),m.unlock();var s=new pc.Mesh;s.vertexBuffer=o,s.indexBuffer[0]=m,s.primitive[0].type=pc.PRIMITIVE_TRIANGLES,s.primitive[0].base=0,s.primitive[0].count=r.length,s.primitive[0].indexed=!0;var l=new pc.GraphNode,p=new pc.MeshInstance(l,s,this.material);p.updateKey();var v=new pc.Model;v.graph=l,v.meshInstances=[p];var d=function(e){e.script&&e.script.blob&&(i.list.push(e),e.model.model=v.clone());for(var t=e.children,a=0;a<t.length;a++)d(t[a])};d(this.entity),this.camera=t.root.findByName("camera-demo"),this.last=Date.now(),this.frequency=50};var Dpi=pc.createScript("dpi");Dpi.prototype.initialize=function(){/(Android\s(5))|(OS\s8_)/.test(navigator.userAgent)&&(this.app.graphicsDevice.maxPixelRatio=window.devicePixelRatio)};var EnterCar=pc.createScript("enterCar"),CLOSED=0,OPEN=1,smoothstepC=function(t){return t*t*(3-2*t)},aspectFactor=0;pc.Mat4.prototype.setPerspective=function(t,e,a,i){var o,s,r,n;return o=(s=a*Math.tan(t*Math.PI/360))*e,n=(r=a*Math.tan(t*Math.PI/360))/e,o=pc.math.lerp(o,r,1-aspectFactor),s=pc.math.lerp(s,n,1-aspectFactor),this.setFrustum(-o,o,-s,s,a,i)},EnterCar.prototype.initialize=function(){var t=this,e=this.app;this.state=CLOSED,this.desiredState=CLOSED,this.qClosedL=new pc.Quat(.16770329275499624,-.13742740306195664,.7705436019984198,.5993762356868007),this.qOpenL=new pc.Quat(.05971991238649869,-.3044157265276763,.9163674128374995,-.2530520921933029),this.percent=1,this.qOpenPivot=new pc.Quat(.08898384042448368,-.7074410607015866,-.09054051236260335,-.6952779569336579),this.qStartPivot=new pc.Quat,this.camLpos=new pc.Vec3,this.camLrot=new pc.Quat,this.camFov=0,this.fovOuside=56,this.fovInside=65,this.proj=new pc.Mat4,this.speed=.25,e._openDoor=this,this.fovFactor=0,this.door=e.root.findByName("left"),this.inside=e.root.findByName("inside"),e.graphicsDevice.on("resizecanvas",function(e,a){t.updateFov(e/a)})},EnterCar.prototype.toggle=function(){var t=this.app;if(this.state===this.desiredState)if(this.percent=0,this.desiredState=1-this.state,this.entity.fire("stateStart"),this.desiredState===OPEN){t._carPivotRotation.enabled=!1,this.qStartPivot.copy(t._carPivotRotation.entity.getLocalRotation()),this.camLpos.copy(t.scene._activeCamera._node.getLocalPosition()),this.camLrot.copy(t.scene._activeCamera._node.getLocalRotation()),this.camFov=t.scene._activeCamera.fov;for(var e=0;e<t._leds.length;e++)t._leds[e].turnOn()}else{var a=t._carPivotRotation.entity.getEulerAngles();t._carPivotRotation.yaw=t._carPivotRotation.yawTarget=a.y-60;for(e=0;e<t._leds.length;e++)t._leds[e].turnOff()}},EnterCar.prototype.updateFov=function(t){var e=this.app.scene._activeCamera;e&&(e._fov=pc.math.lerp(this.fovOuside,this.fovInside,this.fovFactor),e._projMatDirty=!0,aspectFactor=Math.max(0,Math.min(1,t-1))*this.fovFactor)},EnterCar.prototype.update=function(t){var e=this.app;if(e.keyboard.wasPressed(pc.KEY_ENTER)&&this.toggle(),this.state!==this.desiredState){var a=this.qClosedL,i=this.qOpenL;this.percent=Math.min(this.percent+t*this.speed,1),1===this.percent&&(this.state=this.desiredState,this.state==CLOSED&&(e._autoDistance.weight=1),this.entity.fire("state",this.state));var o,s,r,n,c=Math.min(4*this.percent,1),h=pc.math.clamp(4*this.percent-2,0,1),p=this.door.getLocalRotation();if(c<1?p.slerp(a,i,smoothstepC(c)):p.slerp(i,a,smoothstepC(h)),this.door.setLocalRotation(p),this.desiredState===OPEN){(p=e._carPivotRotation.entity.getLocalRotation()).slerp(this.qStartPivot,this.qOpenPivot,smoothstepC(c)),e._carPivotRotation.entity.setLocalRotation(p),o=Math.max(1.176*this.percent-.176,0),n=smoothstepC(pc.math.clamp((o-.1)/.1,0,1)),o=smoothstepC(o),e._autoDistance.enabled=o<=0,s=e.scene._activeCamera._node,e.scene._activeCamera._projMatDirty=!0,r=s.getPosition();var v=this.inside.getPosition();r.lerp(r,v,o),s.setPosition(r),e._mouseLook.enabled=o>0,e._mouseLook.weight=o}else o=Math.max(1.176*this.percent-.176,0),n=smoothstepC(pc.math.clamp(o/.1,0,1)),o=smoothstepC(o),r=(s=e.scene._activeCamera._node).getLocalPosition(),o<.3&&(r.lerp(r,this.camLpos,o),s.setLocalPosition(r)),(p=s.getLocalRotation()).slerp(p,this.camLrot,o),s.setLocalRotation(p),e.scene._activeCamera._projMatDirty=!0,e._carPivotRotation.enabled=o>0,e._carPivotRotation.enabled&&60!==e._carPivotRotation.yawS&&(e._carPivotRotation.pitchS=-20,e._carPivotRotation.yawS=60),e._autoDistance.enabled=o>0,e._carPivotRotation.weight=o,e._autoDistance.weight=Math.max(o-.3,0)/.7,e._mouseLook.enabled=n<1,e._mouseLook.weight=1-n}if(e.scene._activeCamera){var d=0;d=this.desiredState===OPEN?Math.min(1,Math.max(0,12*this.percent-3.2)):Math.min(1,Math.max(0,2.7-12*this.percent)),Math.abs(this.fovFactor-d)>.005&&(this.fovFactor=this.fovFactor+.1*(d-this.fovFactor),Math.abs(this.fovFactor-d)<.005&&(this.fovFactor=d),this.updateFov(e.scene._activeCamera._aspect))}};var Exposure=pc.createScript("exposure");Exposure.attributes.add("exposure",{type:"number",default:16}),Exposure.prototype.initialize=function(){this.app.scene.exposure=0,this.speed=.01},Exposure.prototype.update=function(e){var s=this.app;s.scene.exposure<this.exposure&&(s.scene.exposure+=e*this.speed,this.speed+=.02*(4-this.speed),s.scene.exposure>=this.exposure&&(s.scene.exposure=this.exposure))};var Driving=pc.createScript("driving");Driving.attributes.add("diameter",{type:"number",default:65}),Driving.prototype.initialize=function(){var i=this.app;this.wheels=[],this.floor=i.root.findByName("ground").script.floor;for(var t=this.entity.children,e=0;e<t.length;e++)this.wheels.push(t[e].findByName("body"))},Driving.prototype.update=function(i){if(this.floor.speed)for(var t=1/(Math.PI*this.diameter/100)*(1e3*this.floor.speed/60/60)*360*i,e=0;e<this.wheels.length;e++)this.wheels[e].rotateLocal(t,0,0)};var AutoDistance=pc.createScript("autoDistance");AutoDistance.attributes.add("defaultDist",{type:"number",default:4}),AutoDistance.attributes.add("zDist",{type:"number",default:3.3}),AutoDistance.attributes.add("xDist",{type:"number",default:2.2}),AutoDistance.attributes.add("parentMovement",{type:"number",default:1.5}),AutoDistance.attributes.add("speed",{type:"number",default:1}),AutoDistance.attributes.add("distMult",{type:"number",default:1}),AutoDistance.attributes.add("zoomMult",{type:"number",default:1});var smoothstep=function(t,e,s){return s=s*s*(3-2*s),pc.math.lerp(t,e,s)};AutoDistance.prototype.initialize=function(){var t=this.app;this.weight=1,this.lpos2=new pc.Vec3,t._autoDistance=this,this.entity.camera.horizontalFov=!0,this.entity.camera.fov=this.entity.camera.fov/this.zoomMult},AutoDistance.prototype.postUpdate=function(t){var e=t*this.speed,s=this.entity.forward,i=Math.abs(s.z),a=Math.abs(s.x),o=Math.abs(s.y),n=smoothstep(this.defaultDist,this.xDist,a);n=smoothstep(n,this.zDist,i)*this.distMult;var u=this.entity.getLocalPosition();u.z=smoothstep(u.z,n,e*this.weight),this.entity.setLocalPosition(u),this.lpos2.z=smoothstep(this.lpos2.z,-s.z*this.parentMovement,e*this.weight),this.lpos2.y=smoothstep(this.lpos2.y,s.y*(1.25*o+1)*(o*-i+1),e*this.weight),this.entity.parent.setLocalPosition(this.lpos2)};var Augmented=pc.createScript("augmented");Augmented.prototype.initialize=function(){this.items=[],this.index={};var t=this.app;this.camera=t.root.findByName("camera-demo"),this.functions={carEnter:function(){t._openDoor.toggle()},carExit:function(){t._openDoor.toggle()}}},Augmented.prototype.postInitialize=function(){var t=this,e=this.app;this.getByLabel("interior").forEach(function(t){t.entity.enabled=!1}),e.root.children[0].on("stateStart",function(){for(var e=0;e<t.items.length;e++)t.items[e].entity.enabled=!1}),e.root.children[0].on("state",function(e){for(var i=t.index[e?"interior":"exterior"],n=0;n<i.length;n++)i[n].entity.enabled=!0})},Augmented.prototype.add=function(t){if(this.items.push(t),t.tag)for(var e=t.tag.split(","),i=0;i<e.length;i++)e[i]=e[i].trim(),e[i]&&(this.index[e[i]]=this.index[e[i]]||[],this.index[e[i]].push(t))},Augmented.prototype.getByLabel=function(t){return this.index[t]||[]};var ParentAndSaveTransform=pc.createScript("parentAndSaveTransform");ParentAndSaveTransform.attributes.add("to",{type:"string",default:""}),ParentAndSaveTransform.prototype.initialize=function(){var t=this.app.root.findByName(this.to),i=this.entity.getPosition(),n=this.entity.getRotation(),e=this.entity.parent;e&&e.removeChild(this.entity),this.tmpMat4=new pc.Mat4,this.tmpQuat=new pc.Quat,this.entity.setPosition(this.tmpMat4.copy(t.getWorldTransform()).invert().transformPoint(i)),this.entity.setRotation(this.tmpQuat.copy(t.getRotation()).invert().mul(n)),t.addChild(this.entity),this.entity.dirtyWorld=!0};var Led=pc.createScript("led"),smoothstepC=function(t){return t*t*(3-2*t)},curve=function(t){return t<.1?2*smoothstepC(t/.1):pc.math.lerp(2,1,smoothstepC(t-.1)/.9)};Led.prototype.initialize=function(){var t=this.app;this.mat=null,this.targetIntensity=0,this.percent=1,this.timeToEnable=0,this.mat=this.entity.model.model.meshInstances[0].material.clone(),this.entity.model.model.meshInstances[0].material=this.mat,this.mat.emissiveIntensity=0,this.mat.update(),t._leds||(t._leds=[]),t._leds.push(this)},Led.prototype.update=function(t){Date.now()<this.timeToEnable||this.percent<1&&(this.percent+=t*(1===this.targetIntensity?.5:10),this.percent>1&&(this.percent=1),this.mat.emissiveIntensity=1===this.targetIntensity?curve(this.percent):1-this.percent,this.mat.update())},Led.prototype.turnOn=function(){this.targetIntensity=1,this.percent=0,this.timeToEnable=Date.now()+2e3+500*Math.random()},Led.prototype.turnOff=function(){this.targetIntensity=0,this.percent=0,this.timeToEnable=0};var Fps=pc.createScript("fps");Fps.prototype.initialize=function(){this.meter=new FPSMeter({graph:1})},Fps.prototype.update=function(t){this.meter.tick()};var Vr=pc.createScript("vr");Vr.attributes.add("camera",{type:"entity"}),Vr.prototype.initialize=function(){this.app.on("vr:start",function(){this.entity.enabled=!1,this.camera.enabled=!0,this.app.xr.start(this.camera.camera,pc.XRTYPE_VR,pc.XRSPACE_LOCAL)},this),this.app.xr.on("end",function(){this.camera.enabled=!1,this.entity.enabled=!0},this)};